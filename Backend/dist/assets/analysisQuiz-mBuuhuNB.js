import{d as S,c as p,b as y,e as o,t as c,f as s,h as T,g as A,o as f,O as J,s as d,k as h,l as O,_ as B,r as g,x as M,y as E,B as U,H as F,a6 as L,w as K,v as X,z as Y,A as Z}from"./index-CF0mUiIM.js";const ee={class:"container"},te={key:0},se={class:"button-container"},ne=S({__name:"Introduction",props:["title","description","duration","sectionsTitles"],emits:["startQuiz"],setup(i){return(k,w)=>(f(),p("div",ee,[y(J),o("h1",null,c(s(d)(i.title)),1),o("h3",null,c(s(d)(i.description)),1),o("h3",null,[T(c(s(d)(s(h).durationOfTest))+" ",1),o("strong",null,[T(c(Math.floor(i.duration/60))+":",1),i.duration%60<10?(f(),p("strong",te,"0")):A("",!0),T(c(i.duration%60)+" "+c(s(d)(s(h).minutes)),1)])]),o("div",se,[y(s(O),{label:s(d)(s(h).startAnalysisQuiz),onClick:w[0]||(w[0]=()=>{k.$emit("startQuiz")})},null,8,["label"])])]))}}),ie=B(ne,[["__scopeId","data-v-b0a0139b"]]),le={class:"container"},oe={style:{display:"flex","justify-content":"space-between"}},ae={class:"question-container"},ue={class:"question"},de=["src"],re={class:"question-text"},ce=["src"],ve={class:"choices-wrapper"},_e=["onClick"],me=["src"],fe={class:"button-container"},he=S({__name:"Section",props:["showPrevious","showNext","question","answers","selectedQuestionOrder","sectionName","audio_link","leftTime","duration"],emits:["previous","next","answer"],setup(i){function k(){window.scrollTo(0,0)}return g("en"),(w,e)=>{var v,b,l;return f(),p("div",le,[o("div",oe,[o("h1",null,c(s(d)(s(h).question))+" "+c(i.selectedQuestionOrder+1),1)]),o("div",ae,[o("div",ue,[i.audio_link?(f(),p("iframe",{key:0,src:i.audio_link,frameborder:"0",allowtransparency:"true",sandbox:"allow-scripts allow-same-origin"},null,8,de)):A("",!0),o("h4",re,[T(c(s(d)((v=i.question)==null?void 0:v.question))+" ",1),o("img",{src:(b=i.question)==null?void 0:b.image,alt:""},null,8,ce)]),o("div",ve,[(f(!0),p(M,null,E((l=i.question)==null?void 0:l.choices,n=>{var z;return f(),p("p",{class:U(["choice-text",{selectedChoice:(z=i.answers)==null?void 0:z.some(r=>{var Q;return(r==null?void 0:r.section_name)==i.sectionName&&(r==null?void 0:r.question_id)==((Q=i.question)==null?void 0:Q.id)&&(r==null?void 0:r.choice_id)==(n==null?void 0:n.id)})}]),key:n,onClick:()=>{var r;w.$emit("answer",{section_name:i.sectionName,question_id:(r=i.question)==null?void 0:r.id,choice_id:n==null?void 0:n.id})}},[o("span",null,c(s(d)(n==null?void 0:n.choice)),1),o("img",{src:n==null?void 0:n.image,alt:""},null,8,me)],10,_e)}),128))])])]),o("div",fe,[y(s(O),{label:s(d)(s(h).prev),onClick:e[0]||(e[0]=()=>{k(),w.$emit("previous")}),disabled:!i.showPrevious},null,8,["label","disabled"]),y(s(O),{label:s(d)(s(h).next),onClick:e[1]||(e[1]=()=>{k(),w.$emit("next")}),disabled:!i.showNext},null,8,["label","disabled"])])])}}}),qe=B(he,[["__scopeId","data-v-91195398"]]),pe={class:"container"},be={class:"sidebar"},ke=["onClick"],we=S({__name:"AnalysisQuizSidebar",props:["questions","selectedQuestion","answers"],emits:["selectQuestion"],setup(i){return(k,w)=>(f(),p("div",pe,[o("h2",null,c(s(d)(s(h).question)),1),o("div",be,[(f(!0),p(M,null,E(i.questions,(e,v)=>{var b;return f(),p("p",{class:U({selected:(e==null?void 0:e.order)==i.selectedQuestion,answered:(b=i.answers)==null?void 0:b.some(l=>{var n;return(l==null?void 0:l.question_id)==((n=e==null?void 0:e.question)==null?void 0:n.id)&&(l==null?void 0:l.section_name)==(e==null?void 0:e.section_name)&&(l==null?void 0:l.choice_id)!=-1})}),onClick:l=>k.$emit("selectQuestion",e==null?void 0:e.order)},c(s(d)(s(h).question))+" "+c(v+1),11,ke)}),256))])]))}}),ye=B(we,[["__scopeId","data-v-9a4b122d"]]),ge={class:"wrapper"},ze={style:{display:"flex","flex-direction":"column","align-items":"center",gap:"2rem","padding-inline":"5rem","padding-top":"2rem"}},Qe={key:1,class:"section-wrapper"},$e={class:"section"},xe={class:"button-container"},Ce=S({__name:"analysisQuiz",setup(i){const k=Y(),w=new F("get_analysis_quiz"),e=g({title:null,description:null,duration:null,questions:[]}),v=g(),b=g(0),l=g([]),n=g(0),z=g(!1);let r;const Q=g(!1);w.callApi({analysis_quiz_id:k.params.quizId}).then(_=>{var a,u,$,x,C,N,I,q,D,P,R,V,H;if(_.msg=="Quiz Taken Before"){L.push("/childNotifications");return}v.value=(a=_==null?void 0:_.data)==null?void 0:a.analysis_quiz,b.value=(u=v.value)==null?void 0:u.duration,e.value.description=($=v.value)==null?void 0:$.description,e.value.title=(x=v.value)==null?void 0:x.title,e.value.duration=(C=v.value)==null?void 0:C.duration;for(let t of(I=(N=v.value)==null?void 0:N.iq)==null?void 0:I.iq_sections)for(let m of t.questions)e.value.questions.push({question:m,section_name:t==null?void 0:t.name,order:e.value.questions.length,audio_link:t==null?void 0:t.audio_link}),l.value.push({section_name:t==null?void 0:t.name,question_id:m==null?void 0:m.id,choice_id:-1});for(let t of(D=(q=v.value)==null?void 0:q.enneagram)==null?void 0:D.personalities)for(let m of t.questions)e.value.questions.push({question:m,section_name:t==null?void 0:t.name,order:e.value.questions.length,audio_link:t==null?void 0:t.audio_link}),l.value.push({section_name:t.name,question_id:m.id,choice_id:-1});for(let t of(R=(P=v.value)==null?void 0:P.learning_styles)==null?void 0:R.learning_style_features)for(let m of t.questions)e.value.questions.push({question:m,section_name:t==null?void 0:t.name,order:e.value.questions.length,audio_link:t==null?void 0:t.audio_link}),l.value.push({section_name:t.name,question_id:m.id,choice_id:-1});for(let t of(H=(V=v.value)==null?void 0:V.big5traits)==null?void 0:H.traits)for(let m of t.questions)e.value.questions.push({question:m,section_name:t==null?void 0:t.name,order:e.value.questions.length,audio_link:t==null?void 0:t.audio_link}),l.value.push({section_name:t.name,question_id:m.id,choice_id:-1})});function W(){Q.value=!0,r=setInterval(()=>{b.value--,b.value==0&&j()},1e3)}function G(_){let a=l.value.find(u=>(u==null?void 0:u.question_id)==_.question_id&&(u==null?void 0:u.section_name)==_.section_name);a.choice_id=_==null?void 0:_.choice_id}function j(){clearInterval(r);const _=new F("add_analysis_quiz_answer");let a={answers:{quiz_id:k.params.quizId,answers:l.value}};console.log(a),_.callApi(a).then(u=>{console.log(u==null?void 0:u.data),u!=null&&u.success&&(z.value=!0)})}return(_,a)=>{var u,$,x,C,N,I;return f(),p("div",ge,[y(s(Z),{style:{"max-width":"80%"},visible:z.value,"onUpdate:visible":a[1]||(a[1]=q=>z.value=q),modal:"",pt:{mask:{style:"backdrop-filter: blur(2px)"},header:{style:"display:none"},content:{style:"margin-block:auto; display: flex; flex-direction: column; align-items: center; justify-content: center;"}}},{default:K(()=>[o("div",ze,[o("h3",null,c(s(d)(s(h).wellDone)),1),o("h3",null,c(s(d)(s(h).logWithParent)),1),y(s(O),{label:s(d)(s(h).returnHome),onClick:a[0]||(a[0]=q=>s(L).push("/childNotifications"))},null,8,["label"])])]),_:1},8,["visible","pt"]),Q.value?A("",!0):(f(),X(ie,{key:0,title:(u=e.value)==null?void 0:u.title,description:($=e.value)==null?void 0:$.description,duration:(x=e.value)==null?void 0:x.duration,onStartQuiz:W},null,8,["title","description","duration"])),Q.value?(f(),p("div",Qe,[y(ye,{answers:l.value,questions:e.value.questions,"selected-question":n.value,onSelectQuestion:a[2]||(a[2]=q=>{n.value=q})},null,8,["answers","questions","selected-question"]),o("div",$e,[y(qe,{"show-next":e.value.questions.length!=n.value+1,"show-previous":n.value!=0,question:(C=e.value.questions[n.value])==null?void 0:C.question,sectionName:(N=e.value.questions[n.value])==null?void 0:N.section_name,selectedQuestionOrder:n.value,answers:l.value,audio_link:(I=e.value.questions[n.value])==null?void 0:I.audio_link,leftTime:b.value,duration:e.value.duration,onNext:a[3]||(a[3]=q=>n.value++),onPrevious:a[4]||(a[4]=q=>n.value--),onAnswer:a[5]||(a[5]=q=>{G(q)})},null,8,["show-next","show-previous","question","sectionName","selectedQuestionOrder","answers","audio_link","leftTime","duration"]),o("div",xe,[y(s(O),{onClick:j,label:s(d)(s(h).finishQuiz)},null,8,["label"])])])])):A("",!0)])}}}),Ie=B(Ce,[["__scopeId","data-v-0295b56b"]]);export{Ie as default};
