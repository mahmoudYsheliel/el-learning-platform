import{d as ge,H as G,r as M,aA as v,c as A,b as i,e,D as U,f as n,w as q,G as fe,i as be,o as V,N as Ve,x as H,t as ae,I as te,W as Ce,m as S,l as L,av as se,g as oe,h as ke,F as Ae,p as Ue,n as Te,_ as ye}from"./index-BUqRmQ9k.js";import{s as O}from"./dropdown.esm-Dkb4opWb.js";import{s as j,a as ie}from"./tabpanel.esm-CmWiYRUI.js";import"./index.esm-BjKNvXz0.js";const m=P=>(Ue("data-v-f8b7332a"),P=P(),Te(),P),Le={class:"container"},we=m(()=>e("div",{class:"tab_header"},[e("i",{class:"pi pi-info"}),e("p",null," Basic Info ")],-1)),Ee={class:"tab_container"},Se={class:"element"},$e=m(()=>e("div",{class:"tab_header"},[e("i",{class:"pi pi-bars"}),e("p",null," Tracks")],-1)),xe={class:"tab_container"},Ne={class:"tracks"},De={class:"btn-container"},Re={class:"element",style:{"margin-bottom":"0.5rem"}},Be=m(()=>e("h3",null,"Select Track",-1)),Ie={key:0,class:"track_container",style:{"border-top":"2px solid var(--text)","padding-top":"1rem"}},Fe={class:"btn-container"},Me={class:"element"},qe=m(()=>e("h4",null,"English Title",-1)),Pe={class:"element"},He=m(()=>e("h4",null,"Arabic Title",-1)),je={class:"element"},ze=m(()=>e("h4",null,"English Description",-1)),Ge={class:"element"},Oe=m(()=>e("h4",null,"Arabic Description",-1)),We={class:"images"},Je={class:"image"},Ke=m(()=>e("h4",null,"Female Image",-1)),Qe=["src"],Xe={class:"image"},Ye=m(()=>e("h4",null,"Male Image",-1)),Ze=["src"],el={class:"image"},ll=m(()=>e("h4",null,"Image",-1)),al=["src"],tl={class:"image"},sl=m(()=>e("h4",null,"Video",-1)),ol=["src"],il=m(()=>e("h3",null,"Levels",-1)),nl=["onClick"],ul=["onClick"],dl={class:"level_container"},rl={class:"element"},cl=m(()=>e("h4",null,"English Title",-1)),vl={class:"element"},pl=m(()=>e("h4",null,"Arabic Title",-1)),ml={class:"btn-container"},_l={class:"row"},hl={class:"courseelement"},gl=["onClick"],fl={class:"btn-container"},bl={class:"btn-container"},Vl=m(()=>e("div",{class:"tab_header"},[e("i",{class:"pi pi-book"}),e("p",null," Courses")],-1)),Cl={class:"tab_container"},kl={class:"row"},Al={class:"courseelement"},Ul=["onClick"],Tl={class:"btn-container"},yl={class:"btn-container"},Ll=ge({__name:"editProgram",setup(P){const W=fe(),ne=be(),ue=new G("get_program"),de=new G("get_courses"),f=M(),y=M([]),T=M([]),b=M([]),t=M();de.callApi({}).then(o=>{var a,l;o!=null&&o.success&&(y.value=(a=o==null?void 0:o.data)==null?void 0:a.courses,ue.callApi({program_id:(l=W.params)==null?void 0:l.programId}).then(s=>{var u,r,p,w,x,N,D,R,B,I,F,_,c,h,C,$,K,Q,X,Y,Z,ee,le;if(s!=null&&s.success){f.value=(u=s==null?void 0:s.data)==null?void 0:u.program,v.value={...v.value,titleEn:{...v.value.titleEn,variable:((p=(r=f.value)==null?void 0:r.title)==null?void 0:p.en)||""},titleAr:{...v.value.titleAr,variable:((x=(w=f.value)==null?void 0:w.title)==null?void 0:x.ar)||""},descriptionEn:{...v.value.descriptionEn,variable:((D=(N=f.value)==null?void 0:N.description)==null?void 0:D.en)||""},descriptionAr:{...v.value.descriptionAr,variable:((B=(R=f.value)==null?void 0:R.description)==null?void 0:B.ar)||""},image:{...v.value.image,variable:((I=f.value)==null?void 0:I.image)||""},minAge:{...v.value.minAge,variable:((F=f.value)==null?void 0:F.min_age)||""},maxAge:{...v.value.maxAge,variable:((_=f.value)==null?void 0:_.max_age)||""}},T.value=[];for(let E=0;E<((h=(c=f.value)==null?void 0:c.road_map)==null?void 0:h.length);E++)T.value.push({course:y.value.find(d=>{var g,k;return(d==null?void 0:d.id)==((k=(g=f.value)==null?void 0:g.road_map[E])==null?void 0:k.id)})});b.value=[];for(let E=0;E<(($=(C=f.value)==null?void 0:C.tracks)==null?void 0:$.length);E++){let d=(K=f.value)==null?void 0:K.tracks[E];for(let g=0;g<((Q=d==null?void 0:d.levels)==null?void 0:Q.length);g++)for(let k=0;k<((Y=(X=d==null?void 0:d.levels[g])==null?void 0:X.courses)==null?void 0:Y.length);k++)d.levels[g].courses[k]=(Z=y.value)==null?void 0:Z.find(z=>(z==null?void 0:z.id)==d.levels[g].courses[k]);for(let g=0;g<((ee=d==null?void 0:d.courses)==null?void 0:ee.length);g++)d.courses[g]=(le=y.value)==null?void 0:le.find(k=>(k==null?void 0:k.id)==(d==null?void 0:d.courses[g]));b.value.push(d)}}}))});function re(){T.value.push({course:null})}function ce(){var o;b.value.push({title:{en:"New Track",ar:""},description:{en:"",ar:""},female_image:"",male_image:"",image:"",video:"",levels:[],courses:[]}),t.value=b.value[((o=b.value)==null?void 0:o.length)-1]}function ve(){var o;(o=t.value)==null||o.levels.push({title:{en:"New Level",ar:""},courses:[]})}function pe(o){var a,l;(l=(a=t.value)==null?void 0:a.levels[o])==null||l.courses.push({course:null})}function me(o){T.value.splice(o,1)}function _e(){var a,l,s;let o=-1;for(let u=0;u<b.value.length;u++)((a=b.value[u])==null?void 0:a.title.en)==((s=(l=t.value)==null?void 0:l.title)==null?void 0:s.en)&&(o=u);b.value.splice(o,1),t.value=b.value[0]}function he(){var s,u,r,p,w,x,N,D,R,B,I,F;let o=[];for(let _=0;_<T.value.length;_++)o.push({id:(u=(s=T.value[_])==null?void 0:s.course)==null?void 0:u.id});let a=[];for(let _=0;_<((r=b.value)==null?void 0:r.length);_++){let c=b.value[_];for(let h=0;h<((p=c==null?void 0:c.levels)==null?void 0:p.length);h++)for(let C=0;C<((x=(w=c==null?void 0:c.levels[h])==null?void 0:w.courses)==null?void 0:x.length);C++)c.levels[h].courses[C]=(D=(N=y.value)==null?void 0:N.find($=>($==null?void 0:$.id)==c.levels[h].courses[C].id))==null?void 0:D.id;for(let h=0;h<((R=c==null?void 0:c.courses)==null?void 0:R.length);h++)c.courses[h]=(I=(B=y.value)==null?void 0:B.find(C=>(C==null?void 0:C.id)==(c==null?void 0:c.courses[h])))==null?void 0:I.id;a.push(c)}const l={program_id:(F=W.params)==null?void 0:F.programId,update:{title:{en:v.value.titleEn.variable,ar:v.value.titleAr.variable},description:{en:v.value.descriptionEn.variable,ar:v.value.descriptionAr.variable},min_age:v.value.minAge.variable,max_age:v.value.maxAge.variable,image:v.value.image.variable,road_map:o,tracks:a}};new G("update_program").callApi(l).then(_=>{_!=null&&_.success&&ne.push("/manageCourses")})}function J(o,a){var s,u,r,p;if(o<0||a<0||o>=((s=t.value)==null?void 0:s.levels.length)||a>=((u=t.value)==null?void 0:u.levels.length))return;const l=(r=t.value)==null?void 0:r.levels[o];t.value.levels[o]=(p=t.value)==null?void 0:p.levels[a],t.value.levels[a]=l}return(o,a)=>(V(),A(q,null,[i(Ve),e("div",Le,[i(n(ie),null,{default:U(()=>[i(n(j),null,{header:U(()=>[we]),default:U(()=>[e("div",Ee,[(V(!0),A(q,null,H(n(v),l=>(V(),A("div",Se,[e("h3",null,ae(l.label),1),(V(),te(Ce(l.component),{type:l.inputType,modelValue:l.variable,"onUpdate:modelValue":s=>l.variable=s},null,8,["type","modelValue","onUpdate:modelValue"]))]))),256))])]),_:1}),i(n(j),null,{header:U(()=>[$e]),default:U(()=>[e("div",xe,[e("div",Ne,[e("div",De,[i(n(S),{onClick:ce,icon:"pi pi-plus-circle",label:"Add Track"})]),e("div",Re,[Be,i(n(O),{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=l=>t.value=l),options:b.value,optionLabel:"title.en",placeholder:"Select a track"},null,8,["modelValue","options"])]),t.value?(V(),A("div",Ie,[e("div",Fe,[i(n(S),{onClick:a[1]||(a[1]=l=>_e()),icon:"pi pi-times-circle",label:"Delete Track",style:{"background-color":"red"}})]),e("div",Me,[qe,i(n(L),{modelValue:t.value.title.en,"onUpdate:modelValue":a[2]||(a[2]=l=>t.value.title.en=l)},null,8,["modelValue"])]),e("div",Pe,[He,i(n(L),{modelValue:t.value.title.ar,"onUpdate:modelValue":a[3]||(a[3]=l=>t.value.title.ar=l)},null,8,["modelValue"])]),e("div",je,[ze,i(n(se),{modelValue:t.value.description.en,"onUpdate:modelValue":a[4]||(a[4]=l=>t.value.description.en=l)},null,8,["modelValue"])]),e("div",Ge,[Oe,i(n(se),{modelValue:t.value.description.ar,"onUpdate:modelValue":a[5]||(a[5]=l=>t.value.description.ar=l)},null,8,["modelValue"])]),e("div",We,[e("div",Je,[Ke,i(n(L),{modelValue:t.value.female_image,"onUpdate:modelValue":a[6]||(a[6]=l=>t.value.female_image=l)},null,8,["modelValue"]),e("img",{src:t.value.female_image,alt:""},null,8,Qe)]),e("div",Xe,[Ye,i(n(L),{modelValue:t.value.male_image,"onUpdate:modelValue":a[7]||(a[7]=l=>t.value.male_image=l)},null,8,["modelValue"]),e("img",{src:t.value.male_image,alt:""},null,8,Ze)]),e("div",el,[ll,i(n(L),{modelValue:t.value.image,"onUpdate:modelValue":a[8]||(a[8]=l=>t.value.image=l)},null,8,["modelValue"]),e("img",{src:t.value.image,alt:""},null,8,al)]),e("div",tl,[sl,i(n(L),{modelValue:t.value.video,"onUpdate:modelValue":a[9]||(a[9]=l=>t.value.video=l)},null,8,["modelValue"]),t.value.video?(V(),A("iframe",{key:0,style:{"aspect-ratio":"1.75/1"},src:t.value.video,alt:""},null,8,ol)):oe("",!0)])]),il,i(n(ie),{scrollable:!0},{default:U(()=>{var l;return[(V(!0),A(q,null,H((l=t.value)==null?void 0:l.levels,(s,u)=>(V(),te(n(j),{key:u},{header:U(()=>[e("i",{class:"pi pi-angle-left",onClick:r=>J(u,u-1)},null,8,nl),ke(" "+ae(s.title.en)+" ",1),e("i",{class:"pi pi-angle-right",onClick:r=>J(u,u+1)},null,8,ul)]),default:U(()=>[e("div",dl,[e("div",rl,[cl,i(n(L),{modelValue:s.title.en,"onUpdate:modelValue":r=>s.title.en=r},null,8,["modelValue","onUpdate:modelValue"])]),e("div",vl,[pl,i(n(L),{modelValue:s.title.ar,"onUpdate:modelValue":r=>s.title.ar=r},null,8,["modelValue","onUpdate:modelValue"])]),e("div",ml,[i(n(S),{onClick:r=>pe(u),icon:"pi pi-plus-circle",label:"Add Level Course",style:{"font-size":"0.75rem"}},null,8,["onClick"])]),(V(!0),A(q,null,H(s.courses,(r,p)=>(V(),A("div",_l,[e("div",hl,[i(n(O),{modelValue:s.courses[p],"onUpdate:modelValue":w=>s.courses[p]=w,options:y.value,optionLabel:"title.en",placeholder:"Select a Course"},null,8,["modelValue","onUpdate:modelValue","options"]),e("i",{class:"pi pi-times-circle",onClick:()=>{s.courses.splice(p,1)}},null,8,gl)])]))),256)),e("div",fl,[i(n(S),{onClick:()=>{var r,p;(p=(r=t.value)==null?void 0:r.levels)==null||p.splice(u,1)},icon:"pi pi-times-circle",label:"Delete Level",style:{"background-color":"red"}},null,8,["onClick"])])])]),_:2},1024))),128))]}),_:1}),e("div",bl,[i(n(S),{onClick:a[10]||(a[10]=l=>ve()),icon:"pi pi-plus-circle",label:"Add Level"})])])):oe("",!0)])])]),_:1}),i(n(j),null,{header:U(()=>[Vl]),default:U(()=>[e("div",Cl,[e("div",null,[(V(!0),A(q,null,H(T.value,(l,s)=>(V(),A("div",kl,[e("div",Al,[i(n(O),{modelValue:T.value[s].course,"onUpdate:modelValue":u=>T.value[s].course=u,options:y.value,optionLabel:"title.en",placeholder:"Select a Course"},null,8,["modelValue","onUpdate:modelValue","options"]),e("i",{class:"pi pi-times-circle",onClick:()=>{me(s)}},null,8,Ul)])]))),256)),e("div",Tl,[i(n(S),{onClick:re,icon:"pi pi-plus-circle",label:"Add Course"})])])])]),_:1})]),_:1}),e("div",yl,[i(n(S),{onClick:he,label:"Save Changes"})])]),i(Ae)],64))}}),xl=ye(Ll,[["__scopeId","data-v-f8b7332a"]]);export{xl as default};
