import{_ as Q}from"./login-HlRQAw4O.js";import{d as X,a as S,r as p,H as R,c as z,b as r,e as a,t as m,f as l,g as Y,z as G,A as w,h as ee,i as le,w as ae,s as t,k as o,j as $,o as H,N as te,l as O,m as oe,F as ne,n as se,_ as ie}from"./index-wyPhXuOe.js";import{s as j}from"./index-BeYJDP60.js";import{s as ue}from"./index-Di7C_d5F.js";const de={class:"container"},re={class:"right"},me={class:"welcome"},pe={class:"google-facebook-wrapper"},ce={key:0},ve={class:"wrapper"},fe={class:"gender"},ge={class:"gender",style:{width:"60%"}},he={class:"gender"},_e={class:"gender",style:{width:"60%"}},Ve={class:"button"},ke=X({__name:"signupPage",setup(ye){const b=le();ae(),S();const v=p(),f=p(),y=p(),c=p("Child"),V=p(),C=p(),g=p(""),h=p(),i=p(""),x=new R("signup");function W(){if(!v.value||!f.value||!y.value||!C.value||!g.value||!h.value)i.value=t(o.dataMissing)??"";else if(f.value!=y.value)i.value=t(o.diffPass)??"";else if(!J(f.value))i.value=t(o.weakPass)??"";else if(!K(v.value))i.value=t(o.notValidEmail)??"";else if(c.value!="Child"&&c.value!="Parent")i.value=t(o.noRoleSelected)??"";else if(!g.value.startsWith("01")||g.value.length!=11)i.value=t(o.phoneNumberError)??"";else{let d={user:{email:v.value,hashed_pass:f.value,user_type:c.value,birth_day:C.value,phone_number:g.value,gender:h.value,role2:V.value,is_verefied:!0}};x.callApi(d).then(e=>{if(e.msg=="email is already used once")i.value=t(o.emailTaken)??"";else if((e==null?void 0:e.success)==!0){const u=new TextEncoder().encode(v.value);String.fromCharCode(...u),b.push("/")}})}}const Z=d=>{if(console.log(c.value),c.value!="Child"&&c.value!="Parent"){i.value=t(o.noRoleSelected)??"";return}const e=se(d.credential);if(e!=null&&e.email_verified){let _={user:{email:e.email,hashed_pass:"mahmoud2000",user_type:c.value,is_verefied:e.email_verified,first_name:e.given_name,last_name:e.family_name,image:e.picture}};x.callApi(_).then(u=>{if((u==null?void 0:u.msg)=="email is already used once")i.value=t(o.emailTaken)??"";else if((u==null?void 0:u.success)==!0){const k=new R("token"),s=S();k.login(e.email,"mahmoud2000").then(P=>{P!=null&&P.access_token&&new R("personal_info").callApi().then(n=>{var A,N,M,E,I,U,q,D,L,T,B,F;n!=null&&n.success&&(s.addInfo({userType:(N=(A=n==null?void 0:n.data)==null?void 0:A.info)==null?void 0:N.user_type,notifications:[],id:(E=(M=n==null?void 0:n.data)==null?void 0:M.info)==null?void 0:E.id,firstName:(U=(I=n==null?void 0:n.data)==null?void 0:I.info)==null?void 0:U.first_name,lastName:(D=(q=n==null?void 0:n.data)==null?void 0:q.info)==null?void 0:D.last_name,email:(T=(L=n==null?void 0:n.data)==null?void 0:L.info)==null?void 0:T.email,gender:(F=(B=n==null?void 0:n.data)==null?void 0:B.info)==null?void 0:F.gender}),b.push("/"))})})}})}};function J(d){const e=/[A-Z]/.test(d),_=/[a-z]/.test(d),u=/\d/.test(d),k=d.length>=8;return e&&_&&u&&k}function K(d){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)}return(d,e)=>{const _=$("Options"),u=$("GoogleLogin"),k=$("Divider");return H(),z("main",null,[r(te),r(_),a("div",de,[e[14]||(e[14]=a("div",{class:"left borderRigth"},[a("img",{src:Q,alt:""})],-1)),a("div",re,[a("div",me,[a("h1",null,m(l(t)(l(o).welcome)),1),a("h1",null,m(l(t)(l(o).traceCommunity)),1)]),a("div",pe,[r(u,{callback:Z,scope:"profile email https://www.googleapis.com/auth/userinfo.profile"})]),i.value?(H(),z("h4",ce,m(i.value),1)):Y("",!0),a("div",ve,[r(l(O),{style:{width:"100%"},type:"email",class:"input",modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=s=>v.value=s),placeholder:l(t)(l(o).email)},null,8,["modelValue","placeholder"]),r(l(j),{toggleMask:"",modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=s=>f.value=s),placeholder:l(t)(l(o).pass),onChange:e[2]||(e[2]=s=>i.value="")},{header:G(()=>e[12]||(e[12]=[a("h6",null,"Pick a password",-1)])),footer:G(()=>[r(k),e[13]||(e[13]=a("ul",{class:"pl-2 ml-2 mt-0",style:{"line-height":"1.5"}},[a("li",null,"At least one lowercase"),a("li",null,"At least one uppercase"),a("li",null,"At least one numeric"),a("li",null,"Minimum 8 characters")],-1))]),_:1},8,["modelValue","placeholder"]),r(l(j),{class:"input",modelValue:y.value,"onUpdate:modelValue":e[3]||(e[3]=s=>y.value=s),feedback:!1,toggleMask:"",placeholder:l(t)(l(o).confirmPass),onChange:e[4]||(e[4]=s=>i.value="")},null,8,["modelValue","placeholder"]),r(l(ue),{style:{width:"100%"},modelValue:C.value,"onUpdate:modelValue":e[5]||(e[5]=s=>C.value=s),placeholder:l(t)(l(o).childBirthDate)},null,8,["modelValue","placeholder"]),r(l(O),{style:{width:"100%"},type:"email",class:"input",modelValue:g.value,"onUpdate:modelValue":e[6]||(e[6]=s=>g.value=s),placeholder:l(t)(l(o).phone)},null,8,["modelValue","placeholder"]),a("div",fe,[a("h3",null,m(l(t)(l(o).gender))+":",1),a("div",ge,[a("span",{class:w([{role2_selected:h.value=="Male"},"role2"]),onClick:e[7]||(e[7]=s=>h.value="Male")},m(l(t)(l(o).male)),3),a("span",{class:w([{role2_selected:h.value=="Female"},"role2"]),onClick:e[8]||(e[8]=s=>h.value="Female")},m(l(t)(l(o).female)),3)])]),a("div",he,[a("h3",null,m(l(t)(l(o).type))+":",1),a("div",_e,[a("span",{class:w([{role2_selected:V.value=="Parent"},"role2"]),onClick:e[9]||(e[9]=s=>V.value="Parent")},m(l(t)(l(o).parent)),3),a("span",{class:w([{role2_selected:V.value=="Child"},"role2"]),onClick:e[10]||(e[10]=s=>V.value="Child")},m(l(t)(l(o).student)),3)])])]),a("div",Ve,[r(l(oe),{onClick:W,label:l(t)(l(o).signup)},null,8,["label"])]),a("p",null,[ee(m(l(t)(l(o).haveAccount))+" ",1),a("strong",{onClick:e[11]||(e[11]=s=>l(b).push("/login")),style:{cursor:"pointer","text-decoration":"underline",color:"var(--accent1)"}},m(l(t)(l(o).login)),1)])])]),r(ne)])}}}),$e=ie(ke,[["__scopeId","data-v-9c962211"]]);export{$e as default};
