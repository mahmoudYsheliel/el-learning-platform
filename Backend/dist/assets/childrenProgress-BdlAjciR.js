import{P as ce}from"./ParentSidebar-DteR4Snz.js";import{d as Q,r as O,D as U,c as u,e as t,b as S,C as D,f as o,h as b,t as l,v as F,H as K,o as a,w as H,G as se,s as i,k as C,g as $,_ as Y,N as re,F as ne}from"./index-B34PUY2Y.js";import{S as de}from"./SelectChild-BR43o3sG.js";import{a as X,s as J}from"./accordiontab.esm-znrmoD2D.js";import"./dropdown.esm-gwSln-ot.js";import"./index.esm-CoAznu1t.js";const ie={class:"header"},ae={style:{color:"var(--accent2)"}},ue={class:"content"},_e={class:"chapters"},he={class:"header"},pe={style:{color:"var(--accent1)"}},ve={style:{color:"var(--accent2)"}},fe={class:"material-content"},ge={class:"material"},ye={key:0,class:"lesson"},Ce={style:{color:"var(--text)"}},Ie={key:0,class:"completed",style:{color:"var(--accent2)"}},ke={style:{color:"var(--text)"}},we={key:1,class:"lesson"},xe={style:{color:"var(--text)"}},$e={key:0,class:"completed",style:{color:"var(--accent2)"}},Se={style:{color:"var(--text)"}},Ae={key:2,class:"lesson"},Re={style:{color:"var(--text)"}},qe={key:0,class:"completed",style:{color:"var(--accent2)"}},Pe={style:{color:"var(--text)"}},ze={key:3,class:"lesson"},Me={style:{color:"var(--text)"}},De={key:0,class:"completed",style:{color:"var(--accent2)"}},be={style:{color:"var(--text)"}},Ne={key:4,class:"quiz"},Ee={class:"quiz-header"},Le={style:{color:"var(--text)"}},Te={style:{color:"var(--text)"}},Be={style:{color:"var(--text)"}},Fe={class:"quiz-content"},Oe={class:"row names"},Ve={style:{color:"var(--text)"}},je={style:{color:"var(--text)"}},Ge={style:{color:"var(--text)"}},He={style:{color:"var(--text)"}},Qe={class:"row"},Ye=Q({__name:"ChildProgress",props:["selectedChildId"],setup(N){const h=N,f=O([]),k=O(),E=U(()=>{k.value=[],f.value=[];let p=[];const g=new K("get_child_enrollments");if(h.selectedChildId)return g.callApi({child_id:h.selectedChildId}).then(c=>{var v,e;if((v=c==null?void 0:c.data)!=null&&v.enrollments){p=(e=c==null?void 0:c.data)==null?void 0:e.enrollments,k.value=p;for(let s of p){let A=s==null?void 0:s.course_id;new K("get_course").callApi({course_id:A}).then(_=>{var L,w,x,P,y,T,V,z,W,Z,m,ee,te;if(_!=null&&_.success){let j={courseTitle:(w=(L=_==null?void 0:_.data)==null?void 0:L.course)==null?void 0:w.title,chapters:[],percentage:0};for(let R of(x=_==null?void 0:_.data)==null?void 0:x.course.chapters){let M={title:R==null?void 0:R.title,material:[],progress:0};for(let d of R==null?void 0:R.materials){let I={title:d==null?void 0:d.title,progress:[],type:d==null?void 0:d.type};if(d.type=="Lesson"){if((P=s==null?void 0:s.progress)!=null&&P.lessons_completed)for(let r of(y=s==null?void 0:s.progress)==null?void 0:y.lessons_completed)(r==null?void 0:r.lesson_id)==d.Id&&I.progress.push(r)}else if(d.type=="Simulation"){if((T=s==null?void 0:s.progress)!=null&&T.simulations_completed)for(let r of(V=s==null?void 0:s.progress)==null?void 0:V.simulations_completed)(r==null?void 0:r.simulation_id)==d.Id&&I.progress.push(r)}else if(d.type=="Project"){if((z=s==null?void 0:s.progress)!=null&&z.projects_completed)for(let r of(W=s==null?void 0:s.progress)==null?void 0:W.projects_completed)(r==null?void 0:r.project_id)==d.Id&&I.progress.push(r)}else if(d.type=="Activity"){if((Z=s==null?void 0:s.progress)!=null&&Z.activities_completed)for(let r of(m=s==null?void 0:s.progress)==null?void 0:m.activities_completed)(r==null?void 0:r.activity_id)==d.Id&&I.progress.push(r)}else if(d.type=="Quiz"&&(ee=s==null?void 0:s.progress)!=null&&ee.quizes_completed)for(let r of(te=s==null?void 0:s.progress)==null?void 0:te.quizes_completed)(r==null?void 0:r.quiz_id)==d.Id&&I.progress.push(r);M.material.push(I)}let G=M.material.reduce((d,I)=>{var r;return(r=I==null?void 0:I.progress)!=null&&r.length?d+1:d},0),B=M.material.length;M.progress=Math.floor(100*G/B),j.chapters.push(M)}let oe=j.chapters.reduce((R,M)=>{const G=M.material.reduce((B,d)=>{var I;return(I=d==null?void 0:d.progress)!=null&&I.length?B+1:B},0);return R+G},0),le=j.chapters.reduce((R,M)=>{var B;const G=(B=M.material)==null?void 0:B.length;return R+G},0);j.percentage=Math.floor(oe*100/le),f.value.push(j)}})}}}),null});function n(p){const g=new Date(p),c=g.getFullYear(),v=(g.getMonth()+1).toString().padStart(2,"0"),e=g.getDate().toString().padStart(2,"0");return`${c}-${v}-${e}`}return(p,g)=>(a(),u(F,null,[t("main",null,[S(o(X),null,{default:D(()=>[(a(!0),u(F,null,H(f.value,c=>(a(),se(o(J),{key:c.courseTitle},{header:D(()=>[t("div",ie,[t("h2",null,l(o(i)(c.courseTitle)),1),t("h2",ae,l(o(i)(o(C).completed))+" "+l(c.percentage)+" % ",1)])]),default:D(()=>[t("div",ue,[t("div",_e,[S(o(X),null,{default:D(()=>[(a(!0),u(F,null,H(c.chapters,v=>(a(),se(o(J),{key:v.title},{header:D(()=>[t("div",he,[t("h3",pe,l(o(i)(v.title)),1),t("h3",ve,l(o(i)(o(C).completed))+" "+l(v.progress)+" % ",1)])]),default:D(()=>[t("div",fe,[(a(!0),u(F,null,H(v.material,e=>{var s,A,q,_,L,w,x,P;return a(),u("div",ge,[(e==null?void 0:e.type)=="Lesson"?(a(),u("div",ye,[t("h4",Ce,l(o(i)(e.title)),1),(s=e==null?void 0:e.progress[0])!=null&&s.completed_at?(a(),u("div",Ie,[t("span",ke,l(o(i)(o(C).completedAt)),1),b(" "+l(n((A=e==null?void 0:e.progress[0])==null?void 0:A.completed_at)),1)])):$("",!0)])):$("",!0),(e==null?void 0:e.type)=="Simulation"?(a(),u("div",we,[t("h4",xe,l(o(i)(e.title)),1),(q=e==null?void 0:e.progress[0])!=null&&q.completed_at?(a(),u("div",$e,[t("span",Se,l(o(i)(o(C).completedAt)),1),b(" "+l(n((_=e==null?void 0:e.progress[0])==null?void 0:_.completed_at)),1)])):$("",!0)])):$("",!0),(e==null?void 0:e.type)=="Project"?(a(),u("div",Ae,[t("h4",Re,l(o(i)(e.title)),1),(L=e==null?void 0:e.progress[0])!=null&&L.completed_at?(a(),u("div",qe,[t("span",Pe,l(o(i)(o(C).completedAt)),1),b(" "+l(n((w=e==null?void 0:e.progress[0])==null?void 0:w.completed_at)),1)])):$("",!0)])):$("",!0),(e==null?void 0:e.type)=="Activity"?(a(),u("div",ze,[t("h4",Me,l(o(i)(e.title)),1),(x=e==null?void 0:e.progress[0])!=null&&x.completed_at?(a(),u("div",De,[t("span",be,l(o(i)(o(C).completedAt)),1),b(" "+l(n((P=e==null?void 0:e.progress[0])==null?void 0:P.completed_at)),1)])):$("",!0)])):$("",!0),e.type=="Quiz"?(a(),u("div",Ne,[S(o(X),null,{default:D(()=>[S(o(J),null,{header:D(()=>{var y,T;return[t("div",Ee,[t("h4",Le,l(o(i)(e==null?void 0:e.title)),1),t("h4",null,[t("span",Te,l(o(i)(o(C).heighest)),1),b(" "+l((y=e==null?void 0:e.progress)==null?void 0:y.reduce((V,z)=>(z==null?void 0:z.score_prcentage)>V?z==null?void 0:z.score_prcentage:V,0))+" % ",1)]),t("h4",null,[t("span",Be,l(o(i)(o(C).nomOfAtts)),1),b(" "+l((T=e==null?void 0:e.progress)==null?void 0:T.length),1)])])]}),default:D(()=>[t("div",Fe,[t("div",Oe,[t("h5",Ve,l(o(i)(o(C).att)),1),t("h5",je,l(o(i)(o(C).score)),1),t("h5",Ge,l(o(i)(o(C).timeToAns)),1),t("h5",He,l(o(i)(o(C).date)),1)]),(a(!0),u(F,null,H(e==null?void 0:e.progress,(y,T)=>(a(),u("div",Qe,[t("h5",null,l(T+1),1),t("h5",null,l(y==null?void 0:y.score_prcentage)+"%",1),t("h5",null,l(y==null?void 0:y.time_taken)+" sec",1),t("h5",null,l(n(y==null?void 0:y.created_at)),1)]))),256))])]),_:2},1024)]),_:2},1024)])):$("",!0)])}),256))])]),_:2},1024))),128))]),_:2},1024)])])]),_:2},1024))),128))]),_:1})]),b(" "+l(E.value),1)],64))}}),Xe=Y(Ye,[["__scopeId","data-v-1544786a"]]),Je={key:0,class:"container"},Ke=["width","height"],Ue=Q({__name:"PiChart",props:{data:{},width:{},height:{},innerRadiusRatio:{}},setup(N){const h=N,f=O(null),k=U(()=>{var n,p,g;if(f.value){const c=f.value.getContext("2d");c&&E(c,h.data,h.width,h.height,h.innerRadiusRatio)}return Math.floor(((n=h.data[0])==null?void 0:n.value)/(((p=h.data[0])==null?void 0:p.value)+((g=h.data[1])==null?void 0:g.value))*100)});function E(n,p,g,c,v){const e=p.reduce((w,x)=>w+x.value,0);let s=1.5*Math.PI;const A=g/2,q=c/2,_=Math.min(g,c)/2,L=_*v;p.forEach(w=>{const x=w.value/e*2*Math.PI;n.beginPath(),n.arc(A,q,_,s,s+x),n.arc(A,q,L,s+x,s,!0),n.closePath();const P=n.createLinearGradient(150,0,0,150);P.addColorStop(0,w.color1),P.addColorStop(1,w.color2),n.fillStyle=P,n.fill(),s+=x})}return(n,p)=>n.data?(a(),u("div",Je,[t("canvas",{ref_key:"donutChart",ref:f,width:n.width,height:n.height},null,8,Ke),t("h3",null,[t("span",null,l(o(i)(o(C).completed)),1),t("span",null,l(k.value)+"%",1)])])):$("",!0)}}),We=Y(Ue,[["__scopeId","data-v-3ae7506e"]]),Ze={class:"container",style:{width:"75%","margin-inline":"auto"}},me={key:0,class:"progress"},et={class:"completed"},tt={class:"in-progress"},st=Q({__name:"CoursesProgress",props:["selectedChildId"],setup(N){const h=N,f=O(),k=O([]),E=U(()=>{let p=[];k.value=[],f.value=null;const g=new K("get_child_enrollments");if(h.selectedChildId)return g.callApi({child_id:h.selectedChildId}).then(c=>{var v,e,s,A;if((v=c==null?void 0:c.data)!=null&&v.enrollments){p=(e=c==null?void 0:c.data)==null?void 0:e.enrollments,f.value=p;let q=(s=f.value)==null?void 0:s.filter(_=>_==null?void 0:_.is_completed).length;k.value=[q,((A=f.value)==null?void 0:A.length)-q],n.value=[{value:k.value[0],color1:"#7302ff",color2:"#01abff"},{value:k.value[1],color1:"#aaa",color2:"#aaa"}]}}),null}),n=O();return(p,g)=>{var c,v;return a(),u(F,null,[b(l(E.value)+" ",1),t("main",null,[t("div",Ze,[N.selectedChildId?(a(),u("div",me,[t("div",et,[t("p",null,l((c=f.value)==null?void 0:c.length),1),t("p",null,l(o(i)(o(C).coursesEnrolled)),1)]),t("div",tt,[t("p",null,l((v=f.value)==null?void 0:v.filter(e=>e==null?void 0:e.is_completed).length),1),t("p",null,l(o(i)(o(C).coursesCompleted)),1)])])):$("",!0),S(We,{style:{transform:"translate(0,-1rem)"},data:n.value,width:150,height:150,innerRadiusRatio:.8},null,8,["data"])])])],64)}}}),ot=Y(st,[["__scopeId","data-v-b4d80bb7"]]),lt={class:"container"},ct={class:"wrapper"},rt=Q({__name:"childrenProgress",setup(N){const h=O(null);return(f,k)=>(a(),u(F,null,[S(re),t("div",lt,[S(ce,{class:"sidebar",selected:"childProgress"}),t("div",ct,[S(de,{onSelectedChild:k[0]||(k[0]=E=>h.value=E)}),S(ot,{selectedChildId:h.value},null,8,["selectedChildId"]),S(Xe,{selectedChildId:h.value},null,8,["selectedChildId"])])]),S(ne)],64))}}),ht=Y(rt,[["__scopeId","data-v-26c41ca3"]]);export{ht as default};
