import{d as ce,H as P,r as N,as as d,c as C,b as o,e,v as $,w as D,f as n,B as H,g as ee,y as me,i as ve,o as V,N as pe,t as _e,z as he,V as ge,l as T,at as le,m as F,F as Ve,p as fe,n as be,_ as Ce}from"./index-SwBa6dz9.js";import{s as j}from"./dropdown.esm-faY_OgKi.js";import{s as Ae,a as Ue}from"./accordiontab.esm-C2wrdRGp.js";import"./index.esm-BEfGXN5-.js";const v=B=>(fe("data-v-085950f9"),B=B(),be(),B),ke={class:"container"},ye={class:"element"},Te=v(()=>e("h3",null,"Road Map",-1)),xe={class:"row"},Ee={class:"courseelement"},Ie=["onClick"],Se={class:"tracks"},we=v(()=>e("h3",null,"Tracks",-1)),Le={class:"element",style:{"margin-bottom":"2rem","padding-bottom":"1rem"}},Re=v(()=>e("h4",null,"Select Track",-1)),Me={key:0,class:"track_container"},ze={class:"element"},Ne=v(()=>e("h4",null,"English Title",-1)),$e={class:"element"},Be=v(()=>e("h4",null,"Arabic Title",-1)),De={class:"element"},Fe=v(()=>e("h4",null,"English Description",-1)),qe={class:"element"},Pe=v(()=>e("h4",null,"Arabic Description",-1)),He={class:"images"},je={class:"image"},Oe=v(()=>e("h4",null,"Female Image",-1)),Ge=["src"],Je={class:"image"},Ke=v(()=>e("h4",null,"Male Image",-1)),Qe=["src"],We={class:"image"},Xe=v(()=>e("h4",null,"Image",-1)),Ye=["src"],Ze={class:"image"},el=v(()=>e("h4",null,"Video",-1)),ll=["src"],al=v(()=>e("h3",null,"Levels",-1)),tl={class:"level"},ol={class:"btn-container",style:{margin:"0.25rem"}},sl=["onClick"],il={class:"element"},nl=v(()=>e("h4",null,"English Title",-1)),ul={class:"element"},dl=v(()=>e("h4",null,"Arabic Title",-1)),rl={class:"row"},cl={class:"courseelement"},ml=["onClick"],vl={class:"btn-container",style:{margin:"0"}},pl={class:"btn-container"},_l={class:"btn-container"},hl={class:"btn-container"},gl=ce({__name:"editProgram",setup(B){const O=me(),ae=ve(),te=new P("get_program"),oe=new P("get_courses"),h=N(),k=N([]),U=N([]),y=N([]),a=N();oe.callApi({}).then(s=>{var t,A;s!=null&&s.success&&(k.value=(t=s==null?void 0:s.data)==null?void 0:t.courses,te.callApi({program_id:(A=O.params)==null?void 0:A.programId}).then(l=>{var c,r,g,x,S,w,L,R,M,z,m,u,p,f,I,G,J,K,Q,W,X,Y,Z;if(l!=null&&l.success){h.value=(c=l==null?void 0:l.data)==null?void 0:c.program,d.value={...d.value,titleEn:{...d.value.titleEn,variable:((g=(r=h.value)==null?void 0:r.title)==null?void 0:g.en)||""},titleAr:{...d.value.titleAr,variable:((S=(x=h.value)==null?void 0:x.title)==null?void 0:S.ar)||""},descriptionEn:{...d.value.descriptionEn,variable:((L=(w=h.value)==null?void 0:w.description)==null?void 0:L.en)||""},descriptionAr:{...d.value.descriptionAr,variable:((M=(R=h.value)==null?void 0:R.description)==null?void 0:M.ar)||""},image:{...d.value.image,variable:((z=h.value)==null?void 0:z.image)||""},minAge:{...d.value.minAge,variable:((m=h.value)==null?void 0:m.min_age)||""},maxAge:{...d.value.maxAge,variable:((u=h.value)==null?void 0:u.max_age)||""}},U.value=[];for(let E=0;E<((f=(p=h.value)==null?void 0:p.road_map)==null?void 0:f.length);E++)U.value.push({course:k.value.find(i=>{var _,b;return(i==null?void 0:i.id)==((b=(_=h.value)==null?void 0:_.road_map[E])==null?void 0:b.id)})});y.value=[];for(let E=0;E<((G=(I=h.value)==null?void 0:I.tracks)==null?void 0:G.length);E++){let i=(J=h.value)==null?void 0:J.tracks[E];for(let _=0;_<((K=i==null?void 0:i.levels)==null?void 0:K.length);_++)for(let b=0;b<((W=(Q=i==null?void 0:i.levels[_])==null?void 0:Q.courses)==null?void 0:W.length);b++)i.levels[_].courses[b]=(X=k.value)==null?void 0:X.find(q=>(q==null?void 0:q.id)==i.levels[_].courses[b]);for(let _=0;_<((Y=i==null?void 0:i.courses)==null?void 0:Y.length);_++)i.courses[_]=(Z=k.value)==null?void 0:Z.find(b=>(b==null?void 0:b.id)==(i==null?void 0:i.courses[_]));y.value.push(i)}}}))});function se(){U.value.push({course:null})}function ie(){var s;y.value.push({title:{en:"New Track",ar:"مسار جديد"},description:{en:"",ar:""},female_image:"",male_image:"",image:"",video:"",levels:[],courses:[]}),a.value=y.value[((s=y.value)==null?void 0:s.length)-1]}function ne(){var s;(s=a.value)==null||s.levels.push({title:{en:"",ar:""},courses:[]})}function ue(s){var t,A;(A=(t=a.value)==null?void 0:t.levels[s])==null||A.courses.push({course:null})}function de(s){U.value.splice(s,1)}function re(){var l,c,r,g,x,S,w,L,R,M,z;let s=[];for(let m=0;m<U.value.length;m++)s.push({id:(c=(l=U.value[m])==null?void 0:l.course)==null?void 0:c.id});let t=[];for(let m=0;m<((r=y.value)==null?void 0:r.length);m++){let u=y.value[m];for(let p=0;p<((g=u==null?void 0:u.levels)==null?void 0:g.length);p++)for(let f=0;f<((S=(x=u==null?void 0:u.levels[p])==null?void 0:x.courses)==null?void 0:S.length);f++)u.levels[p].courses[f]=(w=k.value)==null?void 0:w.find(I=>(I==null?void 0:I.id)==u.levels[p].courses[f]);for(let p=0;p<((L=u==null?void 0:u.courses)==null?void 0:L.length);p++)u.courses[p]=(M=(R=k.value)==null?void 0:R.find(f=>(f==null?void 0:f.id)==(u==null?void 0:u.courses[p])))==null?void 0:M.id;t.push(u)}console.log(t);const A={program_id:(z=O.params)==null?void 0:z.programId,update:{title:{en:d.value.titleEn.variable,ar:d.value.titleAr.variable},description:{en:d.value.descriptionEn.variable,ar:d.value.descriptionAr.variable},min_age:d.value.minAge.variable,max_age:d.value.maxAge.variable,image:d.value.image.variable,road_map:s,tracks:t}};new P("update_program").callApi(A).then(m=>{m!=null&&m.success&&ae.push("/manageCourses")})}return(s,t)=>{var A;return V(),C($,null,[o(pe),e("div",ke,[(V(!0),C($,null,D(n(d),l=>(V(),C("div",ye,[e("h3",null,_e(l.label),1),(V(),he(ge(l.component),{type:l.inputType,modelValue:l.variable,"onUpdate:modelValue":c=>l.variable=c},null,8,["type","modelValue","onUpdate:modelValue"]))]))),256)),o(n(Ue),{activeIndex:0},{default:H(()=>[o(n(Ae),{pt:{headerAction:{style:"padding-inline:0"}}},{header:H(()=>[Te]),default:H(()=>[e("div",null,[(V(!0),C($,null,D(U.value,(l,c)=>(V(),C("div",xe,[e("div",Ee,[o(n(j),{modelValue:U.value[c].course,"onUpdate:modelValue":r=>U.value[c].course=r,options:k.value,optionLabel:"title.en",placeholder:"Select a Course"},null,8,["modelValue","onUpdate:modelValue","options"]),e("i",{class:"pi pi-times-circle",onClick:()=>{de(c)}},null,8,Ie)])]))),256)),e("div",{class:"btn-container"},[e("i",{onClick:se,class:"pi pi-plus-circle",label:"Add Course to Road Map",style:{"font-size":"1.5rem",color:"var(--accent1)"}})])])]),_:1})]),_:1}),e("div",Se,[we,e("div",Le,[Re,o(n(j),{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=l=>a.value=l),options:y.value,optionLabel:"title.en",placeholder:"Select a track"},null,8,["modelValue","options"])]),a.value?(V(),C("div",Me,[e("div",ze,[Ne,o(n(T),{modelValue:a.value.title.en,"onUpdate:modelValue":t[1]||(t[1]=l=>a.value.title.en=l)},null,8,["modelValue"])]),e("div",$e,[Be,o(n(T),{modelValue:a.value.title.ar,"onUpdate:modelValue":t[2]||(t[2]=l=>a.value.title.ar=l)},null,8,["modelValue"])]),e("div",De,[Fe,o(n(le),{modelValue:a.value.description.en,"onUpdate:modelValue":t[3]||(t[3]=l=>a.value.description.en=l)},null,8,["modelValue"])]),e("div",qe,[Pe,o(n(le),{modelValue:a.value.description.ar,"onUpdate:modelValue":t[4]||(t[4]=l=>a.value.description.ar=l)},null,8,["modelValue"])]),e("div",He,[e("div",je,[Oe,o(n(T),{modelValue:a.value.female_image,"onUpdate:modelValue":t[5]||(t[5]=l=>a.value.female_image=l)},null,8,["modelValue"]),e("img",{src:a.value.female_image,alt:""},null,8,Ge)]),e("div",Je,[Ke,o(n(T),{modelValue:a.value.male_image,"onUpdate:modelValue":t[6]||(t[6]=l=>a.value.male_image=l)},null,8,["modelValue"]),e("img",{src:a.value.male_image,alt:""},null,8,Qe)]),e("div",We,[Xe,o(n(T),{modelValue:a.value.image,"onUpdate:modelValue":t[7]||(t[7]=l=>a.value.image=l)},null,8,["modelValue"]),e("img",{src:a.value.image,alt:""},null,8,Ye)]),e("div",Ze,[el,o(n(T),{modelValue:a.value.video,"onUpdate:modelValue":t[8]||(t[8]=l=>a.value.video=l)},null,8,["modelValue"]),a.value.video?(V(),C("iframe",{key:0,style:{"aspect-ratio":"1.75/1"},src:a.value.video,alt:""},null,8,ll)):ee("",!0)])]),al,(V(!0),C($,null,D((A=a.value)==null?void 0:A.levels,(l,c)=>(V(),C("div",tl,[e("div",ol,[e("i",{onClick:()=>{var r,g;(g=(r=a.value)==null?void 0:r.levels)==null||g.splice(c,1)},class:"pi pi-times-circle",label:"Add Course to Road Map",style:{"font-size":"1rem",color:"red"}},null,8,sl)]),e("div",il,[nl,o(n(T),{modelValue:l.title.en,"onUpdate:modelValue":r=>l.title.en=r},null,8,["modelValue","onUpdate:modelValue"])]),e("div",ul,[dl,o(n(T),{modelValue:l.title.ar,"onUpdate:modelValue":r=>l.title.ar=r},null,8,["modelValue","onUpdate:modelValue"])]),(V(!0),C($,null,D(l.courses,(r,g)=>(V(),C("div",rl,[e("div",cl,[o(n(j),{modelValue:l.courses[g],"onUpdate:modelValue":x=>l.courses[g]=x,options:k.value,optionLabel:"title.en",placeholder:"Select a Course"},null,8,["modelValue","onUpdate:modelValue","options"]),e("i",{class:"pi pi-times-circle",onClick:()=>{l.courses.splice(g,1)}},null,8,ml)])]))),256)),e("div",vl,[o(n(F),{onClick:r=>ue(c),icon:"pi pi-plus-circle",label:"Add Level Course",style:{"font-size":"0.75rem"}},null,8,["onClick"])])]))),256)),e("div",pl,[o(n(F),{onClick:ne,icon:"pi pi-plus-circle",label:"Add Level",style:{"font-size":"0.75rem"}})])])):ee("",!0),e("div",_l,[o(n(F),{onClick:ie,icon:"pi pi-plus-circle",label:"Add Track",style:{"font-size":"0.75rem"}})])]),e("div",hl,[o(n(F),{onClick:re,label:"Save Changes"})])]),o(Ve)],64)}}}),Al=Ce(gl,[["__scopeId","data-v-085950f9"]]);export{Al as default};
