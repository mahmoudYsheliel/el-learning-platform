import{_ as F}from"./login-HlRQAw4O.js";import{d as G,u as H,a as P,r as b,H as V,c as C,b as c,e,t as d,f as t,g as T,h as O,i as j,j as z,o as L,N as J,O as K,s as i,k as s,l as Q,m as W,F as X,p as Y,n as Z,q as aa,_ as oa}from"./index-BW8aMn-r.js";import{s as ta}from"./password.esm-BSWtTx7K.js";const ea=I=>(Y("data-v-acd10d5d"),I=I(),Z(),I),na={class:"container"},la=ea(()=>e("div",{class:"left borderRigth"},[e("img",{src:F,alt:""})],-1)),ia={class:"right"},sa={class:"welcome"},ca={class:"google-facebook-wrapper"},da={key:0},ua={key:1},pa={class:"wrapper"},fa={class:"button"},ma={style:{"margin-left":"5rem"}},_a=G({__name:"LoginPage",setup(I){H();const w=j(),U=P(),N=b(),y=b(),x=b(!1),R=b(!1),$=new V("token");function D(){!N.value||!y.value?x.value=!0:$.login(N.value,y.value).then(u=>{u.msg=="no such user"?R.value=!0:u.access_token&&new V("personal_info").callApi().then(a=>{var l,p,q,o,f,m,_,g,h,v,r,k;a!=null&&a.success&&(U.addInfo({userType:(p=(l=a==null?void 0:a.data)==null?void 0:l.info)==null?void 0:p.user_type,notifications:(o=(q=a==null?void 0:a.data)==null?void 0:q.info)==null?void 0:o.notifications,id:(m=(f=a==null?void 0:a.data)==null?void 0:f.info)==null?void 0:m.id,firstName:(g=(_=a==null?void 0:a.data)==null?void 0:_.info)==null?void 0:g.first_name,lastName:(v=(h=a==null?void 0:a.data)==null?void 0:h.info)==null?void 0:v.last_name,email:(k=(r=a==null?void 0:a.data)==null?void 0:r.info)==null?void 0:k.email}),w.push("/"))})})}const E=u=>{const n=aa(u.credential);if(n.email_verified,n.email_verified){const a=new V("token"),l=P();a.login(n.email,"mahmoud2000").then(p=>{p.msg=="no such user"?R.value=!0:p.access_token&&new V("personal_info").callApi().then(o=>{var f,m,_,g,h,v,r,k,S,B,A,M;o!=null&&o.success&&(l.addInfo({userType:(m=(f=o==null?void 0:o.data)==null?void 0:f.info)==null?void 0:m.user_type,notifications:(g=(_=o==null?void 0:o.data)==null?void 0:_.info)==null?void 0:g.notifications,id:(v=(h=o==null?void 0:o.data)==null?void 0:h.info)==null?void 0:v.id,firstName:(k=(r=o==null?void 0:o.data)==null?void 0:r.info)==null?void 0:k.first_name,lastName:(B=(S=o==null?void 0:o.data)==null?void 0:S.info)==null?void 0:B.last_name,email:(M=(A=o==null?void 0:o.data)==null?void 0:A.info)==null?void 0:M.email}),w.push("/"))})})}};return(u,n)=>{const a=z("GoogleLogin");return L(),C("main",null,[c(J),c(K),e("div",na,[la,e("div",ia,[e("div",sa,[e("h1",null,d(t(i)(t(s).welcomeBack)),1),e("h1",null,d(t(i)(t(s).traceCommunity)),1)]),e("div",ca,[c(a,{callback:E})]),x.value?(L(),C("h4",da,d(t(i)(t(s).dataMissing)),1)):T("",!0),R.value?(L(),C("h4",ua,d(t(i)(t(s).userNotExist)),1)):T("",!0),e("div",pa,[c(t(Q),{type:"email",class:"input",modelValue:N.value,"onUpdate:modelValue":n[0]||(n[0]=l=>N.value=l),placeholder:t(i)(t(s).email)},null,8,["modelValue","placeholder"]),c(t(ta),{class:"input",modelValue:y.value,"onUpdate:modelValue":n[1]||(n[1]=l=>y.value=l),feedback:!1,toggleMask:"",placeholder:t(i)(t(s).pass)},null,8,["modelValue","placeholder"])]),e("div",fa,[c(t(W),{onClick:D,label:t(i)(t(s).login)},null,8,["label"])]),e("p",ma,[O(d(t(i)(t(s).noAccount)),1),e("strong",{onClick:n[2]||(n[2]=l=>t(w).push("/signup")),style:{cursor:"pointer"}},d(t(i)(t(s).signup)),1)])])]),c(X)])}}}),ra=oa(_a,[["__scopeId","data-v-acd10d5d"]]);export{ra as default};
