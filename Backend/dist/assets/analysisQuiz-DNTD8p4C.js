import{d as I,c as b,b as k,e as u,t as f,f as i,h as B,g as M,o as g,O as Y,s as m,k as y,l as A,_ as O,r as w,a3 as G,ai as J,x as F,y as L,B as U,H as E,a6 as H,w as K,v as Z,z as ee,A as te}from"./index-C9xH4jq0.js";const ie={class:"container"},ne={key:0},se={class:"button-container"},le=I({__name:"Introduction",props:["title","description","duration","sectionsTitles"],emits:["startQuiz"],setup(s){return(r,p)=>(g(),b("div",ie,[k(Y),u("h1",null,f(i(m)(s.title)),1),u("h3",null,f(i(m)(s.description)),1),u("h3",null,[B(f(i(m)(i(y).durationOfTest))+" ",1),u("strong",null,[B(f(Math.floor(s.duration/60))+":",1),s.duration%60<10?(g(),b("strong",ne,"0")):M("",!0),B(f(s.duration%60)+" "+f(i(m)(i(y).minutes)),1)])]),u("div",se,[k(i(A),{label:i(m)(i(y).startAnalysisQuiz),onClick:p[0]||(p[0]=()=>{r.$emit("startQuiz")})},null,8,["label"])])]))}}),oe=O(le,[["__scopeId","data-v-b0a0139b"]]),ae=["width","height"],ue=I({__name:"Arc",props:{width:{type:Number,default:75},height:{type:Number,default:75},totalTime:{type:Number,default:300},remainingTime:{type:Number,default:280},lineWidth:{type:Number,default:5},strokeStyle:{type:String,default:"#01abff"},backgroundColor:{type:String,default:"#fff"},textColor:{type:String,default:"#01abff"},fontSize:{type:Number,default:20}},setup(s){const r=s,p=w(null),e=()=>{const a=p.value;if(!a)return;const o=a.getContext("2d"),l=a.width/2,n=a.height/2,x=Math.min(l,n)-r.lineWidth,v=-Math.PI/2,z=v+2*Math.PI*(r.remainingTime/r.totalTime);o.clearRect(0,0,a.width,a.height),o.fillStyle=r.backgroundColor,o.fillRect(0,0,a.width,a.height),o.beginPath(),o.arc(l,n,x,v,z,!1),o.lineWidth=r.lineWidth,o.strokeStyle=r.strokeStyle,o.stroke(),o.fillStyle=r.textColor,o.font=`${r.fontSize}px Arial`,o.textAlign="center",o.textBaseline="middle";let $=Math.floor(r.remainingTime/60).toString();$+=":",r.remainingTime%60<10&&($+="0"),$+=(r.remainingTime%60).toString(),o.fillText($,l,n)};return G(e),J(e),(a,o)=>(g(),b("div",null,[u("canvas",{ref_key:"canvas",ref:p,width:s.width,height:s.height},null,8,ae)]))}}),re=O(ue,[["__scopeId","data-v-5c599efc"]]),de={class:"container"},ce={style:{display:"flex","justify-content":"space-between"}},ve={class:"question-container"},me={class:"question"},fe=["src"],_e={class:"question-text"},he=["src"],ge={class:"choices-wrapper"},pe=["onClick"],be=["src"],ye={class:"button-container"},qe=I({__name:"Section",props:["showPrevious","showNext","question","answers","selectedQuestionOrder","sectionName","audio_link","leftTime","duration"],emits:["previous","next","answer"],setup(s){function r(){window.scrollTo(0,0)}return w("en"),(p,e)=>{var a,o,l;return g(),b("div",de,[u("div",ce,[u("h1",null,f(i(m)(i(y).question))+" "+f(s.selectedQuestionOrder+1),1),k(re,{remainingTime:s.leftTime,totalTime:s.duration},null,8,["remainingTime","totalTime"])]),u("div",ve,[u("div",me,[s.audio_link?(g(),b("iframe",{key:0,src:s.audio_link,frameborder:"0",allowtransparency:"true",sandbox:"allow-scripts allow-same-origin"},null,8,fe)):M("",!0),u("h4",_e,[B(f(i(m)((a=s.question)==null?void 0:a.question))+" ",1),u("img",{src:(o=s.question)==null?void 0:o.image,alt:""},null,8,he)]),u("div",ge,[(g(!0),b(F,null,L((l=s.question)==null?void 0:l.choices,n=>{var x;return g(),b("p",{class:U(["choice-text",{selectedChoice:(x=s.answers)==null?void 0:x.some(v=>{var z;return(v==null?void 0:v.section_name)==s.sectionName&&(v==null?void 0:v.question_id)==((z=s.question)==null?void 0:z.id)&&(v==null?void 0:v.choice_id)==(n==null?void 0:n.id)})}]),key:n,onClick:()=>{var v;p.$emit("answer",{section_name:s.sectionName,question_id:(v=s.question)==null?void 0:v.id,choice_id:n==null?void 0:n.id})}},[u("span",null,f(i(m)(n==null?void 0:n.choice)),1),u("img",{src:n==null?void 0:n.image,alt:""},null,8,be)],10,pe)}),128))])])]),u("div",ye,[k(i(A),{label:i(m)(i(y).prev),onClick:e[0]||(e[0]=()=>{r(),p.$emit("previous")}),disabled:!s.showPrevious},null,8,["label","disabled"]),k(i(A),{label:i(m)(i(y).next),onClick:e[1]||(e[1]=()=>{r(),p.$emit("next")}),disabled:!s.showNext},null,8,["label","disabled"])])])}}}),ke=O(qe,[["__scopeId","data-v-e26a6b8a"]]),we={class:"container"},xe={class:"sidebar"},ze=["onClick"],$e=I({__name:"AnalysisQuizSidebar",props:["questions","selectedQuestion","answers"],emits:["selectQuestion"],setup(s){return(r,p)=>(g(),b("div",we,[u("h2",null,f(i(m)(i(y).question)),1),u("div",xe,[(g(!0),b(F,null,L(s.questions,(e,a)=>{var o;return g(),b("p",{class:U({selected:(e==null?void 0:e.order)==s.selectedQuestion,answered:(o=s.answers)==null?void 0:o.some(l=>{var n;return(l==null?void 0:l.question_id)==((n=e==null?void 0:e.question)==null?void 0:n.id)&&(l==null?void 0:l.section_name)==(e==null?void 0:e.section_name)&&(l==null?void 0:l.choice_id)!=-1})}),onClick:l=>r.$emit("selectQuestion",e==null?void 0:e.order)},f(i(m)(i(y).question))+" "+f(a+1),11,ze)}),256))])]))}}),Qe=O($e,[["__scopeId","data-v-9a4b122d"]]),Te={class:"wrapper"},Ne={style:{display:"flex","flex-direction":"column","align-items":"center",gap:"2rem","padding-inline":"5rem","padding-top":"2rem"}},Ce={key:1,class:"section-wrapper"},Se={class:"section"},Ae={class:"button-container"},Ie=I({__name:"analysisQuiz",setup(s){const r=ee(),p=new E("get_analysis_quiz"),e=w({title:null,description:null,duration:null,questions:[]}),a=w(),o=w(0),l=w([]),n=w(0),x=w(!1);let v;const z=w(!1);p.callApi({analysis_quiz_id:r.params.quizId}).then(_=>{var d,c,Q,T,N,C,S,q,R,W,j,D,V;if(_.msg=="Quiz Taken Before"){H.push("/childNotifications");return}a.value=(d=_==null?void 0:_.data)==null?void 0:d.analysis_quiz,o.value=(c=a.value)==null?void 0:c.duration,e.value.description=(Q=a.value)==null?void 0:Q.description,e.value.title=(T=a.value)==null?void 0:T.title,e.value.duration=(N=a.value)==null?void 0:N.duration;for(let t of(S=(C=a.value)==null?void 0:C.iq)==null?void 0:S.iq_sections)for(let h of t.questions)e.value.questions.push({question:h,section_name:t==null?void 0:t.name,order:e.value.questions.length,audio_link:t==null?void 0:t.audio_link}),l.value.push({section_name:t==null?void 0:t.name,question_id:h==null?void 0:h.id,choice_id:-1});for(let t of(R=(q=a.value)==null?void 0:q.enneagram)==null?void 0:R.personalities)for(let h of t.questions)e.value.questions.push({question:h,section_name:t==null?void 0:t.name,order:e.value.questions.length,audio_link:t==null?void 0:t.audio_link}),l.value.push({section_name:t.name,question_id:h.id,choice_id:-1});for(let t of(j=(W=a.value)==null?void 0:W.learning_styles)==null?void 0:j.learning_style_features)for(let h of t.questions)e.value.questions.push({question:h,section_name:t==null?void 0:t.name,order:e.value.questions.length,audio_link:t==null?void 0:t.audio_link}),l.value.push({section_name:t.name,question_id:h.id,choice_id:-1});for(let t of(V=(D=a.value)==null?void 0:D.big5traits)==null?void 0:V.traits)for(let h of t.questions)e.value.questions.push({question:h,section_name:t==null?void 0:t.name,order:e.value.questions.length,audio_link:t==null?void 0:t.audio_link}),l.value.push({section_name:t.name,question_id:h.id,choice_id:-1})});function $(){z.value=!0,v=setInterval(()=>{o.value--,o.value==0&&P()},1e3)}function X(_){let d=l.value.find(c=>(c==null?void 0:c.question_id)==_.question_id&&(c==null?void 0:c.section_name)==_.section_name);d.choice_id=_==null?void 0:_.choice_id}function P(){clearInterval(v);const _=new E("add_analysis_quiz_answer");let d={answers:{quiz_id:r.params.quizId,answers:l.value}};console.log(d),_.callApi(d).then(c=>{console.log(c==null?void 0:c.data),c!=null&&c.success&&(x.value=!0)})}return(_,d)=>{var c,Q,T,N,C,S;return g(),b("div",Te,[k(i(te),{style:{"max-width":"80%"},visible:x.value,"onUpdate:visible":d[1]||(d[1]=q=>x.value=q),modal:"",pt:{mask:{style:"backdrop-filter: blur(2px)"},header:{style:"display:none"},content:{style:"margin-block:auto; display: flex; flex-direction: column; align-items: center; justify-content: center;"}}},{default:K(()=>[u("div",Ne,[u("h3",null,f(i(m)(i(y).wellDone)),1),u("h3",null,f(i(m)(i(y).logWithParent)),1),k(i(A),{label:i(m)(i(y).returnHome),onClick:d[0]||(d[0]=q=>i(H).push("/childNotifications"))},null,8,["label"])])]),_:1},8,["visible","pt"]),z.value?M("",!0):(g(),Z(oe,{key:0,title:(c=e.value)==null?void 0:c.title,description:(Q=e.value)==null?void 0:Q.description,duration:(T=e.value)==null?void 0:T.duration,onStartQuiz:$},null,8,["title","description","duration"])),z.value?(g(),b("div",Ce,[k(Qe,{answers:l.value,questions:e.value.questions,"selected-question":n.value,onSelectQuestion:d[2]||(d[2]=q=>{n.value=q})},null,8,["answers","questions","selected-question"]),u("div",Se,[k(ke,{"show-next":e.value.questions.length!=n.value+1,"show-previous":n.value!=0,question:(N=e.value.questions[n.value])==null?void 0:N.question,sectionName:(C=e.value.questions[n.value])==null?void 0:C.section_name,selectedQuestionOrder:n.value,answers:l.value,audio_link:(S=e.value.questions[n.value])==null?void 0:S.audio_link,leftTime:o.value,duration:e.value.duration,onNext:d[3]||(d[3]=q=>n.value++),onPrevious:d[4]||(d[4]=q=>n.value--),onAnswer:d[5]||(d[5]=q=>{X(q)})},null,8,["show-next","show-previous","question","sectionName","selectedQuestionOrder","answers","audio_link","leftTime","duration"]),u("div",Ae,[k(i(A),{onClick:P,label:i(m)(i(y).finishQuiz)},null,8,["label"])])])])):M("",!0)])}}}),Be=O(Ie,[["__scopeId","data-v-0295b56b"]]);export{Be as default};
