import{_ as K}from"./login-HlRQAw4O.js";import{d as Q,a as T,r as m,H as C,c as F,b as d,e as a,t as c,f as l,g as X,z as S,A as z,h as Y,i as ee,w as le,s as o,k as t,j as b,o as B,N as ae,l as G,m as oe,F as te,n as ne,_ as se}from"./index-Bj9u1wIK.js";import{s as H}from"./index-CY4tZMIO.js";import{s as ie}from"./index-Bjpt1L_V.js";const ue={class:"container"},de={class:"right"},re={class:"welcome"},me={class:"google-facebook-wrapper"},ce={key:0},pe={class:"wrapper"},ve={class:"gender"},fe={class:"gender",style:{width:"60%"}},ge={class:"button"},he=Q({__name:"signupPage",setup(_e){const w=ee();le(),T();const f=m(),g=m(),y=m(),p=m("Child"),k=m(),h=m(""),_=m(),i=m(""),R=new C("signup");function O(){if(!f.value||!g.value||!y.value||!k.value||!h.value||!_.value)i.value=o(t.dataMissing)??"";else if(g.value!=y.value)i.value=o(t.diffPass)??"";else if(!W(g.value))i.value=o(t.weakPass)??"";else if(!Z(f.value))i.value=o(t.notValidEmail)??"";else if(p.value!="Child"&&p.value!="Parent")i.value=o(t.noRoleSelected)??"";else if(!h.value.startsWith("01")||h.value.length!=11)i.value=o(t.phoneNumberError)??"";else{let u={user:{email:f.value,hashed_pass:g.value,user_type:p.value,birth_day:k.value,phone_number:h.value,gender:_.value}};R.callApi(u).then(e=>{if(e.msg=="email is already used once")i.value=o(t.emailTaken)??"";else if((e==null?void 0:e.success)==!0){const r=new TextEncoder().encode(f.value),v=String.fromCharCode(...r);w.push(`/verifyEmail/${btoa(v)}`)}})}}const j=u=>{if(console.log(p.value),p.value!="Child"&&p.value!="Parent"){i.value=o(t.noRoleSelected)??"";return}const e=ne(u.credential);if(e.email_verified){let V={user:{email:e.email,hashed_pass:"mahmoud2000",user_type:p.value,is_verefied:e.email_verified,first_name:e.given_name,last_name:e.family_name,image:e.picture}};R.callApi(V).then(r=>{if(r.msg=="email is already used once")i.value=o(t.emailTaken)??"";else if((r==null?void 0:r.success)==!0){const v=new C("token"),s=T();v.login(e.email,"mahmoud2000").then(J=>{J.access_token&&new C("personal_info").callApi().then(n=>{var P,$,x,A,N,M,D,E,I,U,q,L;n!=null&&n.success&&(s.addInfo({userType:($=(P=n==null?void 0:n.data)==null?void 0:P.info)==null?void 0:$.user_type,notifications:[],id:(A=(x=n==null?void 0:n.data)==null?void 0:x.info)==null?void 0:A.id,firstName:(M=(N=n==null?void 0:n.data)==null?void 0:N.info)==null?void 0:M.first_name,lastName:(E=(D=n==null?void 0:n.data)==null?void 0:D.info)==null?void 0:E.last_name,email:(U=(I=n==null?void 0:n.data)==null?void 0:I.info)==null?void 0:U.email,gender:(L=(q=n==null?void 0:n.data)==null?void 0:q.info)==null?void 0:L.gender}),w.push("/"))})})}})}};function W(u){const e=/[A-Z]/.test(u),V=/[a-z]/.test(u),r=/\d/.test(u),v=u.length>=8;return e&&V&&r&&v}function Z(u){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)}return(u,e)=>{const V=b("Options"),r=b("GoogleLogin"),v=b("Divider");return B(),F("main",null,[d(ae),d(V),a("div",ue,[e[12]||(e[12]=a("div",{class:"left borderRigth"},[a("img",{src:K,alt:""})],-1)),a("div",de,[a("div",re,[a("h1",null,c(l(o)(l(t).welcome)),1),a("h1",null,c(l(o)(l(t).traceCommunity)),1)]),a("div",me,[d(r,{callback:j,scope:"profile email https://www.googleapis.com/auth/userinfo.profile"})]),i.value?(B(),F("h4",ce,c(i.value),1)):X("",!0),a("div",pe,[d(l(G),{style:{width:"100%"},type:"email",class:"input",modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),placeholder:l(o)(l(t).email)},null,8,["modelValue","placeholder"]),d(l(H),{toggleMask:"",modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=s=>g.value=s),placeholder:l(o)(l(t).pass),onChange:e[2]||(e[2]=s=>i.value="")},{header:S(()=>e[10]||(e[10]=[a("h6",null,"Pick a password",-1)])),footer:S(()=>[d(v),e[11]||(e[11]=a("ul",{class:"pl-2 ml-2 mt-0",style:{"line-height":"1.5"}},[a("li",null,"At least one lowercase"),a("li",null,"At least one uppercase"),a("li",null,"At least one numeric"),a("li",null,"Minimum 8 characters")],-1))]),_:1},8,["modelValue","placeholder"]),d(l(H),{class:"input",modelValue:y.value,"onUpdate:modelValue":e[3]||(e[3]=s=>y.value=s),feedback:!1,toggleMask:"",placeholder:l(o)(l(t).confirmPass),onChange:e[4]||(e[4]=s=>i.value="")},null,8,["modelValue","placeholder"]),d(l(ie),{style:{width:"100%"},modelValue:k.value,"onUpdate:modelValue":e[5]||(e[5]=s=>k.value=s),placeholder:l(o)(l(t).birthDate)},null,8,["modelValue","placeholder"]),d(l(G),{style:{width:"100%"},type:"email",class:"input",modelValue:h.value,"onUpdate:modelValue":e[6]||(e[6]=s=>h.value=s),placeholder:l(o)(l(t).phone)},null,8,["modelValue","placeholder"]),a("div",ve,[a("h3",null,c(l(o)(l(t).gender))+":",1),a("div",fe,[a("span",{class:z([{role2_selected:_.value=="Male"},"role2"]),onClick:e[7]||(e[7]=s=>_.value="Male")},c(l(o)(l(t).male)),3),a("span",{class:z([{role2_selected:_.value=="Female"},"role2"]),onClick:e[8]||(e[8]=s=>_.value="Female")},c(l(o)(l(t).female)),3)])])]),a("div",ge,[d(l(oe),{onClick:O,label:l(o)(l(t).signup)},null,8,["label"])]),a("p",null,[Y(c(l(o)(l(t).haveAccount))+" ",1),a("strong",{onClick:e[9]||(e[9]=s=>l(w).push("/login")),style:{cursor:"pointer","text-decoration":"underline",color:"var(--accent1)"}},c(l(o)(l(t).login)),1)])])]),d(te)])}}}),be=se(he,[["__scopeId","data-v-a0296173"]]);export{be as default};
