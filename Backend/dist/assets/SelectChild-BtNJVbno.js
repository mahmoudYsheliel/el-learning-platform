import{d as H,r as T,H as C,c as w,e as p,b as x,f as _,t as R,g as L,i as j,I as E,a as M,o as q,s as y,k as B,m as O,_ as P}from"./index-NOGPH1X2.js";import{s as U}from"./dropdown.esm-CMyEphYw.js";const z={class:"container"},F={key:0,class:"selectedChildInfo"},G={class:"info"},J={class:"childImage"},K=["src"],Q={key:1,class:"pi pi-user"},W={class:"childInfo"},X={style:{color:"var(--accent1)",margin:"0","line-height":"2rem","padding-top":"0.5rem"}},Y={style:{color:"var(--text)",margin:"0","line-height":"0.75rem"}},Z=H({__name:"SelectChild",emits:["selectedChild"],setup(tt){const V=T([]),i=T(null);new C("get_all_program").callApi().then(s=>{var o;const a=(o=s==null?void 0:s.data)==null?void 0:o.program;new C("personal_info").callApi().then(e=>{var u,h,t,d;if((h=(u=e==null?void 0:e.data)==null?void 0:u.info)!=null&&h.children)for(let c of(d=(t=e==null?void 0:e.data)==null?void 0:t.info)==null?void 0:d.children)new C("personal_another_user_info").callApi({another_userId:c}).then(l=>{var m,g,v,r;if((m=l==null?void 0:l.data)!=null&&m.info){let n=(g=l==null?void 0:l.data)==null?void 0:g.info;n.id=c,n.child_group_image=(v=a.find(f=>f.id==n.child_group))==null?void 0:v.image,n.child_group=(r=a.find(f=>f.id==n.child_group))==null?void 0:r.title,V.value.push(n)}})})});const $=j();function D(s){const a=E();new C("switch_to_child").callApi({child_id:s}).then(o=>{var e;if(o!=null&&o.success){a.logout(),a.addToken((e=o==null?void 0:o.data)==null?void 0:e.access_token);const u=new C("personal_info"),h=M();u.callApi().then(t=>{var d,c,I,l,m,g,v,r,n,f,b,A,N,S;t!=null&&t.success&&(h.addInfo({userType:(c=(d=t==null?void 0:t.data)==null?void 0:d.info)==null?void 0:c.user_type,notifications:(l=(I=t==null?void 0:t.data)==null?void 0:I.info)==null?void 0:l.notifications,id:(g=(m=t==null?void 0:t.data)==null?void 0:m.info)==null?void 0:g.id,firstName:(r=(v=t==null?void 0:t.data)==null?void 0:v.info)==null?void 0:r.first_name,lastName:(f=(n=t==null?void 0:t.data)==null?void 0:n.info)==null?void 0:f.last_name,email:(A=(b=t==null?void 0:t.data)==null?void 0:b.info)==null?void 0:A.email,gender:(S=(N=t==null?void 0:t.data)==null?void 0:N.info)==null?void 0:S.gender}),$.push("/"))})}})}return(s,a)=>{var k,o,e,u,h,t;return q(),w("main",null,[p("div",z,[x(_(U),{onChange:a[0]||(a[0]=d=>{var c;return s.$emit("selectedChild",(c=i.value)==null?void 0:c.id)}),modelValue:i.value,"onUpdate:modelValue":a[1]||(a[1]=d=>i.value=d),options:V.value,optionLabel:"email",placeholder:_(y)(_(B).selectChild),class:"dropDown"},null,8,["modelValue","options","placeholder"]),i.value?(q(),w("div",F,[p("div",G,[p("div",J,[((k=i.value)==null?void 0:k.image)!=""?(q(),w("img",{key:0,src:(o=i.value)==null?void 0:o.image,alt:""},null,8,K)):(q(),w("i",Q))]),p("div",W,[p("h2",X,R((e=i.value)==null?void 0:e.first_name)+" "+R((u=i.value)==null?void 0:u.last_name),1),p("p",Y,R((h=i.value)==null?void 0:h.email),1),p("h3",null,R(_(y)((t=i.value)==null?void 0:t.child_group)),1)])]),x(_(O),{label:_(y)(_(B).switchToChild),onClick:a[2]||(a[2]=()=>{D(i.value.id)})},null,8,["label"])])):L("",!0)])])}}}),it=P(Z,[["__scopeId","data-v-2f603e6c"]]);export{it as S};
