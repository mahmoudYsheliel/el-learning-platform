import{P as W}from"./ParentSidebar-BSjmbxcs.js";import{d as O,r as E,V as G,c as g,e,b as $,w as x,f as s,h as m,t as o,x as N,H as Y,o as _,y as F,v as J,s as h,k as w,g as B,_ as b,N as Z,F as j}from"./index-DqSUOfsg.js";import{S as ee}from"./SelectChild-CiKLCvVA.js";import{a as H,s as Q}from"./accordiontab.esm-CugVyEg5.js";import"./dropdown.esm-Cq4ncBee.js";import"./index.esm-CIH6PP-c.js";import"./index.esm-B3iWXqjk.js";const te={class:"header"},se={style:{color:"var(--accent2)"}},le={class:"content"},oe={class:"chapters"},re={class:"header"},ne={style:{color:"var(--accent1)"}},ce={style:{color:"var(--accent2)"}},ae={class:"material-content"},de={class:"material"},ie={key:0,class:"lesson"},ue={style:{color:"var(--text)"}},he={key:0,class:"completed",style:{color:"var(--accent2)"}},_e={style:{color:"var(--text)"}},pe={key:1,class:"quiz"},ve={class:"quiz-header"},fe={style:{color:"var(--text)"}},ge={style:{color:"var(--text)"}},ye={style:{color:"var(--text)"}},Ce={class:"quiz-content"},Ie={class:"row names"},we={style:{color:"var(--text)"}},$e={style:{color:"var(--text)"}},ke={style:{color:"var(--text)"}},Re={style:{color:"var(--text)"}},Se={class:"row"},qe=O({__name:"ChildProgress",props:["selectedChildId"],setup(z){const a=z,p=E([]),y=E(),A=G(()=>{y.value=[],p.value=[];let d=[];const v=new Y("get_child_enrollments");if(a.selectedChildId)return v.callApi({child_id:a.selectedChildId}).then(r=>{if(r.data.enrollments){d=r.data.enrollments,y.value=d;for(let l of d){let t=l==null?void 0:l.course_id;new Y("get_course").callApi({course_id:t}).then(i=>{var c,k,M,f,P,L,X;if(i.success){let T={courseTitle:(k=(c=i==null?void 0:i.data)==null?void 0:c.course)==null?void 0:k.title,chapters:[],percentage:0};for(let R of(M=i==null?void 0:i.data)==null?void 0:M.course.chapters){let q={title:R==null?void 0:R.title,material:[],progress:0};for(let u of R==null?void 0:R.materials){let S={title:u==null?void 0:u.title,progress:[],type:u==null?void 0:u.type};if(u.type=="Lesson"){if((f=l==null?void 0:l.progress)!=null&&f.lessons_completed)for(let I of(P=l==null?void 0:l.progress)==null?void 0:P.lessons_completed)(I==null?void 0:I.lesson_id)==u.Id&&S.progress.push(I)}else if(u.type=="Quiz"&&(L=l==null?void 0:l.progress)!=null&&L.quizes_completed)for(let I of(X=l==null?void 0:l.progress)==null?void 0:X.quizes_completed)(I==null?void 0:I.quiz_id)==u.Id&&S.progress.push(I);q.material.push(S)}let V=q.material.reduce((u,S)=>{var I;return(I=S==null?void 0:S.progress)!=null&&I.length?u+1:u},0),D=q.material.length;q.progress=Math.floor(100*V/D),T.chapters.push(q)}let K=T.chapters.reduce((R,q)=>{const V=q.material.reduce((D,u)=>{var S;return(S=u==null?void 0:u.progress)!=null&&S.length?D+1:D},0);return R+V},0),U=T.chapters.reduce((R,q)=>{var D;const V=(D=q.material)==null?void 0:D.length;return R+V},0);T.percentage=Math.floor(K*100/U),p.value.push(T)}})}}}),null});function n(d){const v=new Date(d),r=v.getFullYear(),l=(v.getMonth()+1).toString().padStart(2,"0"),t=v.getDate().toString().padStart(2,"0");return`${r}-${l}-${t}`}return(d,v)=>(_(),g(N,null,[e("main",null,[$(s(H),null,{default:x(()=>[(_(!0),g(N,null,F(p.value,r=>(_(),J(s(Q),{key:r.courseTitle},{header:x(()=>[e("div",te,[e("h2",null,o(s(h)(r.courseTitle)),1),e("h2",se,o(s(h)(s(w).completed))+" "+o(r.percentage)+" % ",1)])]),default:x(()=>[e("div",le,[e("div",oe,[$(s(H),null,{default:x(()=>[(_(!0),g(N,null,F(r.chapters,l=>(_(),J(s(Q),{key:l.title},{header:x(()=>[e("div",re,[e("h3",ne,o(s(h)(l.title)),1),e("h3",ce,o(s(h)(s(w).completed))+" "+o(l.progress)+" % ",1)])]),default:x(()=>[e("div",ae,[(_(!0),g(N,null,F(l.material,t=>{var C,i;return _(),g("div",de,[(t==null?void 0:t.type)=="Lesson"?(_(),g("div",ie,[e("h4",ue,o(s(h)(t.title)),1),(C=t==null?void 0:t.progress[0])!=null&&C.completed_at?(_(),g("div",he,[e("span",_e,o(s(h)(s(w).completedAt)),1),m(" "+o(n((i=t==null?void 0:t.progress[0])==null?void 0:i.completed_at)),1)])):B("",!0)])):B("",!0),t.type=="Quiz"?(_(),g("div",pe,[$(s(H),null,{default:x(()=>[$(s(Q),null,{header:x(()=>{var c,k;return[e("div",ve,[e("h4",fe,o(s(h)(t==null?void 0:t.title)),1),e("h4",null,[e("span",ge,o(s(h)(s(w).heighest)),1),m(" "+o((c=t==null?void 0:t.progress)==null?void 0:c.reduce((M,f)=>(f==null?void 0:f.score_prcentage)>M?f==null?void 0:f.score_prcentage:M,0))+" % ",1)]),e("h4",null,[e("span",ye,o(s(h)(s(w).nomOfAtts)),1),m(" "+o((k=t==null?void 0:t.progress)==null?void 0:k.length),1)])])]}),default:x(()=>[e("div",Ce,[e("div",Ie,[e("h5",we,o(s(h)(s(w).att)),1),e("h5",$e,o(s(h)(s(w).score)),1),e("h5",ke,o(s(h)(s(w).timeToAns)),1),e("h5",Re,o(s(h)(s(w).date)),1)]),(_(!0),g(N,null,F(t==null?void 0:t.progress,(c,k)=>(_(),g("div",Se,[e("h5",null,o(k+1),1),e("h5",null,o(c==null?void 0:c.score_prcentage)+"%",1),e("h5",null,o(c==null?void 0:c.time_taken)+" sec",1),e("h5",null,o(n(c==null?void 0:c.created_at)),1)]))),256))])]),_:2},1024)]),_:2},1024)])):B("",!0)])}),256))])]),_:2},1024))),128))]),_:2},1024)])])]),_:2},1024))),128))]),_:1})]),m(" "+o(A.value),1)],64))}}),xe=b(qe,[["__scopeId","data-v-a112d288"]]),Pe={key:0,class:"container"},ze=["width","height"],Ae=O({__name:"PiChart",props:{data:{},width:{},height:{},innerRadiusRatio:{}},setup(z){const a=z,p=E(null),y=G(()=>{var n,d,v;if(p.value){const r=p.value.getContext("2d");r&&A(r,a.data,a.width,a.height,a.innerRadiusRatio)}return Math.floor(((n=a.data[0])==null?void 0:n.value)/(((d=a.data[0])==null?void 0:d.value)+((v=a.data[1])==null?void 0:v.value))*100)});function A(n,d,v,r,l){const t=d.reduce((f,P)=>f+P.value,0);let C=1.5*Math.PI;const i=v/2,c=r/2,k=Math.min(v,r)/2,M=k*l;d.forEach(f=>{const P=f.value/t*2*Math.PI;n.beginPath(),n.arc(i,c,k,C,C+P),n.arc(i,c,M,C+P,C,!0),n.closePath();const L=n.createLinearGradient(150,0,0,150);L.addColorStop(0,f.color1),L.addColorStop(1,f.color2),n.fillStyle=L,n.fill(),C+=P})}return(n,d)=>n.data?(_(),g("div",Pe,[e("canvas",{ref_key:"donutChart",ref:p,width:n.width,height:n.height},null,8,ze),e("h3",null,[e("span",null,o(s(h)(s(w).completed)),1),e("span",null,o(y.value)+"%",1)])])):B("",!0)}}),Me=b(Ae,[["__scopeId","data-v-3ae7506e"]]),De={class:"container",style:{width:"75%","margin-inline":"auto"}},Ne={key:0,class:"progress"},Ee={class:"completed"},Le={class:"in-progress"},Te=O({__name:"CoursesProgress",props:["selectedChildId"],setup(z){const a=z,p=E(),y=E([]),A=G(()=>{let d=[];y.value=[],p.value=null;const v=new Y("get_child_enrollments");if(a.selectedChildId)return v.callApi({child_id:a.selectedChildId}).then(r=>{var l,t;if(r.data.enrollments){d=r.data.enrollments,p.value=d;let C=(l=p.value)==null?void 0:l.filter(i=>i==null?void 0:i.is_completed).length;y.value=[C,((t=p.value)==null?void 0:t.length)-C],n.value=[{value:y.value[0],color1:"#7302ff",color2:"#01abff"},{value:y.value[1],color1:"#aaa",color2:"#aaa"}]}}),null}),n=E();return(d,v)=>{var r,l;return _(),g(N,null,[m(o(A.value)+" ",1),e("main",null,[e("div",De,[z.selectedChildId?(_(),g("div",Ne,[e("div",Ee,[e("p",null,o((r=p.value)==null?void 0:r.length),1),e("p",null,o(s(h)(s(w).coursesEnrolled)),1)]),e("div",Le,[e("p",null,o((l=p.value)==null?void 0:l.filter(t=>t==null?void 0:t.is_completed).length),1),e("p",null,o(s(h)(s(w).coursesCompleted)),1)])])):B("",!0),$(Me,{style:{transform:"translate(0,-1rem)"},data:n.value,width:150,height:150,innerRadiusRatio:.8},null,8,["data"])])])],64)}}}),Ve=b(Te,[["__scopeId","data-v-1499c71e"]]),me={class:"container"},Be={class:"wrapper"},Fe=O({__name:"childrenProgress",setup(z){const a=E(null);return(p,y)=>(_(),g(N,null,[$(Z),e("div",me,[$(W,{class:"sidebar",selected:"childProgress"}),e("div",Be,[$(ee,{onSelectedChild:y[0]||(y[0]=A=>a.value=A)}),$(Ve,{selectedChildId:a.value},null,8,["selectedChildId"]),$(xe,{selectedChildId:a.value},null,8,["selectedChildId"])])]),$(j)],64))}}),Je=b(Fe,[["__scopeId","data-v-21142fc9"]]);export{Je as default};
