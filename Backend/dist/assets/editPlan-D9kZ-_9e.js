import{d as oe,H as j,r as C,b2 as t,c as _,b as r,e as a,w as E,x as w,f as d,C as h,E as ie,i as ue,o as m,N as se,t as re,G as de,a1 as ce,m as I,l as J,F as ve,_ as pe}from"./index-nwSjtyq6.js";import{s as S}from"./index-DgW2-BB2.js";import{s as B,a as me}from"./index-BAb0n8-a.js";import"./index-CBWnccPP.js";const ge={class:"container"},be={class:"element"},fe={class:"row"},_e={class:"element"},he={class:"element"},Ce={class:"row"},Ve={class:"element"},ye={class:"element"},Ae={class:"row"},ke={class:"element"},Ue={class:"btn-container"},xe=oe({__name:"editPlan",setup(Re){const L=ie(),K=ue(),Q=new j("get_plan"),W=new j("get_courses"),X=new j("get_categories"),n=C(),V=C([]),q=C([]),c=C([]),g=C([]),b=C([]);X.callApi().then(i=>{var l;i!=null&&i.success&&(q.value=(l=i==null?void 0:i.data)==null?void 0:l.categories,W.callApi({}).then(o=>{var e,s;o!=null&&o.success&&(V.value=(e=o==null?void 0:o.data)==null?void 0:e.courses,Q.callApi({plan_id:(s=L.params)==null?void 0:s.planId}).then(f=>{var y,A,k,U,u,M,N,O,P,$,z,F,D,H,G,T;if(f!=null&&f.success){n.value=(y=f==null?void 0:f.data)==null?void 0:y.plan,t.value={...t.value,titleEn:{...t.value.titleEn,variable:((k=(A=n.value)==null?void 0:A.title)==null?void 0:k.en)||""},titleAr:{...t.value.titleAr,variable:((u=(U=n.value)==null?void 0:U.title)==null?void 0:u.ar)||""},descriptionEn:{...t.value.descriptionEn,variable:((N=(M=n.value)==null?void 0:M.description)==null?void 0:N.en)||""},descriptionAr:{...t.value.descriptionAr,variable:((P=(O=n.value)==null?void 0:O.description)==null?void 0:P.ar)||""},image:{...t.value.image,variable:(($=n.value)==null?void 0:$.image)||""},minAge:{...t.value.minAge,variable:((z=n.value)==null?void 0:z.min_age)||""},maxAge:{...t.value.maxAge,variable:((F=n.value)==null?void 0:F.max_age)||""},price:{...t.value.price,variable:((D=n.value)==null?void 0:D.price)||""}};for(let p of n==null?void 0:n.value.objectives)g.value.push(p);for(let p of n==null?void 0:n.value.categories)b.value.push((H=q.value)==null?void 0:H.find(v=>(v==null?void 0:v.id)==(p==null?void 0:p.Id)));c.value=[];for(let p=0;p<((T=(G=n.value)==null?void 0:G.courses)==null?void 0:T.length);p++)c.value.push({course:V.value.find(v=>{var x,R;return(v==null?void 0:v.id)==((R=(x=n.value)==null?void 0:x.courses[p])==null?void 0:R.Id)}),restriction:V.value.find(v=>{var x,R;return(v==null?void 0:v.id)==((R=(x=n.value)==null?void 0:x.courses[p])==null?void 0:R.ristriction_on_course)})})}}))}))});function Y(){c.value.push({restriction:null,course:null})}function Z(i){c.value.splice(i,1)}function ee(){b.value.push({Id:null,ristriction_on_course:null})}function le(i){b.value.splice(i,1)}function ae(){g.value.push({en:null,ar:null})}function te(i){g.value.splice(i,1)}function ne(){var e,s,f,y,A,k,U;let i=[];for(let u=0;u<c.value.length;u++)i.push({Id:(s=(e=c.value[u])==null?void 0:e.course)==null?void 0:s.id,ristriction_on_course:(y=(f=c.value[u])==null?void 0:f.restriction)==null?void 0:y.id});let l=[];for(let u=0;u<b.value.length;u++)l.push({Id:(A=b.value[u])==null?void 0:A.id,title:(k=b.value[u])==null?void 0:k.category});const o={plan_id:(U=L.params)==null?void 0:U.planId,update:{name:t.value.titleEn.variable,title:{en:t.value.titleEn.variable,ar:t.value.titleAr.variable},description:{en:t.value.descriptionEn.variable,ar:t.value.descriptionAr.variable},courses:i,categories:l,objectives:g.value,price:t.value.price.variable,min_age:t.value.minAge.variable,max_age:t.value.maxAge.variable,image:t.value.image.variable}};new j("update_plan").callApi(o).then(u=>{u!=null&&u.success&&K.push("/manageCourses")})}return(i,l)=>(m(),_(E,null,[r(se),a("div",ge,[(m(!0),_(E,null,w(d(t),o=>(m(),_("div",be,[a("h3",null,re(o.label),1),(m(),de(ce(o.component),{type:o.inputType,modelValue:o.variable,"onUpdate:modelValue":e=>o.variable=e},null,8,["type","modelValue","onUpdate:modelValue"]))]))),256)),r(d(me),{activeIndex:0},{default:h(()=>[r(d(B),{pt:{headerAction:{style:"padding-inline:0"}}},{header:h(()=>l[0]||(l[0]=[a("h3",null,"Road Map",-1)])),default:h(()=>[(m(!0),_(E,null,w(c.value,(o,e)=>(m(),_("div",fe,[a("div",_e,[l[1]||(l[1]=a("span",null,"Course",-1)),r(d(S),{modelValue:c.value[e].course,"onUpdate:modelValue":s=>c.value[e].course=s,options:V.value,optionLabel:"title.en",placeholder:"Select a Course"},null,8,["modelValue","onUpdate:modelValue","options"])]),a("div",he,[l[2]||(l[2]=a("span",null,"Prequsite",-1)),r(d(S),{modelValue:c.value[e].restriction,"onUpdate:modelValue":s=>c.value[e].restriction=s,options:V.value,optionLabel:"title.en",placeholder:"Select a Course"},null,8,["modelValue","onUpdate:modelValue","options"])]),r(d(I),{onClick:()=>{Z(e)},label:"Remove",style:{"background-color":"red"}},null,8,["onClick"])]))),256)),a("div",{class:"btn-container",style:{"margin-right":"2rem"}},[a("i",{class:"pi pi-plus-circle",onClick:Y,style:{"font-size":"1.5rem",color:"var(--accent1)"}})])]),_:1}),r(d(B),{pt:{headerAction:{style:"padding-inline:0"}}},{header:h(()=>l[3]||(l[3]=[a("h3",null,"Objectives",-1)])),default:h(()=>[(m(!0),_(E,null,w(g.value,(o,e)=>(m(),_("div",Ce,[a("div",Ve,[l[4]||(l[4]=a("span",null,"English",-1)),r(d(J),{modelValue:g.value[e].en,"onUpdate:modelValue":s=>g.value[e].en=s},null,8,["modelValue","onUpdate:modelValue"])]),a("div",ye,[l[5]||(l[5]=a("span",null,"Arabic",-1)),r(d(J),{modelValue:g.value[e].ar,"onUpdate:modelValue":s=>g.value[e].ar=s},null,8,["modelValue","onUpdate:modelValue"])]),r(d(I),{onClick:()=>{te(e)},label:"Remove",style:{"background-color":"red"}},null,8,["onClick"])]))),256)),a("div",{class:"btn-container",style:{"margin-right":"2rem"}},[a("i",{class:"pi pi-plus-circle",onClick:ae,style:{"font-size":"1.5rem",color:"var(--accent1)"}})])]),_:1}),r(d(B),{pt:{headerAction:{style:"padding-inline:0"}}},{header:h(()=>l[6]||(l[6]=[a("h3",null,"Categories",-1)])),default:h(()=>[(m(!0),_(E,null,w(b.value,(o,e)=>(m(),_("div",Ae,[a("div",ke,[l[7]||(l[7]=a("span",null,"Category",-1)),r(d(S),{modelValue:b.value[e],"onUpdate:modelValue":s=>b.value[e]=s,options:q.value,optionLabel:"category.en"},null,8,["modelValue","onUpdate:modelValue","options"])]),r(d(I),{onClick:()=>{le(e)},label:"Remove",style:{"background-color":"red"}},null,8,["onClick"])]))),256)),a("div",{class:"btn-container",style:{"margin-right":"2rem"}},[a("i",{class:"pi pi-plus-circle",onClick:ee,style:{"font-size":"1.5rem",color:"var(--accent1)"}})])]),_:1})]),_:1}),a("div",Ue,[r(d(I),{onClick:ne,label:"Save Changes",style:{"margin-top":"2rem"}})])]),r(ve)],64))}}),qe=pe(xe,[["__scopeId","data-v-57f0993d"]]);export{qe as default};
