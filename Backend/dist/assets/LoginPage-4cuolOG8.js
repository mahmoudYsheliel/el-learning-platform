import{d as O,u as j,a as U,r as R,H as q,c as r,b as d,e as t,t as p,f as n,g as $,h as z,i as J,j as D,o as S,N as K,s,k as c,l as Q,m as W,F as X,p as Y,n as Z,q as oo,_ as ao}from"./index-DeAx0hMz.js";import{s as no}from"./password.esm-CLgaKlLv.js";const to="/images/login.png",eo=b=>(Y("data-v-25e3a7e6"),b=b(),Z(),b),lo={class:"container"},io=eo(()=>t("div",{class:"left borderRigth"},[t("img",{src:to,alt:""})],-1)),so={class:"right"},co={class:"welcome"},uo={class:"google-facebook-wrapper"},po={key:0},fo={key:1},mo={class:"wrapper"},_o={class:"button"},go=O({__name:"LoginPage",setup(b){j();const x=J(),E=U(),w=R(),V=R(),B=R(!1),C=R(!1),F=new q("token");function G(){!w.value||!V.value?B.value=!0:F.login(w.value,V.value).then(l=>{console.log(l),(l==null?void 0:l.msg)=="no such user"?C.value=!0:l!=null&&l.access_token&&new q("personal_info").callApi().then(o=>{var u,i,L,a,f,m,_,g,h,v,k,I,N,y;o!=null&&o.success&&(E.addInfo({userType:(i=(u=o==null?void 0:o.data)==null?void 0:u.info)==null?void 0:i.user_type,notifications:(a=(L=o==null?void 0:o.data)==null?void 0:L.info)==null?void 0:a.notifications,id:(m=(f=o==null?void 0:o.data)==null?void 0:f.info)==null?void 0:m.id,firstName:(g=(_=o==null?void 0:o.data)==null?void 0:_.info)==null?void 0:g.first_name,lastName:(v=(h=o==null?void 0:o.data)==null?void 0:h.info)==null?void 0:v.last_name,email:(I=(k=o==null?void 0:o.data)==null?void 0:k.info)==null?void 0:I.email,gender:(y=(N=o==null?void 0:o.data)==null?void 0:N.info)==null?void 0:y.gender}),x.push("/"))})})}const H=l=>{const e=oo(l.credential);if(e.email_verified,e.email_verified){const o=new q("token"),u=U();o.login(e.email,"mahmoud2000").then(i=>{i.msg=="no such user"?C.value=!0:i.access_token&&new q("personal_info").callApi().then(a=>{var f,m,_,g,h,v,k,I,N,y,A,M,P,T;a!=null&&a.success&&(u.addInfo({userType:(m=(f=a==null?void 0:a.data)==null?void 0:f.info)==null?void 0:m.user_type,notifications:(g=(_=a==null?void 0:a.data)==null?void 0:_.info)==null?void 0:g.notifications,id:(v=(h=a==null?void 0:a.data)==null?void 0:h.info)==null?void 0:v.id,firstName:(I=(k=a==null?void 0:a.data)==null?void 0:k.info)==null?void 0:I.first_name,lastName:(y=(N=a==null?void 0:a.data)==null?void 0:N.info)==null?void 0:y.last_name,email:(M=(A=a==null?void 0:a.data)==null?void 0:A.info)==null?void 0:M.email,gender:(T=(P=a==null?void 0:a.data)==null?void 0:P.info)==null?void 0:T.gender}),x.push("/"))})})}};return(l,e)=>{const o=D("Options"),u=D("GoogleLogin");return S(),r("main",null,[d(K),d(o),t("div",lo,[io,t("div",so,[t("div",co,[t("h1",null,p(n(s)(n(c).welcomeBack)),1),t("h1",null,p(n(s)(n(c).traceCommunity)),1)]),t("div",uo,[d(u,{callback:H})]),B.value?(S(),r("h4",po,p(n(s)(n(c).dataMissing)),1)):$("",!0),C.value?(S(),r("h4",fo,p(n(s)(n(c).userNotExist)),1)):$("",!0),t("div",mo,[d(n(Q),{style:{width:"100%"},type:"email",class:"input",modelValue:w.value,"onUpdate:modelValue":e[0]||(e[0]=i=>w.value=i),placeholder:n(s)(n(c).email)},null,8,["modelValue","placeholder"]),d(n(no),{class:"input",modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=i=>V.value=i),feedback:!1,toggleMask:"",placeholder:n(s)(n(c).pass)},null,8,["modelValue","placeholder"])]),t("div",_o,[d(n(W),{onClick:G,label:n(s)(n(c).login)},null,8,["label"])]),t("p",null,[z(p(n(s)(n(c).noAccount))+" ",1),t("strong",{onClick:e[2]||(e[2]=i=>n(x).push("/signup")),style:{cursor:"pointer","text-decoration":"underline",color:"var(--accent1)"}},p(n(s)(n(c).signup)),1)])])]),d(X)])}}}),ko=ao(go,[["__scopeId","data-v-25e3a7e6"]]);export{ko as default};
