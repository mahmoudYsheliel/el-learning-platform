import{P as T}from"./ParentSidebar-5LEqs2xB.js";import{d as L,r as f,H as v,c as m,b as u,e as a,w as z,f as t,t as l,x as b,y as $,s,o as p,N as M,B as N,l as P,k as o,A as U,F as O,_ as Y}from"./index-CF0mUiIM.js";import{s as q}from"./inputtext.esm-BTpLd0CG.js";const G={class:"container"},J={class:"msg-wrapper"},K={class:"add-comment"},Q={class:"wrapper"},W={class:"requests"},X={class:"table-container"},Z={class:"row head"},R={class:"row"},ee=L({__name:"parentHome",setup(te){const r=f([]),V=new v("get_request_enrollment");async function g(){r.value=[],V.callApi().then(n=>{var i;if(n.success==!0)for(let e of(i=n==null?void 0:n.data)==null?void 0:i.requests)new v("personal_another_user_info").callApi({another_userId:e==null?void 0:e.student_id}).then(d=>{d.success==!0&&new v("get_course").callApi({course_id:e==null?void 0:e.course_id}).then(c=>{var y,S,k,x,A,E,I;c.success==!0&&((I=r.value)==null||I.push({id:e==null?void 0:e.id,childEmail:(S=(y=d==null?void 0:d.data)==null?void 0:y.info)==null?void 0:S.email,courseTitle:s((x=(k=c==null?void 0:c.data)==null?void 0:k.course)==null?void 0:x.title),date:j(e==null?void 0:e.created_at),status:e==null?void 0:e.status,price:(E=(A=c==null?void 0:c.data)==null?void 0:A.course)==null?void 0:E.price,comments:e==null?void 0:e.comments}),_.value="",r.value.sort((F,H)=>F.id.localeCompare(H.id)))})})})}g();function j(n){const i=new Date(n),e=i.getFullYear(),h=(i.getMonth()+1).toString().padStart(2,"0"),d=i.getDate().toString().padStart(2,"0");return`${e}-${h}-${d}`}const w=f(!1),C=f(-1),_=f("");function B(){let n={enrollment_request_id:r.value[C.value].id,msg:{msg:_.value}};new v("add_comment").callApi(n).then(e=>{e.success&&g()})}function D(n){if(n=="Pending")return s(o.pendding);if(n=="Rejected")return s(o.rejected);if(n=="Success")return s(o.succeess)}return(n,i)=>(p(),m(b,null,[u(M),a("div",G,[u(t(U),{visible:w.value,"onUpdate:visible":i[1]||(i[1]=e=>w.value=e),modal:"",header:t(s)(t(o).showComments),style:{width:"50vw"}},{default:z(()=>[a("div",J,[(p(!0),m(b,null,$(r.value[C.value].comments,e=>(p(),m("div",{class:N(["msg",{admin:(e==null?void 0:e.sender_type)=="Admin",parent:(e==null?void 0:e.sender_type)=="Parent"}])},l(e.msg),3))),256))]),a("div",K,[u(t(q),{modelValue:_.value,"onUpdate:modelValue":i[0]||(i[0]=e=>_.value=e)},null,8,["modelValue"]),u(t(P),{label:t(s)(t(o).addComment),onClick:B},null,8,["label"])])]),_:1},8,["visible","header"]),u(T,{class:"sidebar",selected:"enrollmentsRequests"}),a("div",Q,[a("div",W,[a("h2",null,l(t(s)(t(o).enrollmentRequests)),1),a("div",X,[a("div",Z,[a("h3",null,l(t(s)(t(o).childEmail)),1),a("h3",null,l(t(s)(t(o).courseTitle)),1),a("h3",null,l(t(s)(t(o).price)),1),a("h3",null,l(t(s)(t(o).date)),1),a("h3",null,l(t(s)(t(o).status)),1),a("h3",null,l(t(s)(t(o).actions)),1)]),(p(!0),m(b,null,$(r.value,(e,h)=>(p(),m("div",R,[a("span",null,l(e.childEmail),1),a("span",null,l(e.courseTitle),1),a("span",null,l(e.price)+" L.E.",1),a("span",null,l(e.date),1),a("span",{class:N({pending:e.status=="Pending",rejected:e.status=="Rejected",accepted:e.status=="Success"})},l(D(e.status)),3),a("span",null,[u(t(P),{onClick:d=>{C.value=h,w.value=!0},style:{"font-size":"0.75rem"},label:t(s)(t(o).showComments)},null,8,["onClick","label"])])]))),256))])])])]),u(O)],64))}}),oe=Y(ee,[["__scopeId","data-v-d64a699b"]]);export{oe as default};
