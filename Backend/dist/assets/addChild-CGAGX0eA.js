import{P as O}from"./ParentSidebar-BNE0ngcv.js";import{d as Q,r as u,H as N,s as n,c as X,b as d,e as t,C as Y,f as l,t as i,w as Z,k as s,o as ll,N as el,m as L,J as al,l as _,a9 as ol,aa as tl,ab as nl,F as sl,I as dl,a as il,ac as ul,_ as ml}from"./index-nwSjtyq6.js";import{s as q}from"./index-DgW2-BB2.js";import{s as pl}from"./index-CDRHCwqW.js";/* empty css                                                                      */import"./index-CBWnccPP.js";const cl={class:"container"},vl={class:"dialog-container"},fl={style:{color:"var(--secondary)"}},_l={class:"big-wrapper"},rl={class:"wrapper"},hl={class:"element"},bl={class:"element"},Vl={class:"element"},gl={class:"element"},yl={class:"element"},wl={class:"element"},Cl={class:"element"},kl={class:"element"},Nl={class:"element"},Ul=Q({__name:"addChild",setup(Il){const r=u(),h=u(),v=u(),f=u(),b=u(),V=u(),g=u(),W=u(),y=u(),w=u(),C=u(),U=u(!1),j=u([]);let R="";new N("get_all_program").callApi().then(m=>{var e;if(m!=null&&m.success)for(let a of(e=m==null?void 0:m.data)==null?void 0:e.program)j.value.push({label:n(a==null?void 0:a.title),code:a==null?void 0:a.id})});function z(){var m,e,a,p;if(!r.value||!h.value||!v.value||!f.value||!b.value||!V.value||!g.value||!w.value||!y.value)C.value=n(s.dataMissing);else if(f.value!==b.value)C.value=n(s.diffPass);else{const k=new N("add_child");let I={user:{email:v.value,hashed_pass:f.value,user_type:"Child",first_name:r.value,last_name:h.value,gender:(m=V.value)==null?void 0:m.value,birth_day:g.value},child:{user_id:"",grade:(e=w.value)==null?void 0:e.value,child_group:(a=W.value)==null?void 0:a.code,education_system:(p=y.value)==null?void 0:p.value}};k.callApi(I).then(c=>{var o;c!=null&&c.success?(U.value=!0,R=(o=c==null?void 0:c.data)==null?void 0:o.child_user_id):c.msg=="email is already used once"&&(C.value=n(s.emailTaken))})}}function K(m){const e=dl();new N("switch_to_child").callApi({child_id:m}).then(p=>{var k;if(p!=null&&p.success){e.logout(),e.addToken((k=p==null?void 0:p.data)==null?void 0:k.access_token);const I=new N("personal_info"),c=il();I.callApi().then(o=>{var A,P,S,x,D,T,F,$,B,G,H,J,M,E;o!=null&&o.success&&(c.addInfo({userType:(P=(A=o==null?void 0:o.data)==null?void 0:A.info)==null?void 0:P.user_type,notifications:(x=(S=o==null?void 0:o.data)==null?void 0:S.info)==null?void 0:x.notifications,id:(T=(D=o==null?void 0:o.data)==null?void 0:D.info)==null?void 0:T.id,firstName:($=(F=o==null?void 0:o.data)==null?void 0:F.info)==null?void 0:$.first_name,lastName:(G=(B=o==null?void 0:o.data)==null?void 0:B.info)==null?void 0:G.last_name,email:(J=(H=o==null?void 0:o.data)==null?void 0:H.info)==null?void 0:J.email,gender:(E=(M=o==null?void 0:o.data)==null?void 0:M.info)==null?void 0:E.gender}),ul.push("/"))})}})}return(m,e)=>(ll(),X(Z,null,[d(el),t("div",cl,[d(l(al),{modal:"",visible:U.value,"onUpdate:visible":e[1]||(e[1]=a=>U.value=a),pt:{root:"border-none",mask:{style:"backdrop-filter: blur(2px)"},header:{style:"display:none"}}},{default:Y(()=>[t("div",vl,[t("h3",null,i(l(n)(l(s).childAdded)),1),t("h3",null,i(l(n)(l(s).loginWith)),1),t("h3",fl,i(v.value)+" Account",1),t("h3",null,i(l(n)(l(s).toStartJourney)),1),d(l(L),{label:l(n)(l(s).switchToChild),onClick:e[0]||(e[0]=()=>{K(l(R))})},null,8,["label"])])]),_:1},8,["visible"]),d(O,{class:"sidebar",selected:"addChild"}),t("div",_l,[t("h2",null,i(C.value),1),t("div",rl,[t("div",hl,[t("p",null,i(l(n)(l(s).firstName)),1),d(l(_),{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value=a)},null,8,["modelValue"])]),t("div",bl,[t("p",null,i(l(n)(l(s).lastName)),1),d(l(_),{modelValue:h.value,"onUpdate:modelValue":e[3]||(e[3]=a=>h.value=a)},null,8,["modelValue"])]),t("div",Vl,[t("p",null,i(l(n)(l(s).email))+" / "+i(l(n)(l(s).username)),1),d(l(_),{modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value=a)},null,8,["modelValue"])]),t("div",gl,[t("p",null,i(l(n)(l(s).pass)),1),d(l(_),{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=a=>f.value=a)},null,8,["modelValue"])]),t("div",yl,[t("p",null,i(l(n)(l(s).confirmPass)),1),d(l(_),{modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=a=>b.value=a)},null,8,["modelValue"])]),t("div",wl,[t("p",null,i(l(n)(l(s).gender)),1),d(l(q),{modelValue:V.value,"onUpdate:modelValue":e[7]||(e[7]=a=>V.value=a),options:l(ol),"option-label":"label"},null,8,["modelValue","options"])]),t("div",Cl,[t("p",null,i(l(n)(l(s).birthDate)),1),d(l(pl),{modelValue:g.value,"onUpdate:modelValue":e[8]||(e[8]=a=>g.value=a),showIcon:"",iconDisplay:"input"},null,8,["modelValue"])]),t("div",kl,[t("p",null,i(l(n)(l(s).grade)),1),d(l(q),{modelValue:w.value,"onUpdate:modelValue":e[9]||(e[9]=a=>w.value=a),options:l(tl),"option-label":"label","option-group-label":"label",optionGroupChildren:"items"},null,8,["modelValue","options"])]),t("div",Nl,[t("p",null,i(l(n)(l(s).educationSystem)),1),d(l(q),{modelValue:y.value,"onUpdate:modelValue":e[10]||(e[10]=a=>y.value=a),options:l(nl),"option-label":"label"},null,8,["modelValue","options"])])]),d(l(L),{label:l(n)(l(s).addChild),onClick:z,style:{"margin-bottom":"5rem"}},null,8,["label"])])]),d(sl)],64))}}),Tl=ml(Ul,[["__scopeId","data-v-a5b3f348"]]);export{Tl as default};
