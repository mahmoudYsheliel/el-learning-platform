import{_ as j}from"./login-HlRQAw4O.js";import{d as z,r as h,H as V,c as E,b as c,e as t,t as g,f as l,g as Z,C as S,h as J,i as K,s as o,k as n,j as y,o as T,N as Q,l as W,m as X,F as Y,p as ee,n as ae,q as le,a as te,_ as oe}from"./index-DdBBpJFO.js";import{s as U}from"./password.esm-Bo0ZZmug.js";const w=v=>(ee("data-v-32801d10"),v=v(),ae(),v),ne={class:"container"},se=w(()=>t("div",{class:"left borderRigth"},[t("img",{src:j,alt:""})],-1)),ie={class:"right"},ue={class:"welcome"},ce={class:"google-facebook-wrapper"},de={key:0},pe={class:"wrapper"},me=w(()=>t("h6",null,"Pick a password",-1)),re=w(()=>t("ul",{class:"pl-2 ml-2 mt-0",style:{"line-height":"1.5"}},[t("li",null,"At least one lowercase"),t("li",null,"At least one uppercase"),t("li",null,"At least one numeric"),t("li",null,"Minimum 8 characters")],-1)),fe={class:"button"},ge=z({__name:"signupPage",setup(v){const k=K(),m=h(),p=h(),_=h(),i=h(""),P=new V("signup");function B(){if(!m.value||!p.value||!_.value)i.value=o(n.dataMissing)??"";else if(p.value!=_.value)i.value=o(n.diffPass)??"";else if(!G(p.value))i.value=o(n.weakPass)??"";else if(!H(m.value))i.value=o(n.notValidEmail)??"";else{let s={user:{email:m.value,hashed_pass:p.value,user_type:"Parent"}};P.callApi(s).then(e=>{e.msg=="email is already used once"?i.value=o(n.emailTaken)??"":(e==null?void 0:e.success)==!0&&k.push("/login")})}}const F=s=>{const e=le(s.credential);if(e.email_verified){let r={user:{email:e.email,hashed_pass:"mahmoud2000",user_type:"Parent"}};P.callApi(r).then(d=>{if(d.msg=="email is already used once")i.value=o(n.emailTaken)??"";else if((d==null?void 0:d.success)==!0){const f=new V("token"),u=te();f.login(e.email,"mahmoud2000").then(O=>{O.access_token&&new V("personal_info").callApi().then(a=>{var b,C,I,R,x,A,N,q,M,$,D,L;a!=null&&a.success&&(u.addInfo({userType:(C=(b=a==null?void 0:a.data)==null?void 0:b.info)==null?void 0:C.user_type,notifications:[],id:(R=(I=a==null?void 0:a.data)==null?void 0:I.info)==null?void 0:R.id,firstName:(A=(x=a==null?void 0:a.data)==null?void 0:x.info)==null?void 0:A.first_name,lastName:(q=(N=a==null?void 0:a.data)==null?void 0:N.info)==null?void 0:q.last_name,email:($=(M=a==null?void 0:a.data)==null?void 0:M.info)==null?void 0:$.email,gender:(L=(D=a==null?void 0:a.data)==null?void 0:D.info)==null?void 0:L.gender}),k.push("/"))})})}})}};function G(s){const e=/[A-Z]/.test(s),r=/[a-z]/.test(s),d=/\d/.test(s),f=s.length>=8;return e&&r&&d&&f}function H(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)}return(s,e)=>{const r=y("Options"),d=y("GoogleLogin"),f=y("Divider");return T(),E("main",null,[c(Q),c(r),t("div",ne,[se,t("div",ie,[t("div",ue,[t("h1",null,g(l(o)(l(n).welcome)),1),t("h1",null,g(l(o)(l(n).traceCommunity)),1)]),t("div",ce,[c(d,{callback:F})]),i.value?(T(),E("h4",de,g(i.value),1)):Z("",!0),t("div",pe,[c(l(W),{style:{width:"100%"},type:"email",class:"input",modelValue:m.value,"onUpdate:modelValue":e[0]||(e[0]=u=>m.value=u),placeholder:l(o)(l(n).email)},null,8,["modelValue","placeholder"]),c(l(U),{toggleMask:"",modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=u=>p.value=u),placeholder:l(o)(l(n).pass),onChange:e[2]||(e[2]=u=>i.value="")},{header:S(()=>[me]),footer:S(()=>[c(f),re]),_:1},8,["modelValue","placeholder"]),c(l(U),{class:"input",modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=u=>_.value=u),feedback:!1,toggleMask:"",placeholder:l(o)(l(n).confirmPass),onChange:e[4]||(e[4]=u=>i.value="")},null,8,["modelValue","placeholder"])]),t("div",fe,[c(l(X),{onClick:B,label:l(o)(l(n).signup)},null,8,["label"])]),t("p",null,[J(g(l(o)(l(n).haveAccount))+" ",1),t("strong",{onClick:e[5]||(e[5]=u=>l(k).push("/login")),style:{cursor:"pointer","text-decoration":"underline",color:"var(--accent1)"}},g(l(o)(l(n).login)),1)])])]),c(Y)])}}}),Ve=oe(ge,[["__scopeId","data-v-32801d10"]]);export{Ve as default};
