import{_ as X}from"./login-HlRQAw4O.js";import{d as Y,a as B,r as m,H as E,c as z,b as c,e as t,t as p,f as a,g as ee,z as G,A as D,h as le,i as ae,w as te,s as n,k as o,j as F,o as H,N as ne,l as O,m as oe,F as ie,n as se,_ as ue}from"./index-De2Ey1OY.js";import{s as j}from"./index-DJ6xdSsu.js";import{s as de}from"./index-C0YOujgW.js";const ce={class:"container"},pe={class:"right"},me={class:"welcome"},ve={class:"google-facebook-wrapper"},fe={key:0},re={class:"wrapper"},ge={class:"gender"},he={class:"gender",style:{width:"60%"}},_e={class:"gender"},ke={class:"gender",style:{width:"60%"}},ye={class:"button"},we=Y({__name:"signupPage",setup(Ve){const L=ae();te(),B();const v=m(),f=m(),T=m(),r=m("Child"),w=m(),U=m(),_=m(""),k=m(),s=m(""),S=new E("signup");function W(){if(!v.value||!f.value||!T.value||!U.value||!_.value||!k.value)s.value=n(o.dataMissing)??"";else if(f.value!=T.value)s.value=n(o.diffPass)??"";else if(!J(f.value))s.value=n(o.weakPass)??"";else if(!K(v.value))s.value=n(o.notValidEmail)??"";else if(r.value!="Child"&&r.value!="Parent")s.value=n(o.noRoleSelected)??"";else if(!_.value.startsWith("01")||_.value.length!=11)s.value=n(o.phoneNumberError)??"";else{let d={user:{email:v.value,hashed_pass:f.value,user_type:r.value,birth_day:U.value,phone_number:_.value,gender:k.value,role2:w.value,is_verefied:!0}};S.callApi(d).then(e=>{if(e.msg=="email is already used once")s.value=n(o.emailTaken)??"";else if((e==null?void 0:e.success)==!0){const u=new TextEncoder().encode(v.value);String.fromCharCode(...u);const g=new E("token"),i=B();g.login(v.value,f.value).then(h=>{h!=null&&h.access_token&&new E("personal_info").callApi().then(l=>{var V,C,R,b,P,N,$,A,I,x,q,M;l!=null&&l.success&&(i.addInfo({userType:(C=(V=l==null?void 0:l.data)==null?void 0:V.info)==null?void 0:C.user_type,notifications:[],id:(b=(R=l==null?void 0:l.data)==null?void 0:R.info)==null?void 0:b.id,firstName:(N=(P=l==null?void 0:l.data)==null?void 0:P.info)==null?void 0:N.first_name,lastName:(A=($=l==null?void 0:l.data)==null?void 0:$.info)==null?void 0:A.last_name,email:(x=(I=l==null?void 0:l.data)==null?void 0:I.info)==null?void 0:x.email,gender:(M=(q=l==null?void 0:l.data)==null?void 0:q.info)==null?void 0:M.gender}),L.push("/"))})})}})}}const Z=d=>{if(console.log(r.value),r.value!="Child"&&r.value!="Parent"){s.value=n(o.noRoleSelected)??"";return}const e=se(d.credential);if(e!=null&&e.email_verified){let y={user:{email:e.email,hashed_pass:"mahmoud2000",user_type:r.value,is_verefied:e.email_verified,first_name:e.given_name,last_name:e.family_name,image:e.picture}};S.callApi(y).then(u=>{if((u==null?void 0:u.msg)=="email is already used once")s.value=n(o.emailTaken)??"";else if((u==null?void 0:u.success)==!0){const g=new E("token"),i=B();g.login(e.email,"mahmoud2000").then(h=>{h!=null&&h.access_token&&new E("personal_info").callApi().then(l=>{var V,C,R,b,P,N,$,A,I,x,q,M;l!=null&&l.success&&(i.addInfo({userType:(C=(V=l==null?void 0:l.data)==null?void 0:V.info)==null?void 0:C.user_type,notifications:[],id:(b=(R=l==null?void 0:l.data)==null?void 0:R.info)==null?void 0:b.id,firstName:(N=(P=l==null?void 0:l.data)==null?void 0:P.info)==null?void 0:N.first_name,lastName:(A=($=l==null?void 0:l.data)==null?void 0:$.info)==null?void 0:A.last_name,email:(x=(I=l==null?void 0:l.data)==null?void 0:I.info)==null?void 0:x.email,gender:(M=(q=l==null?void 0:l.data)==null?void 0:q.info)==null?void 0:M.gender}),L.push("/"))})})}})}};function J(d){const e=/[A-Z]/.test(d),y=/[a-z]/.test(d),u=/\d/.test(d),g=d.length>=8;return e&&y&&u&&g}function K(d){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)}return(d,e)=>{const y=F("Options"),u=F("GoogleLogin"),g=F("Divider");return H(),z("main",null,[c(ne),c(y),t("div",ce,[e[14]||(e[14]=t("div",{class:"left borderRigth"},[t("img",{src:X,alt:""})],-1)),t("div",pe,[t("div",me,[t("h1",null,p(a(n)(a(o).welcome)),1),t("h1",null,p(a(n)(a(o).traceCommunity)),1)]),t("div",ve,[c(u,{callback:Z,scope:"profile email https://www.googleapis.com/auth/userinfo.profile"})]),s.value?(H(),z("h4",fe,p(s.value),1)):ee("",!0),t("div",re,[c(a(O),{style:{width:"100%"},type:"email",class:"input",modelValue:v.value,"onUpdate:modelValue":e[0]||(e[0]=i=>v.value=i),placeholder:a(n)(a(o).email)},null,8,["modelValue","placeholder"]),c(a(j),{toggleMask:"",modelValue:f.value,"onUpdate:modelValue":e[1]||(e[1]=i=>f.value=i),placeholder:a(n)(a(o).pass),onChange:e[2]||(e[2]=i=>s.value="")},{header:G(()=>e[12]||(e[12]=[t("h6",null,"Pick a password",-1)])),footer:G(()=>[c(g),e[13]||(e[13]=t("ul",{class:"pl-2 ml-2 mt-0",style:{"line-height":"1.5"}},[t("li",null,"At least one lowercase"),t("li",null,"At least one uppercase"),t("li",null,"At least one numeric"),t("li",null,"Minimum 8 characters")],-1))]),_:1},8,["modelValue","placeholder"]),c(a(j),{class:"input",modelValue:T.value,"onUpdate:modelValue":e[3]||(e[3]=i=>T.value=i),feedback:!1,toggleMask:"",placeholder:a(n)(a(o).confirmPass),onChange:e[4]||(e[4]=i=>s.value="")},null,8,["modelValue","placeholder"]),c(a(de),{style:{width:"100%"},modelValue:U.value,"onUpdate:modelValue":e[5]||(e[5]=i=>U.value=i),placeholder:a(n)(a(o).childBirthDate)},null,8,["modelValue","placeholder"]),c(a(O),{style:{width:"100%"},type:"email",class:"input",modelValue:_.value,"onUpdate:modelValue":e[6]||(e[6]=i=>_.value=i),placeholder:a(n)(a(o).phone)},null,8,["modelValue","placeholder"]),t("div",ge,[t("h3",null,p(a(n)(a(o).gender))+":",1),t("div",he,[t("span",{class:D([{role2_selected:k.value=="Male"},"role2"]),onClick:e[7]||(e[7]=i=>k.value="Male")},p(a(n)(a(o).male)),3),t("span",{class:D([{role2_selected:k.value=="Female"},"role2"]),onClick:e[8]||(e[8]=i=>k.value="Female")},p(a(n)(a(o).female)),3)])]),t("div",_e,[t("h3",null,p(a(n)(a(o).type))+":",1),t("div",ke,[t("span",{class:D([{role2_selected:w.value=="Parent"},"role2"]),onClick:e[9]||(e[9]=i=>w.value="Parent")},p(a(n)(a(o).parent)),3),t("span",{class:D([{role2_selected:w.value=="Child"},"role2"]),onClick:e[10]||(e[10]=i=>w.value="Child")},p(a(n)(a(o).student)),3)])])]),t("div",ye,[c(a(oe),{onClick:W,label:a(n)(a(o).signup)},null,8,["label"])]),t("p",null,[le(p(a(n)(a(o).haveAccount))+" ",1),t("strong",{onClick:e[11]||(e[11]=i=>a(L).push("/login")),style:{cursor:"pointer","text-decoration":"underline",color:"var(--accent1)"}},p(a(n)(a(o).login)),1)])])]),c(ie)])}}}),Ne=ue(we,[["__scopeId","data-v-513100d9"]]);export{Ne as default};
