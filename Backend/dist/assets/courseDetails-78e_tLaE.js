import{d as T,c as _,e as l,t as n,f as e,C as N,D as F,h as W,o as c,s as i,k as m,_ as x,y as P,z as R,i as J,b as w,m as H,B as ee,A as le,g as k,q as ie,a as ae,r as h,H as q,P as re,w as ue,M as ce,N as de,F as ve}from"./index-cboPx7Yg.js";import{A as pe,E as me,G as _e,P as ge}from"./PromoCodeDialog-DZY3NRYN.js";import{s as he,a as fe}from"./index-BmWNxN_k.js";const we={class:"container"},be={class:"wrapper"},ye={class:"wrapper"},Ce={class:"wrapper"},ke={class:"wrapper"},Ie=T({__name:"Information",props:["title","price","categories","min_age","max_age","duration"],setup(o){return(I,p)=>(c(),_("main",null,[l("div",we,[l("h2",null,n(e(i)(e(m).courseInfo)),1),l("div",be,[l("h4",null,n(e(i)(e(m).title)),1),l("p",null,n(o.title),1)]),l("div",ye,[l("h4",null,n(e(i)(e(m).categories)),1),(c(!0),_(N,null,F(o.categories,s=>(c(),_("p",null,n(e(i)(s.title)),1))),256))]),l("div",Ce,[l("h4",null,[W(n(e(i)(e(m).duration)),1),p[0]||(p[0]=l("i",{class:"pi pi-clock"},null,-1))]),l("p",null,n(o.duration)+" "+n(e(i)(e(m).days)),1)]),l("div",ke,[l("h4",null,[W(n(e(i)(e(m).price)),1),p[1]||(p[1]=l("i",{class:"pi pi-dollar"},null,-1))]),l("p",null,n(o.price)+" L.E",1)])])]))}}),De=x(Ie,[["__scopeId","data-v-c0b38cc4"]]),$e={class:"dialog"},qe=T({__name:"CourseBelongsToPlanDialog",props:["showDialog","planId","childId"],setup(o){const I=J(),p=o;return(s,g)=>(c(),P(e(ee),{visible:p.showDialog,"onUpdate:visible":g[1]||(g[1]=a=>p.showDialog=a),modal:"",pt:{root:"border-none",mask:{style:"backdrop-filter: blur(2px)"}}},{container:R(({closeCallback:a})=>[l("div",$e,[l("h2",null,n(e(i)(e(m).courseBelongsToPlan)),1),w(e(H),{label:e(i)(e(m).viewPlans),style:{width:"10rem"},onClick:g[0]||(g[0]=D=>e(I).push(`/plan/${o.planId}/${o.childId}`))},null,8,["label"])])]),_:1},8,["visible"]))}}),Pe=x(qe,[["__scopeId","data-v-004f4601"]]),Te={class:"course-description"},xe={class:"head"},Ee=["src"],Ae=["src"],Be={class:"description"},ze={class:"header"},Se={key:2,style:{color:"#f33"}},Me={key:2,class:"objectives"},Re=T({__name:"CourseDescribtion",props:["course","isEnrolled","notShowButton","userType","first_lesson_video"],emits:["enroll","viewMaterial"],setup(o,{emit:I}){return(p,s)=>{var g,a,D,j,$,E,A,B,V,L,z;return c(),_("div",Te,[l("div",xe,[l("h1",null,n(e(i)((g=o.course)==null?void 0:g.title)),1)]),o.first_lesson_video?(c(),_("iframe",{key:0,style:{"aspect-ratio":"16/9"},src:(a=o.first_lesson_video.replace("view?usp=sharing","preview"))==null?void 0:a.replace("view?usp=drive_link","preview"),frameborder:"0",sandbox:"allow-scripts allow-same-origin",allowfullscreen:""},null,8,Ee)):(c(),_("img",{key:1,src:(D=o.course)==null?void 0:D.image,alt:"",class:le({locked:(j=o.course)==null?void 0:j.is_locked})},null,10,Ae)),l("div",Be,[l("div",ze,[l("h2",null,n(e(i)(e(m).courseDescription)),1),!o.isEnrolled&&!o.notShowButton&&!(($=o.course)!=null&&$.is_locked)&&o.userType!=="Admin"?(c(),P(e(H),{key:0,label:e(i)(e(m).enrollNow),onClick:s[0]||(s[0]=()=>{p.$emit("enroll")})},null,8,["label"])):k("",!0),o.isEnrolled&&!o.notShowButton&&!((E=o.course)!=null&&E.is_locked)||o.userType=="Admin"?(c(),P(e(H),{key:1,label:e(i)(e(m).viewMat),onClick:s[1]||(s[1]=()=>{p.$emit("viewMaterial")})},null,8,["label"])):k("",!0),(A=o.course)!=null&&A.is_locked?(c(),_("p",Se,n(e(i)(e(m).locked)),1)):k("",!0)]),l("p",null,n(e(i)((B=o.course)==null?void 0:B.description)),1)]),((L=(V=o.course)==null?void 0:V.objectives)==null?void 0:L.length)>0?(c(),_("div",Me,[l("h2",null,n(e(i)(e(m).courseObjectives)),1),l("ul",null,[(c(!0),_(N,null,F((z=o.course)==null?void 0:z.objectives,O=>(c(),_("li",null,n(e(i)(O)),1))),256))])])):k("",!0)])}}}),Ne=x(Re,[["__scopeId","data-v-5ad3f3ab"]]),je={class:"card"},Ve={style:{display:"flex","padding-left":"2rem",gap:"2rem"}},Le={key:0},Fe={key:1},He={key:2},Oe={style:{padding:"0","margin-block":"0.35rem",color:"var(--accent1)"},class:"m-0"},Ge=T({__name:"CourseMaterial",props:["chapters"],setup(o){return(I,p)=>(c(),_("div",je,[l("h2",null,n(e(i)(e(m).courseContent)),1),w(e(fe),{multiple:!0,activeIndex:[]},{default:R(()=>[(c(!0),_(N,null,F(o.chapters,(s,g)=>(c(),P(e(he),{key:s.title,pt:{root:{style:"margin-block:0.5rem; border:solid 2px var(--accent1); border-radius:1rem; padding:0.25rem;"}}},{header:R(()=>[l("div",null,[l("h4",null,n(e(i)(s.title)),1),l("div",Ve,[s.lessonCount?(c(),_("h5",Le,n(s.lessonCount)+" "+n(e(i)(e(m).lessons)),1)):k("",!0),s.quizCount?(c(),_("h5",Fe,n(s.quizCount)+" "+n(e(i)(e(m).quiz)),1)):k("",!0),s.activityCount?(c(),_("h5",He,n(s.activityCount)+" "+n(e(i)(e(m).activity)),1)):k("",!0)])])]),default:R(()=>[(c(!0),_(N,null,F(s.materials,a=>(c(),_("p",Oe,[l("i",{class:le(a.icon)},null,2),W(" "+n(a.title),1)]))),256))]),_:2},1024))),128))]),_:1})]))}}),Ue=x(Ge,[["__scopeId","data-v-2b3d0d4a"]]),Qe={class:"dialog"},We=T({__name:"PrequisiteDialog",props:["showDialog","course"],emits:["removeDialog"],setup(o,{emit:I}){J();const p=o;return(s,g)=>(c(),P(e(ee),{visible:p.showDialog,"onUpdate:visible":g[1]||(g[1]=a=>p.showDialog=a),modal:"",pt:{root:"border-none",mask:{style:"backdrop-filter: blur(2px)"}}},{container:R(({closeCallback:a})=>[l("div",Qe,[l("h2",null,n(e(i)(e(m).courseHasPrequisite))+" "+n(o.course),1),w(e(H),{label:e(i)(e(m).cancell),onClick:g[0]||(g[0]=()=>{s.$emit("removeDialog")})},null,8,["label"])])]),_:1},8,["visible"]))}}),Je=x(We,[["__scopeId","data-v-b41bb835"]]),Ke={class:"big-container"},Xe={class:"content"},Ye=T({__name:"courseDetails",setup(o){const I=ie(),p=ae(),s=ue(),g=J(),a=h(),D=h(),j=new q("get_course_free_lessons"),$=h([]);j.callApi({course_id:s.params.courseId}).then(d=>{var v,b,f,y;a.value=(v=d==null?void 0:d.data)==null?void 0:v.course,D.value=(f=(b=d==null?void 0:d.data)==null?void 0:b.lesson)==null?void 0:f.source;for(let u of(y=a.value)==null?void 0:y.chapters){let r={title:"",lessonCount:0,quizCount:0,activityCount:0,materials:[]};r.title=u==null?void 0:u.title;for(let t of u==null?void 0:u.materials){for(let C of re)(t==null?void 0:t.type)==C.name&&r.materials.push({title:i(t.title),icon:C.icon});(t==null?void 0:t.type)==="Lesson"&&(r.lessonCount=r.lessonCount+1),(t==null?void 0:t.type)==="Quiz"&&(r.quizCount=r.quizCount+1),((t==null?void 0:t.type)==="Activity"||(t==null?void 0:t.type)==="Project"||(t==null?void 0:t.type)==="Simulation")&&(r.activityCount=r.activityCount+1)}$.value.push(r)}});const E=h(),A=h(!1),B=h(!1),V=h(!1),L=h(!1),z=h(!1),O=h(),G=h(!1);function oe(){var d;I.getIsAuthorized?(ce().setOrder({courseTitle:(d=a.value)==null?void 0:d.title,coursePrice:a.value.price}),g.push("/Checkout")):g.push("/login")}function te(d){var f,y,u;z.value=!1;let v;((f=p.getInfo)==null?void 0:f.userType)=="Parent"?v=s.params.childId??"":((y=p.getInfo)==null?void 0:y.userType)=="Child"&&(v=p.getInfo.id),new q("request_enrollment").callApi({request:{student_id:v,course_id:(u=a.value)==null?void 0:u.id,promo_code:d}}).then(r=>{var t,C;r!=null&&r.success&&(E.value=(C=(t=r==null?void 0:r.data)==null?void 0:t.request)==null?void 0:C.price,B.value=!0)})}const K=h(!1),X=h();new q("get_enrollment").callApi({course_id:s.params.courseId}).then(d=>{var v,b,f;(v=d==null?void 0:d.data)!=null&&v.enrollment&&(K.value=!0,X.value=(f=(b=d==null?void 0:d.data)==null?void 0:b.enrollment)==null?void 0:f.id)});const U=h(""),Y=h(""),se=new q("get_course_plan");function ne(){se.callApi({course_id:s.params.courseId}).then(d=>{var b,f,y;let v=(f=(b=d==null?void 0:d.data)==null?void 0:b.plan)==null?void 0:f.courses;U.value=(y=v==null?void 0:v.find(u=>(u==null?void 0:u.Id)==s.params.courseId))==null?void 0:y.ristriction_on_course,new q("get_course").callApi({course_id:U.value||""}).then(u=>{var r,t;Y.value=i((t=(r=u==null?void 0:u.data)==null?void 0:r.course)==null?void 0:t.title)||""}),new q("get_enrollment").callApi({course_id:U.value||""}).then(u=>{var r,t,C,S,M;((t=(r=u==null?void 0:u.data)==null?void 0:r.enrollment)==null?void 0:t.is_completed)==!1?G.value=!0:g.push(`/viewCoursePage/${s.params.courseId}/${X.value}/${(M=(S=(C=a.value)==null?void 0:C.chapters[0])==null?void 0:S.materials[0])==null?void 0:M.Id}`)})})}return(d,v)=>{var b,f,y,u,r,t,C,S,M,Z;return c(),_(N,null,[w(de),l("div",Ke,[w(pe,{showDialog:A.value,onRemoveDialog:v[0]||(v[0]=Q=>{A.value=!1})},null,8,["showDialog"]),w(Je,{course:Y.value,"show-dialog":G.value,onRemoveDialog:v[1]||(v[1]=Q=>G.value=!1)},null,8,["course","show-dialog"]),w(me,{showDialog:B.value,cost:E.value},null,8,["showDialog","cost"]),w(_e,{showDialog:L.value},null,8,["showDialog"]),w(Pe,{showDialog:V.value,planId:O.value,childId:(b=e(s).params)==null?void 0:b.childId},null,8,["showDialog","planId","childId"]),w(ge,{showDialog:z.value,onPromoCode:v[2]||(v[2]=Q=>{te(Q)})},null,8,["showDialog"]),w(Ne,{first_lesson_video:D.value,course:a.value,isEnrolled:K.value,userType:(f=e(p).getInfo)==null?void 0:f.userType,notShowButton:((y=e(p).getInfo)==null?void 0:y.userType)=="Parent"&&e(s).params.isEnrolled=="1",onEnroll:oe,onViewMaterial:ne},null,8,["first_lesson_video","course","isEnrolled","userType","notShowButton"]),l("div",Xe,[((u=$.value)==null?void 0:u.length)>0?(c(),P(Ue,{key:0,chapters:$.value},null,8,["chapters"])):k("",!0),w(De,{categories:(r=a.value)==null?void 0:r.categories,title:e(i)((t=a.value)==null?void 0:t.title),price:(C=a.value)==null?void 0:C.price,duration:(S=a.value)==null?void 0:S.duration,min_age:(M=a.value)==null?void 0:M.min_age,max_age:(Z=a.value)==null?void 0:Z.max_age},null,8,["categories","title","price","duration","min_age","max_age"])])]),w(ve)],64)}}}),tl=x(Ye,[["__scopeId","data-v-01d26b73"]]);export{tl as default};
