import{d as j,P as T,a as W,r as u,x as $,c as E,b as i,e as t,t as o,f as e,g as z,C as G,i as J,H as B,o as F,N as K,s as n,k as s,l as _,m as L,F as Q,_ as X}from"./index-CxDCorye.js";const Y={id:"checkout_container"},Z={id:"contact_details"},ee={key:0,style:{color:"var(--wrongAnswer)","text-align":"center"}},le={class:"input_field"},te={class:"input_field"},ae={class:"input_field"},oe={class:"input_field"},ne={style:{display:"flex","justify-content":"end"}},se={id:"checkout_details"},ue={id:"details"},de={class:"details_field"},ie={class:"details_field"},ce={style:{color:"red","text-align":"center"}},pe=j({__name:"Checkout",setup(re){var b,w,x,I,P,R;const f=T(),g=W();J();const y=u(f.getOrder),r=u((b=g.getInfo)==null?void 0:b.firstName),m=u((w=g.getInfo)==null?void 0:w.lastName),h=u((x=g.getInfo)==null?void 0:x.email),p=u(),V=u(!1),v=u(""),N=u((I=y.value)==null?void 0:I.price),k=u((P=y.value)==null?void 0:P.price),M=u((R=y.value)==null?void 0:R.title),C=u("");function D(c){return!!(c.startsWith("01")&&c.length==11)}const H=async()=>{var U,A;if(!(r.value&&m.value&&p.value&&D(p.value))){V.value=!0;return}let c="";const l=new B("get_payment_link"),a={type:(U=f.getOrder)==null?void 0:U.type,plan_course_id:(A=f.getOrder)==null?void 0:A.id,promo_code:v.value,first_name:r.value,last_name:m.value,phone_number:p.value};l.callApi({paymob_data:a}).then(d=>{var O,q;d!=null&&d.success&&((O=d==null?void 0:d.data)!=null&&O.link)&&(c=(q=d==null?void 0:d.data)==null?void 0:q.link,window.open(c,"_blank"))})};function S(){new B("apply_promocode").callApi({amount:N.value,promo_code:v.value}).then(l=>{var a;l!=null&&l.success&&((a=l==null?void 0:l.data)!=null&&a.amount)?k.value=l.data.amount:(k.value=N.value,C.value=l==null?void 0:l.msg)})}return $([v,r,m,p,h],()=>{C.value="",V.value=!1}),(c,l)=>(F(),E(G,null,[i(K),t("div",Y,[t("div",Z,[t("h2",null,o(e(n)(e(s).contactDetails)),1),V.value?(F(),E("h4",ee,o(e(n)(e(s).dataMissing)),1)):z("",!0),t("div",le,[t("p",null,o(e(n)(e(s).firstName))+"*",1),i(e(_),{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=a=>r.value=a)},null,8,["modelValue"])]),t("div",te,[t("p",null,o(e(n)(e(s).lastName))+"*",1),i(e(_),{modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=a=>m.value=a)},null,8,["modelValue"])]),t("div",ae,[t("p",null,o(e(n)(e(s).email))+"*",1),i(e(_),{modelValue:h.value,"onUpdate:modelValue":l[2]||(l[2]=a=>h.value=a)},null,8,["modelValue"])]),t("div",oe,[t("p",null,o(e(n)(e(s).phone))+"*",1),i(e(_),{maxlength:"11",modelValue:p.value,"onUpdate:modelValue":l[3]||(l[3]=a=>p.value=a)},null,8,["modelValue"])]),t("div",ne,[i(e(L),{style:{"margin-top":"2rem"},label:e(n)(e(s).continue),onClick:l[4]||(l[4]=()=>{H()})},null,8,["label"])])]),t("div",se,[t("p",null,[t("strong",null,o(e(n)(e(s).orderSummary)),1)]),t("p",null,o(e(n)(e(s).promoCode)),1),i(e(_),{modelValue:v.value,"onUpdate:modelValue":l[5]||(l[5]=a=>v.value=a)},null,8,["modelValue"]),t("div",ue,[t("div",de,[t("p",null,o(e(n)(e(s).courseTitle))+":",1),t("p",null,o(e(n)(M.value)),1)]),t("div",ie,[t("p",null,o(e(n)(e(s).price))+":",1),t("p",null,o(k.value)+" L.E",1)])]),i(e(L),{style:{width:"100%","margin-top":"2rem"},label:e(n)(e(s).checkout),onClick:l[6]||(l[6]=()=>{S()})},null,8,["label"]),t("p",ce,o(C.value),1)])]),i(Q)],64))}}),ve=X(pe,[["__scopeId","data-v-0b419020"]]);export{ve as default};
