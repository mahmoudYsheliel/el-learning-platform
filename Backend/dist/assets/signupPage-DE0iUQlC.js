import{_ as Q}from"./login-HlRQAw4O.js";import{d as X,a as S,r as m,H as R,c as z,b as r,e as a,t as c,f as l,g as Y,z as G,A as w,h as ee,i as le,w as ae,s as t,k as o,j as $,o as H,N as te,l as O,m as oe,F as ne,n as se,_ as ie}from"./index-cboPx7Yg.js";import{s as j}from"./index-DfdaXeIl.js";import{s as ue}from"./index-DEb00m0W.js";const de={class:"container"},re={class:"right"},ce={class:"welcome"},me={class:"google-facebook-wrapper"},pe={key:0},ve={class:"wrapper"},fe={class:"gender"},ge={class:"gender",style:{width:"60%"}},he={class:"gender"},_e={class:"gender",style:{width:"60%"}},ye={class:"button"},Ce=X({__name:"signupPage",setup(Ve){const b=le();ae(),S();const f=m(),g=m(),V=m(),p=m("Child"),C=m(),k=m(),h=m(""),_=m(),i=m(""),x=new R("signup");function W(){if(!f.value||!g.value||!V.value||!k.value||!h.value||!_.value)i.value=t(o.dataMissing)??"";else if(g.value!=V.value)i.value=t(o.diffPass)??"";else if(!J(g.value))i.value=t(o.weakPass)??"";else if(!K(f.value))i.value=t(o.notValidEmail)??"";else if(p.value!="Child"&&p.value!="Parent")i.value=t(o.noRoleSelected)??"";else if(!h.value.startsWith("01")||h.value.length!=11)i.value=t(o.phoneNumberError)??"";else{let d={user:{email:f.value,hashed_pass:g.value,user_type:p.value,birth_day:k.value,phone_number:h.value,gender:_.value,role2:C.value,is_verefied:!0}};x.callApi(d).then(e=>{if(e.msg=="email is already used once")i.value=t(o.emailTaken)??"";else if((e==null?void 0:e.success)==!0){const u=new TextEncoder().encode(f.value),v=String.fromCharCode(...u);b.push(`/verifyEmail/${btoa(v)}`)}})}}const Z=d=>{if(console.log(p.value),p.value!="Child"&&p.value!="Parent"){i.value=t(o.noRoleSelected)??"";return}const e=se(d.credential);if(e!=null&&e.email_verified){let y={user:{email:e.email,hashed_pass:"mahmoud2000",user_type:p.value,is_verefied:e.email_verified,first_name:e.given_name,last_name:e.family_name,image:e.picture}};x.callApi(y).then(u=>{if((u==null?void 0:u.msg)=="email is already used once")i.value=t(o.emailTaken)??"";else if((u==null?void 0:u.success)==!0){const v=new R("token"),s=S();v.login(e.email,"mahmoud2000").then(P=>{P!=null&&P.access_token&&new R("personal_info").callApi().then(n=>{var A,N,M,E,I,U,q,D,L,T,B,F;n!=null&&n.success&&(s.addInfo({userType:(N=(A=n==null?void 0:n.data)==null?void 0:A.info)==null?void 0:N.user_type,notifications:[],id:(E=(M=n==null?void 0:n.data)==null?void 0:M.info)==null?void 0:E.id,firstName:(U=(I=n==null?void 0:n.data)==null?void 0:I.info)==null?void 0:U.first_name,lastName:(D=(q=n==null?void 0:n.data)==null?void 0:q.info)==null?void 0:D.last_name,email:(T=(L=n==null?void 0:n.data)==null?void 0:L.info)==null?void 0:T.email,gender:(F=(B=n==null?void 0:n.data)==null?void 0:B.info)==null?void 0:F.gender}),b.push("/"))})})}})}};function J(d){const e=/[A-Z]/.test(d),y=/[a-z]/.test(d),u=/\d/.test(d),v=d.length>=8;return e&&y&&u&&v}function K(d){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)}return(d,e)=>{const y=$("Options"),u=$("GoogleLogin"),v=$("Divider");return H(),z("main",null,[r(te),r(y),a("div",de,[e[14]||(e[14]=a("div",{class:"left borderRigth"},[a("img",{src:Q,alt:""})],-1)),a("div",re,[a("div",ce,[a("h1",null,c(l(t)(l(o).welcome)),1),a("h1",null,c(l(t)(l(o).traceCommunity)),1)]),a("div",me,[r(u,{callback:Z,scope:"profile email https://www.googleapis.com/auth/userinfo.profile"})]),i.value?(H(),z("h4",pe,c(i.value),1)):Y("",!0),a("div",ve,[r(l(O),{style:{width:"100%"},type:"email",class:"input",modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),placeholder:l(t)(l(o).email)},null,8,["modelValue","placeholder"]),r(l(j),{toggleMask:"",modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=s=>g.value=s),placeholder:l(t)(l(o).pass),onChange:e[2]||(e[2]=s=>i.value="")},{header:G(()=>e[12]||(e[12]=[a("h6",null,"Pick a password",-1)])),footer:G(()=>[r(v),e[13]||(e[13]=a("ul",{class:"pl-2 ml-2 mt-0",style:{"line-height":"1.5"}},[a("li",null,"At least one lowercase"),a("li",null,"At least one uppercase"),a("li",null,"At least one numeric"),a("li",null,"Minimum 8 characters")],-1))]),_:1},8,["modelValue","placeholder"]),r(l(j),{class:"input",modelValue:V.value,"onUpdate:modelValue":e[3]||(e[3]=s=>V.value=s),feedback:!1,toggleMask:"",placeholder:l(t)(l(o).confirmPass),onChange:e[4]||(e[4]=s=>i.value="")},null,8,["modelValue","placeholder"]),r(l(ue),{style:{width:"100%"},modelValue:k.value,"onUpdate:modelValue":e[5]||(e[5]=s=>k.value=s),placeholder:l(t)(l(o).childBirthDate)},null,8,["modelValue","placeholder"]),r(l(O),{style:{width:"100%"},type:"email",class:"input",modelValue:h.value,"onUpdate:modelValue":e[6]||(e[6]=s=>h.value=s),placeholder:l(t)(l(o).phone)},null,8,["modelValue","placeholder"]),a("div",fe,[a("h3",null,c(l(t)(l(o).gender))+":",1),a("div",ge,[a("span",{class:w([{role2_selected:_.value=="Male"},"role2"]),onClick:e[7]||(e[7]=s=>_.value="Male")},c(l(t)(l(o).male)),3),a("span",{class:w([{role2_selected:_.value=="Female"},"role2"]),onClick:e[8]||(e[8]=s=>_.value="Female")},c(l(t)(l(o).female)),3)])]),a("div",he,[a("h3",null,c(l(t)(l(o).type))+":",1),a("div",_e,[a("span",{class:w([{role2_selected:C.value=="Parent"},"role2"]),onClick:e[9]||(e[9]=s=>C.value="Parent")},c(l(t)(l(o).parent)),3),a("span",{class:w([{role2_selected:C.value=="Child"},"role2"]),onClick:e[10]||(e[10]=s=>C.value="Child")},c(l(t)(l(o).student)),3)])])]),a("div",ye,[r(l(oe),{onClick:W,label:l(t)(l(o).signup)},null,8,["label"])]),a("p",null,[ee(c(l(t)(l(o).haveAccount))+" ",1),a("strong",{onClick:e[11]||(e[11]=s=>l(b).push("/login")),style:{cursor:"pointer","text-decoration":"underline",color:"var(--accent1)"}},c(l(t)(l(o).login)),1)])])]),r(ne)])}}}),$e=ie(Ce,[["__scopeId","data-v-e765bc6e"]]);export{$e as default};
