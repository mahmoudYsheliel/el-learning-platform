import{d as E,c as _,e as t,t as a,f as e,w as L,x as G,h as O,o as r,s as i,k as m,_ as A,G as x,C as V,i as Q,b as I,m as H,J as ee,z as le,g as k,I as ae,a as ie,r as C,H as b,K as ue,E as re,N as ce,F as de}from"./index-nwSjtyq6.js";import{A as ve,E as pe,G as me,P as _e}from"./PromoCodeDialog-Du1MPvfR.js";import{s as fe,a as ge}from"./index-BAb0n8-a.js";const he={class:"container"},we={class:"wrapper"},Ce={class:"wrapper"},ye={class:"wrapper"},Ie={class:"wrapper"},be=E({__name:"Information",props:["title","price","categories","min_age","max_age","duration"],setup(s){return(D,p)=>(r(),_("main",null,[t("div",he,[t("h2",null,a(e(i)(e(m).courseInfo)),1),t("div",we,[t("h4",null,a(e(i)(e(m).title)),1),t("p",null,a(s.title),1)]),t("div",Ce,[t("h4",null,a(e(i)(e(m).categories)),1),(r(!0),_(L,null,G(s.categories,n=>(r(),_("p",null,a(e(i)(n.title)),1))),256))]),t("div",ye,[t("h4",null,[O(a(e(i)(e(m).duration)),1),p[0]||(p[0]=t("i",{class:"pi pi-clock"},null,-1))]),t("p",null,a(s.duration)+" "+a(e(i)(e(m).days)),1)]),t("div",Ie,[t("h4",null,[O(a(e(i)(e(m).price)),1),p[1]||(p[1]=t("i",{class:"pi pi-dollar"},null,-1))]),t("p",null,a(s.price)+" L.E",1)])])]))}}),ke=A(be,[["__scopeId","data-v-c0b38cc4"]]),De={class:"dialog"},$e=E({__name:"CourseBelongsToPlanDialog",props:["showDialog","planId","childId"],setup(s){const D=Q(),p=s;return(n,h)=>(r(),x(e(ee),{visible:p.showDialog,"onUpdate:visible":h[1]||(h[1]=c=>p.showDialog=c),modal:"",pt:{root:"border-none",mask:{style:"backdrop-filter: blur(2px)"}}},{container:V(({closeCallback:c})=>[t("div",De,[t("h2",null,a(e(i)(e(m).courseBelongsToPlan)),1),I(e(H),{label:e(i)(e(m).viewPlans),style:{width:"10rem"},onClick:h[0]||(h[0]=q=>e(D).push(`/plan/${s.planId}/${s.childId}`))},null,8,["label"])])]),_:1},8,["visible"]))}}),qe=A($e,[["__scopeId","data-v-004f4601"]]),Pe={class:"course-description"},Te={class:"head"},xe=["src"],Ee=["src"],Ae={class:"description"},Be={class:"header"},Re={key:2,style:{color:"#f33"}},ze={key:2,class:"objectives"},Se=E({__name:"CourseDescribtion",props:["course","isEnrolled","notShowButton","userType","first_lesson_video"],emits:["enroll","viewMaterial"],setup(s,{emit:D}){return(p,n)=>{var h,c,q,F,P,B,R,z,T,S,$;return r(),_("div",Pe,[t("div",Te,[t("h1",null,a(e(i)((h=s.course)==null?void 0:h.title)),1)]),s.first_lesson_video?(r(),_("iframe",{key:0,style:{"aspect-ratio":"16/9"},src:(c=s.first_lesson_video.replace("view?usp=sharing","preview"))==null?void 0:c.replace("view?usp=drive_link","preview"),frameborder:"0",sandbox:"allow-scripts allow-same-origin",allowfullscreen:""},null,8,xe)):(r(),_("img",{key:1,src:(q=s.course)==null?void 0:q.image,alt:"",class:le({locked:(F=s.course)==null?void 0:F.is_locked})},null,10,Ee)),t("div",Ae,[t("div",Be,[t("h2",null,a(e(i)(e(m).courseDescription)),1),!s.isEnrolled&&!s.notShowButton&&!((P=s.course)!=null&&P.is_locked)&&s.userType!=="Admin"?(r(),x(e(H),{key:0,label:e(i)(e(m).enrollNow),onClick:n[0]||(n[0]=()=>{p.$emit("enroll")})},null,8,["label"])):k("",!0),s.isEnrolled&&!s.notShowButton&&!((B=s.course)!=null&&B.is_locked)||s.userType=="Admin"?(r(),x(e(H),{key:1,label:e(i)(e(m).viewMat),onClick:n[1]||(n[1]=()=>{p.$emit("viewMaterial")})},null,8,["label"])):k("",!0),(R=s.course)!=null&&R.is_locked?(r(),_("p",Re,a(e(i)(e(m).locked)),1)):k("",!0)]),t("p",null,a(e(i)((z=s.course)==null?void 0:z.description)),1)]),((S=(T=s.course)==null?void 0:T.objectives)==null?void 0:S.length)>0?(r(),_("div",ze,[t("h2",null,a(e(i)(e(m).courseObjectives)),1),t("ul",null,[(r(!0),_(L,null,G(($=s.course)==null?void 0:$.objectives,M=>(r(),_("li",null,a(e(i)(M)),1))),256))])])):k("",!0)])}}}),Me=A(Se,[["__scopeId","data-v-5ad3f3ab"]]),Ne={class:"card"},je={style:{display:"flex","padding-left":"2rem",gap:"2rem"}},Ve={key:0},Le={key:1},Fe={key:2},Ge={style:{padding:"0","margin-block":"0.35rem",color:"var(--accent1)"},class:"m-0"},He=E({__name:"CourseMaterial",props:["chapters"],setup(s){return(D,p)=>(r(),_("div",Ne,[t("h2",null,a(e(i)(e(m).courseContent)),1),I(e(ge),{multiple:!0,activeIndex:[]},{default:V(()=>[(r(!0),_(L,null,G(s.chapters,(n,h)=>(r(),x(e(fe),{key:n.title,pt:{root:{style:"margin-block:0.5rem; border:solid 2px var(--accent1); border-radius:1rem; padding:0.25rem;"}}},{header:V(()=>[t("div",null,[t("h4",null,a(e(i)(n.title)),1),t("div",je,[n.lessonCount?(r(),_("h5",Ve,a(n.lessonCount)+" "+a(e(i)(e(m).lessons)),1)):k("",!0),n.quizCount?(r(),_("h5",Le,a(n.quizCount)+" "+a(e(i)(e(m).quiz)),1)):k("",!0),n.activityCount?(r(),_("h5",Fe,a(n.activityCount)+" "+a(e(i)(e(m).activity)),1)):k("",!0)])])]),default:V(()=>[(r(!0),_(L,null,G(n.materials,c=>(r(),_("p",Ge,[t("i",{class:le(c.icon)},null,2),O(" "+a(c.title),1)]))),256))]),_:2},1024))),128))]),_:1})]))}}),Ue=A(He,[["__scopeId","data-v-2b3d0d4a"]]),Je={class:"dialog"},Ke=E({__name:"PrequisiteDialog",props:["showDialog","course"],emits:["removeDialog"],setup(s,{emit:D}){Q();const p=s;return(n,h)=>(r(),x(e(ee),{visible:p.showDialog,"onUpdate:visible":h[1]||(h[1]=c=>p.showDialog=c),modal:"",pt:{root:"border-none",mask:{style:"backdrop-filter: blur(2px)"}}},{container:V(({closeCallback:c})=>[t("div",Je,[t("h2",null,a(e(i)(e(m).courseHasPrequisite))+" "+a(s.course),1),I(e(H),{label:e(i)(e(m).cancell),onClick:h[0]||(h[0]=()=>{n.$emit("removeDialog")})},null,8,["label"])])]),_:1},8,["visible"]))}}),Oe=A(Ke,[["__scopeId","data-v-b41bb835"]]),Qe={class:"big-container"},We={class:"content"},Xe=E({__name:"courseDetails",setup(s){const D=ae(),p=ie(),n=re(),h=Q(),c=C(),q=C(),F=new b("get_course_free_lessons"),P=C([]);F.callApi({course_id:n.params.courseId}).then(d=>{var v,w,f,y;c.value=(v=d==null?void 0:d.data)==null?void 0:v.course,q.value=(f=(w=d==null?void 0:d.data)==null?void 0:w.lesson)==null?void 0:f.source;for(let u of(y=c.value)==null?void 0:y.chapters){let l={title:"",lessonCount:0,quizCount:0,activityCount:0,materials:[]};l.title=u==null?void 0:u.title;for(let o of u==null?void 0:u.materials){for(let g of ue)(o==null?void 0:o.type)==g.name&&l.materials.push({title:i(o.title),icon:g.icon});(o==null?void 0:o.type)==="Lesson"&&(l.lessonCount=l.lessonCount+1),(o==null?void 0:o.type)==="Quiz"&&(l.quizCount=l.quizCount+1),((o==null?void 0:o.type)==="Activity"||(o==null?void 0:o.type)==="Project"||(o==null?void 0:o.type)==="Simulation")&&(l.activityCount=l.activityCount+1)}P.value.push(l)}});const B=C(),R=C(!1),z=C(!1),T=C(!1),S=C(!1),$=C(!1),M=C(),U=C(!1);function oe(){var d,v,w,f,y;D.getIsAuthorized?((d=p.getInfo)==null?void 0:d.userType)=="Child"?new b("get_course_plan").callApi({course_id:(v=n.params)==null?void 0:v.courseId}).then(l=>{var o,g;(l==null?void 0:l.success)==!1?$.value=!0:(l==null?void 0:l.success)==!0&&(T.value=!0,M.value=(g=(o=l==null?void 0:l.data)==null?void 0:o.plan)==null?void 0:g.id)}):((w=p.getInfo)==null?void 0:w.userType)=="Parent"&&(((f=n.params)==null?void 0:f.childId)=="0"?S.value=!0:new b("get_course_plan").callApi({course_id:(y=n.params)==null?void 0:y.courseId}).then(l=>{var o,g;(l==null?void 0:l.success)==!1?$.value=!0:(l==null?void 0:l.success)==!0&&(T.value=!0,M.value=(g=(o=l==null?void 0:l.data)==null?void 0:o.plan)==null?void 0:g.id)})):h.push("/login")}function te(d){var f,y,u;$.value=!1;let v;((f=p.getInfo)==null?void 0:f.userType)=="Parent"?v=n.params.childId??"":((y=p.getInfo)==null?void 0:y.userType)=="Child"&&(v=p.getInfo.id),new b("request_enrollment").callApi({request:{student_id:v,course_id:(u=c.value)==null?void 0:u.id,promo_code:d}}).then(l=>{var o,g;l!=null&&l.success&&(B.value=(g=(o=l==null?void 0:l.data)==null?void 0:o.request)==null?void 0:g.price,z.value=!0)})}const W=C(!1),X=C();new b("get_enrollment").callApi({course_id:n.params.courseId}).then(d=>{var v,w,f;(v=d==null?void 0:d.data)!=null&&v.enrollment&&(W.value=!0,X.value=(f=(w=d==null?void 0:d.data)==null?void 0:w.enrollment)==null?void 0:f.id)});const J=C(""),Y=C(""),se=new b("get_course_plan");function ne(){se.callApi({course_id:n.params.courseId}).then(d=>{var w,f,y;let v=(f=(w=d==null?void 0:d.data)==null?void 0:w.plan)==null?void 0:f.courses;J.value=(y=v==null?void 0:v.find(u=>(u==null?void 0:u.Id)==n.params.courseId))==null?void 0:y.ristriction_on_course,new b("get_course").callApi({course_id:J.value||""}).then(u=>{var l,o;Y.value=i((o=(l=u==null?void 0:u.data)==null?void 0:l.course)==null?void 0:o.title)||""}),new b("get_enrollment").callApi({course_id:J.value||""}).then(u=>{var l,o,g,N,j;((o=(l=u==null?void 0:u.data)==null?void 0:l.enrollment)==null?void 0:o.is_completed)==!1?U.value=!0:h.push(`/viewCoursePage/${n.params.courseId}/${X.value}/${(j=(N=(g=c.value)==null?void 0:g.chapters[0])==null?void 0:N.materials[0])==null?void 0:j.Id}`)})})}return(d,v)=>{var w,f,y,u,l,o,g,N,j,Z;return r(),_(L,null,[I(ce),t("div",Qe,[I(ve,{showDialog:R.value,onRemoveDialog:v[0]||(v[0]=K=>{R.value=!1})},null,8,["showDialog"]),I(Oe,{course:Y.value,"show-dialog":U.value,onRemoveDialog:v[1]||(v[1]=K=>U.value=!1)},null,8,["course","show-dialog"]),I(pe,{showDialog:z.value,cost:B.value},null,8,["showDialog","cost"]),I(me,{showDialog:S.value},null,8,["showDialog"]),I(qe,{showDialog:T.value,planId:M.value,childId:(w=e(n).params)==null?void 0:w.childId},null,8,["showDialog","planId","childId"]),I(_e,{showDialog:$.value,onPromoCode:v[2]||(v[2]=K=>{te(K)})},null,8,["showDialog"]),I(Me,{first_lesson_video:q.value,course:c.value,isEnrolled:W.value,userType:(f=e(p).getInfo)==null?void 0:f.userType,notShowButton:((y=e(p).getInfo)==null?void 0:y.userType)=="Parent"&&e(n).params.isEnrolled=="1",onEnroll:oe,onViewMaterial:ne},null,8,["first_lesson_video","course","isEnrolled","userType","notShowButton"]),t("div",We,[((u=P.value)==null?void 0:u.length)>0?(r(),x(Ue,{key:0,chapters:P.value},null,8,["chapters"])):k("",!0),I(ke,{categories:(l=c.value)==null?void 0:l.categories,title:e(i)((o=c.value)==null?void 0:o.title),price:(g=c.value)==null?void 0:g.price,duration:(N=c.value)==null?void 0:N.duration,min_age:(j=c.value)==null?void 0:j.min_age,max_age:(Z=c.value)==null?void 0:Z.max_age},null,8,["categories","title","price","duration","min_age","max_age"])])]),I(de)],64)}}}),ol=A(Xe,[["__scopeId","data-v-bc418aa2"]]);export{ol as default};
