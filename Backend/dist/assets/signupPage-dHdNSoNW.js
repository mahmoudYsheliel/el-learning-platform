import{_ as Q}from"./login-HlRQAw4O.js";import{d as X,a as F,r as m,H as P,c as S,b as d,e as a,t as r,f as l,g as Y,z,A as w,h as ee,i as le,w as ae,s as t,k as o,j as R,o as G,N as te,l as H,m as oe,F as ne,n as se,_ as ie}from"./index-CqL7pmYR.js";import{s as O}from"./index-DG20UZ2w.js";import{s as ue}from"./index-CqUX73Du.js";const de={class:"container"},re={class:"right"},ce={class:"welcome"},me={class:"google-facebook-wrapper"},pe={key:0},ve={class:"wrapper"},fe={class:"gender"},ge={class:"gender",style:{width:"60%"}},he={class:"gender"},_e={class:"gender",style:{width:"60%"}},ye={class:"button"},Ce=X({__name:"signupPage",setup(Ve){const b=le();ae(),F();const f=m(),g=m(),V=m(),p=m("Child"),C=m(),k=m(),h=m(""),_=m(),i=m(""),$=new P("signup");function j(){if(!f.value||!g.value||!V.value||!k.value||!h.value||!_.value)i.value=t(o.dataMissing)??"";else if(g.value!=V.value)i.value=t(o.diffPass)??"";else if(!Z(g.value))i.value=t(o.weakPass)??"";else if(!J(f.value))i.value=t(o.notValidEmail)??"";else if(p.value!="Child"&&p.value!="Parent")i.value=t(o.noRoleSelected)??"";else if(!h.value.startsWith("01")||h.value.length!=11)i.value=t(o.phoneNumberError)??"";else{let u={user:{email:f.value,hashed_pass:g.value,user_type:p.value,birth_day:k.value,phone_number:h.value,gender:_.value,role2:C.value}};$.callApi(u).then(e=>{if(e.msg=="email is already used once")i.value=t(o.emailTaken)??"";else if((e==null?void 0:e.success)==!0){const c=new TextEncoder().encode(f.value),v=String.fromCharCode(...c);b.push(`/verifyEmail/${btoa(v)}`)}})}}const W=u=>{if(console.log(p.value),p.value!="Child"&&p.value!="Parent"){i.value=t(o.noRoleSelected)??"";return}const e=se(u.credential);if(e.email_verified){let y={user:{email:e.email,hashed_pass:"mahmoud2000",user_type:p.value,is_verefied:e.email_verified,first_name:e.given_name,last_name:e.family_name,image:e.picture}};$.callApi(y).then(c=>{if(c.msg=="email is already used once")i.value=t(o.emailTaken)??"";else if((c==null?void 0:c.success)==!0){const v=new P("token"),s=F();v.login(e.email,"mahmoud2000").then(K=>{K.access_token&&new P("personal_info").callApi().then(n=>{var x,A,N,M,D,E,I,U,q,L,T,B;n!=null&&n.success&&(s.addInfo({userType:(A=(x=n==null?void 0:n.data)==null?void 0:x.info)==null?void 0:A.user_type,notifications:[],id:(M=(N=n==null?void 0:n.data)==null?void 0:N.info)==null?void 0:M.id,firstName:(E=(D=n==null?void 0:n.data)==null?void 0:D.info)==null?void 0:E.first_name,lastName:(U=(I=n==null?void 0:n.data)==null?void 0:I.info)==null?void 0:U.last_name,email:(L=(q=n==null?void 0:n.data)==null?void 0:q.info)==null?void 0:L.email,gender:(B=(T=n==null?void 0:n.data)==null?void 0:T.info)==null?void 0:B.gender}),b.push("/"))})})}})}};function Z(u){const e=/[A-Z]/.test(u),y=/[a-z]/.test(u),c=/\d/.test(u),v=u.length>=8;return e&&y&&c&&v}function J(u){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)}return(u,e)=>{const y=R("Options"),c=R("GoogleLogin"),v=R("Divider");return G(),S("main",null,[d(te),d(y),a("div",de,[e[14]||(e[14]=a("div",{class:"left borderRigth"},[a("img",{src:Q,alt:""})],-1)),a("div",re,[a("div",ce,[a("h1",null,r(l(t)(l(o).welcome)),1),a("h1",null,r(l(t)(l(o).traceCommunity)),1)]),a("div",me,[d(c,{callback:W,scope:"profile email https://www.googleapis.com/auth/userinfo.profile"})]),i.value?(G(),S("h4",pe,r(i.value),1)):Y("",!0),a("div",ve,[d(l(H),{style:{width:"100%"},type:"email",class:"input",modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=s=>f.value=s),placeholder:l(t)(l(o).email)},null,8,["modelValue","placeholder"]),d(l(O),{toggleMask:"",modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=s=>g.value=s),placeholder:l(t)(l(o).pass),onChange:e[2]||(e[2]=s=>i.value="")},{header:z(()=>e[12]||(e[12]=[a("h6",null,"Pick a password",-1)])),footer:z(()=>[d(v),e[13]||(e[13]=a("ul",{class:"pl-2 ml-2 mt-0",style:{"line-height":"1.5"}},[a("li",null,"At least one lowercase"),a("li",null,"At least one uppercase"),a("li",null,"At least one numeric"),a("li",null,"Minimum 8 characters")],-1))]),_:1},8,["modelValue","placeholder"]),d(l(O),{class:"input",modelValue:V.value,"onUpdate:modelValue":e[3]||(e[3]=s=>V.value=s),feedback:!1,toggleMask:"",placeholder:l(t)(l(o).confirmPass),onChange:e[4]||(e[4]=s=>i.value="")},null,8,["modelValue","placeholder"]),d(l(ue),{style:{width:"100%"},modelValue:k.value,"onUpdate:modelValue":e[5]||(e[5]=s=>k.value=s),placeholder:l(t)(l(o).childBirthDate)},null,8,["modelValue","placeholder"]),d(l(H),{style:{width:"100%"},type:"email",class:"input",modelValue:h.value,"onUpdate:modelValue":e[6]||(e[6]=s=>h.value=s),placeholder:l(t)(l(o).phone)},null,8,["modelValue","placeholder"]),a("div",fe,[a("h3",null,r(l(t)(l(o).gender))+":",1),a("div",ge,[a("span",{class:w([{role2_selected:_.value=="Male"},"role2"]),onClick:e[7]||(e[7]=s=>_.value="Male")},r(l(t)(l(o).male)),3),a("span",{class:w([{role2_selected:_.value=="Female"},"role2"]),onClick:e[8]||(e[8]=s=>_.value="Female")},r(l(t)(l(o).female)),3)])]),a("div",he,[a("h3",null,r(l(t)(l(o).type))+":",1),a("div",_e,[a("span",{class:w([{role2_selected:C.value=="Parent"},"role2"]),onClick:e[9]||(e[9]=s=>C.value="Parent")},r(l(t)(l(o).parent)),3),a("span",{class:w([{role2_selected:C.value=="Child"},"role2"]),onClick:e[10]||(e[10]=s=>C.value="Child")},r(l(t)(l(o).student)),3)])])]),a("div",ye,[d(l(oe),{onClick:j,label:l(t)(l(o).signup)},null,8,["label"])]),a("p",null,[ee(r(l(t)(l(o).haveAccount))+" ",1),a("strong",{onClick:e[11]||(e[11]=s=>l(b).push("/login")),style:{cursor:"pointer","text-decoration":"underline",color:"var(--accent1)"}},r(l(t)(l(o).login)),1)])])]),d(ne)])}}}),$e=ie(Ce,[["__scopeId","data-v-acc6b23f"]]);export{$e as default};
