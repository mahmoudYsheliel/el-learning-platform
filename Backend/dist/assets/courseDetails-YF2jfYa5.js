import{d as x,c as _,e as t,t as a,f as e,w as L,x as F,h as K,o as d,s as i,k as g,_ as E,G as T,C as V,i as O,b as y,m as G,J as Z,z as ee,g as k,I as ne,a as ae,r as I,H as b,K as ie,E as ue,N as re,F as ce}from"./index-DlHkd-7m.js";import{A as de,E as pe,G as ve,P as me}from"./PromoCodeDialog-BRVe5iJu.js";import{s as ge,a as he}from"./index-BAByULP8.js";const fe={class:"container"},_e={class:"wrapper"},we={class:"wrapper"},Ce={class:"wrapper"},Ie={class:"wrapper"},ye=x({__name:"Information",props:["title","price","categories","min_age","max_age","duration"],setup(n){return(D,c)=>(d(),_("main",null,[t("div",fe,[t("h2",null,a(e(i)(e(g).courseInfo)),1),t("div",_e,[t("h4",null,a(e(i)(e(g).title)),1),t("p",null,a(n.title),1)]),t("div",we,[t("h4",null,a(e(i)(e(g).categories)),1),(d(!0),_(L,null,F(n.categories,s=>(d(),_("p",null,a(e(i)(s.title)),1))),256))]),t("div",Ce,[t("h4",null,[K(a(e(i)(e(g).duration)),1),c[0]||(c[0]=t("i",{class:"pi pi-clock"},null,-1))]),t("p",null,a(n.duration)+" "+a(e(i)(e(g).days)),1)]),t("div",Ie,[t("h4",null,[K(a(e(i)(e(g).price)),1),c[1]||(c[1]=t("i",{class:"pi pi-dollar"},null,-1))]),t("p",null,a(n.price)+" L.E",1)])])]))}}),be=E(ye,[["__scopeId","data-v-c0b38cc4"]]),ke={class:"dialog"},De=x({__name:"CourseBelongsToPlanDialog",props:["showDialog","planId","childId"],setup(n){const D=O(),c=n;return(s,f)=>(d(),T(e(Z),{visible:c.showDialog,"onUpdate:visible":f[1]||(f[1]=u=>c.showDialog=u),modal:"",pt:{root:"border-none",mask:{style:"backdrop-filter: blur(2px)"}}},{container:V(({closeCallback:u})=>[t("div",ke,[t("h2",null,a(e(i)(e(g).courseBelongsToPlan)),1),y(e(G),{label:e(i)(e(g).viewPlans),style:{width:"10rem"},onClick:f[0]||(f[0]=A=>e(D).push(`/plan/${n.planId}/${n.childId}`))},null,8,["label"])])]),_:1},8,["visible"]))}}),$e=E(De,[["__scopeId","data-v-004f4601"]]),qe={class:"course-description"},Pe={class:"head"},Te=["src"],xe={class:"description"},Ee={class:"header"},Ae={key:2,style:{color:"#f33"}},Be={key:0,class:"objectives"},Re=x({__name:"CourseDescribtion",props:["course","isEnrolled","notShowButton","userType"],emits:["enroll","viewMaterial"],setup(n,{emit:D}){return(c,s)=>{var f,u,A,q,B,R,z,P,S,$;return d(),_("div",qe,[t("div",Pe,[t("h1",null,a(e(i)((f=n.course)==null?void 0:f.title)),1)]),t("img",{src:(u=n.course)==null?void 0:u.image,alt:"",class:ee({locked:(A=n.course)==null?void 0:A.is_locked})},null,10,Te),t("div",xe,[t("div",Ee,[t("h2",null,a(e(i)(e(g).courseDescription)),1),!n.isEnrolled&&!n.notShowButton&&!((q=n.course)!=null&&q.is_locked)&&n.userType!=="Admin"?(d(),T(e(G),{key:0,label:e(i)(e(g).enrollNow),onClick:s[0]||(s[0]=()=>{c.$emit("enroll")})},null,8,["label"])):k("",!0),n.isEnrolled&&!n.notShowButton&&!((B=n.course)!=null&&B.is_locked)||n.userType=="Admin"?(d(),T(e(G),{key:1,label:e(i)(e(g).viewMat),onClick:s[1]||(s[1]=()=>{c.$emit("viewMaterial")})},null,8,["label"])):k("",!0),(R=n.course)!=null&&R.is_locked?(d(),_("p",Ae,a(e(i)(e(g).locked)),1)):k("",!0)]),t("p",null,a(e(i)((z=n.course)==null?void 0:z.description)),1)]),((S=(P=n.course)==null?void 0:P.objectives)==null?void 0:S.length)>0?(d(),_("div",Be,[t("h2",null,a(e(i)(e(g).courseObjectives)),1),t("ul",null,[(d(!0),_(L,null,F(($=n.course)==null?void 0:$.objectives,M=>(d(),_("li",null,a(e(i)(M)),1))),256))])])):k("",!0)])}}}),ze=E(Re,[["__scopeId","data-v-d058e86f"]]),Se={class:"card"},Me={style:{display:"flex","padding-left":"2rem",gap:"2rem"}},Ne={key:0},je={key:1},Ve={key:2},Le={style:{padding:"0","margin-block":"0.35rem",color:"var(--accent1)"},class:"m-0"},Fe=x({__name:"CourseMaterial",props:["chapters"],setup(n){return(D,c)=>(d(),_("div",Se,[t("h2",null,a(e(i)(e(g).courseContent)),1),y(e(he),{multiple:!0,activeIndex:[]},{default:V(()=>[(d(!0),_(L,null,F(n.chapters,(s,f)=>(d(),T(e(ge),{key:s.title,pt:{root:{style:"margin-block:0.5rem; border:solid 2px var(--accent1); border-radius:1rem; padding:0.25rem;"}}},{header:V(()=>[t("div",null,[t("h4",null,a(e(i)(s.title)),1),t("div",Me,[s.lessonCount?(d(),_("h5",Ne,a(s.lessonCount)+" "+a(e(i)(e(g).lessons)),1)):k("",!0),s.quizCount?(d(),_("h5",je,a(s.quizCount)+" "+a(e(i)(e(g).quiz)),1)):k("",!0),s.activityCount?(d(),_("h5",Ve,a(s.activityCount)+" "+a(e(i)(e(g).activity)),1)):k("",!0)])])]),default:V(()=>[(d(!0),_(L,null,F(s.materials,u=>(d(),_("p",Le,[t("i",{class:ee(u.icon)},null,2),K(" "+a(u.title),1)]))),256))]),_:2},1024))),128))]),_:1})]))}}),Ge=E(Fe,[["__scopeId","data-v-2b3d0d4a"]]),He={class:"dialog"},Ue=x({__name:"PrequisiteDialog",props:["showDialog","course"],emits:["removeDialog"],setup(n,{emit:D}){O();const c=n;return(s,f)=>(d(),T(e(Z),{visible:c.showDialog,"onUpdate:visible":f[1]||(f[1]=u=>c.showDialog=u),modal:"",pt:{root:"border-none",mask:{style:"backdrop-filter: blur(2px)"}}},{container:V(({closeCallback:u})=>[t("div",He,[t("h2",null,a(e(i)(e(g).courseHasPrequisite))+" "+a(n.course),1),y(e(G),{label:e(i)(e(g).cancell),onClick:f[0]||(f[0]=()=>{s.$emit("removeDialog")})},null,8,["label"])])]),_:1},8,["visible"]))}}),Je=E(Ue,[["__scopeId","data-v-b41bb835"]]),Ke={class:"big-container"},Oe={class:"content"},Qe=x({__name:"courseDetails",setup(n){const D=ne(),c=ae(),s=ue(),f=O(),u=I(),A=new b("get_course"),q=I([]);A.callApi({course_id:s.params.courseId}).then(m=>{var r,w;u.value=(r=m==null?void 0:m.data)==null?void 0:r.course;for(let p of(w=u.value)==null?void 0:w.chapters){let v={title:"",lessonCount:0,quizCount:0,activityCount:0,materials:[]};v.title=p==null?void 0:p.title;for(let l of p==null?void 0:p.materials){for(let o of ie)(l==null?void 0:l.type)==o.name&&v.materials.push({title:i(l.title),icon:o.icon});(l==null?void 0:l.type)==="Lesson"&&(v.lessonCount=v.lessonCount+1),(l==null?void 0:l.type)==="Quiz"&&(v.quizCount=v.quizCount+1),((l==null?void 0:l.type)==="Activity"||(l==null?void 0:l.type)==="Project"||(l==null?void 0:l.type)==="Simulation")&&(v.activityCount=v.activityCount+1)}q.value.push(v)}});const B=I(),R=I(!1),z=I(!1),P=I(!1),S=I(!1),$=I(!1),M=I(),H=I(!1);function le(){var m,r,w,p,v;D.getIsAuthorized?((m=c.getInfo)==null?void 0:m.userType)=="Child"?new b("get_course_plan").callApi({course_id:(r=s.params)==null?void 0:r.courseId}).then(o=>{var h,C;(o==null?void 0:o.success)==!1?$.value=!0:(o==null?void 0:o.success)==!0&&(P.value=!0,M.value=(C=(h=o==null?void 0:o.data)==null?void 0:h.plan)==null?void 0:C.id)}):((w=c.getInfo)==null?void 0:w.userType)=="Parent"&&(((p=s.params)==null?void 0:p.childId)=="0"?S.value=!0:new b("get_course_plan").callApi({course_id:(v=s.params)==null?void 0:v.courseId}).then(o=>{var h,C;(o==null?void 0:o.success)==!1?$.value=!0:(o==null?void 0:o.success)==!0&&(P.value=!0,M.value=(C=(h=o==null?void 0:o.data)==null?void 0:h.plan)==null?void 0:C.id)})):f.push("/login")}function oe(m){var p,v,l;$.value=!1;let r;((p=c.getInfo)==null?void 0:p.userType)=="Parent"?r=s.params.childId??"":((v=c.getInfo)==null?void 0:v.userType)=="Child"&&(r=c.getInfo.id),new b("request_enrollment").callApi({request:{student_id:r,course_id:(l=u.value)==null?void 0:l.id,promo_code:m}}).then(o=>{var h,C;o!=null&&o.success&&(B.value=(C=(h=o==null?void 0:o.data)==null?void 0:h.request)==null?void 0:C.price,z.value=!0)})}const Q=I(!1),W=I();new b("get_enrollment").callApi({course_id:s.params.courseId}).then(m=>{var r,w,p;(r=m==null?void 0:m.data)!=null&&r.enrollment&&(Q.value=!0,W.value=(p=(w=m==null?void 0:m.data)==null?void 0:w.enrollment)==null?void 0:p.id)});const U=I(""),X=I(""),te=new b("get_course_plan");function se(){te.callApi({course_id:s.params.courseId}).then(m=>{var w,p,v;let r=(p=(w=m==null?void 0:m.data)==null?void 0:w.plan)==null?void 0:p.courses;U.value=(v=r==null?void 0:r.find(l=>(l==null?void 0:l.Id)==s.params.courseId))==null?void 0:v.ristriction_on_course,new b("get_course").callApi({course_id:U.value||""}).then(l=>{var o,h;X.value=i((h=(o=l==null?void 0:l.data)==null?void 0:o.course)==null?void 0:h.title)||""}),new b("get_enrollment").callApi({course_id:U.value||""}).then(l=>{var o,h,C,N,j;((h=(o=l==null?void 0:l.data)==null?void 0:o.enrollment)==null?void 0:h.is_completed)==!1?H.value=!0:f.push(`/viewCoursePage/${s.params.courseId}/${W.value}/${(j=(N=(C=u.value)==null?void 0:C.chapters[0])==null?void 0:N.materials[0])==null?void 0:j.Id}`)})})}return(m,r)=>{var w,p,v,l,o,h,C,N,j,Y;return d(),_(L,null,[y(re),t("div",Ke,[y(de,{showDialog:R.value,onRemoveDialog:r[0]||(r[0]=J=>{R.value=!1})},null,8,["showDialog"]),y(Je,{course:X.value,"show-dialog":H.value,onRemoveDialog:r[1]||(r[1]=J=>H.value=!1)},null,8,["course","show-dialog"]),y(pe,{showDialog:z.value,cost:B.value},null,8,["showDialog","cost"]),y(ve,{showDialog:S.value},null,8,["showDialog"]),y($e,{showDialog:P.value,planId:M.value,childId:(w=e(s).params)==null?void 0:w.childId},null,8,["showDialog","planId","childId"]),y(me,{showDialog:$.value,onPromoCode:r[2]||(r[2]=J=>{oe(J)})},null,8,["showDialog"]),y(ze,{course:u.value,isEnrolled:Q.value,userType:(p=e(c).getInfo)==null?void 0:p.userType,notShowButton:((v=e(c).getInfo)==null?void 0:v.userType)=="Parent"&&e(s).params.isEnrolled=="1",onEnroll:le,onViewMaterial:se},null,8,["course","isEnrolled","userType","notShowButton"]),t("div",Oe,[((l=q.value)==null?void 0:l.length)>0?(d(),T(Ge,{key:0,chapters:q.value},null,8,["chapters"])):k("",!0),y(be,{categories:(o=u.value)==null?void 0:o.categories,title:e(i)((h=u.value)==null?void 0:h.title),price:(C=u.value)==null?void 0:C.price,duration:(N=u.value)==null?void 0:N.duration,min_age:(j=u.value)==null?void 0:j.min_age,max_age:(Y=u.value)==null?void 0:Y.max_age},null,8,["categories","title","price","duration","min_age","max_age"])])]),y(ce)],64)}}}),el=E(Qe,[["__scopeId","data-v-73ead709"]]);export{el as default};
