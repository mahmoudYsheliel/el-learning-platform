import{d as D,c as a,b as A,e as m,t as k,f as e,h as Y,g as c,o as s,al as K,s as q,k as $,m as E,_ as R,r as b,a1 as ee,am as te,u as Z,D as X,Y as se,v as L,w as B,G as H,Z as I,y as G,H as J,a7 as U,C as ne,E as ie,J as ae}from"./index-B34PUY2Y.js";const oe={class:"container"},le={key:0},ue={class:"button-container"},re=D({__name:"Introduction",props:["title","description","duration","sectionsTitles"],emits:["startQuiz"],setup(n){return(T,r)=>(s(),a("div",oe,[A(K),m("h1",null,k(e(q)(n.title)),1),m("h3",null,k(e(q)(n.description)),1),m("h3",null,[Y(k(e(q)(e($).durationOfTest))+" ",1),m("strong",null,[Y(k(Math.floor(n.duration/60))+":",1),n.duration%60<10?(s(),a("strong",le,"0")):c("",!0),Y(k(n.duration%60)+" "+k(e(q)(e($).minutes)),1)])]),m("div",ue,[A(e(E),{label:e(q)(e($).startAnalysisQuiz),onClick:r[0]||(r[0]=()=>{T.$emit("startQuiz")})},null,8,["label"])])]))}}),de=R(re,[["__scopeId","data-v-a811fb54"]]),ce=["width","height"],ve=D({__name:"CountDown",props:{width:{type:Number,default:75},height:{type:Number,default:75},totalTime:{type:Number,default:300},lineWidth:{type:Number,default:10},strokeStyle:{type:String,default:"#01abff"},backgroundColor:{type:String,default:"#fff"},textColor:{type:String,default:"#01abff"},fontSize:{type:Number,default:20},source:{type:String,default:"/images/jerryFace.jpeg"}},emits:["timeOver"],setup(n,{emit:T}){const r=n,h=T,g=b(r.totalTime);setInterval(()=>{g.value-=1,g.value==0&&h("timeOver")},1e3);const S=b(),w=()=>{const d=S.value;if(!d)return;const t=d.getContext("2d"),Q=d.width/2,j=d.height/2,M=Math.min(Q,j)-r.lineWidth,y=-Math.PI/2,v=y+2*Math.PI*(g.value/r.totalTime);t.clearRect(0,0,d.width,d.height),t.fillStyle=r.backgroundColor,t.fillRect(0,0,d.width,d.height),t.beginPath(),t.arc(Q,j,M,y,v,!1),t.lineWidth=r.lineWidth,t.strokeStyle=r.strokeStyle,t.stroke(),t.fillStyle=r.textColor,t.font=`${r.fontSize}px Arial`,t.textAlign="center",t.textBaseline="middle";const i=new Image;i.src=r.source,i.onload=function(){const o=r.width/2,u=r.height/2,p=Math.sqrt(r.width*r.height*2)/3;t.save(),t.beginPath(),t.arc(o,u,p,y,v,!1),t.lineTo(o,u),t.closePath(),t.clip(),t.drawImage(i,o-p,u-p,p*2,p*2),t.restore()}};return ee(w),te(w),(d,t)=>(s(),a("div",null,[m("canvas",{ref_key:"canvas",ref:S,width:n.width,height:n.height},null,8,ce)]))}}),me=R(ve,[["__scopeId","data-v-64900ae1"]]),he={class:"container"},ge={style:{display:"flex","justify-content":"space-between"}},fe={class:"question-container"},ye={class:"question"},_e={key:0,class:"question-text"},we=["src"],pe=["src"],ke={class:"image_container"},qe=["src"],be={key:1,class:"question-text"},Se={key:0},xe={key:1},Te={key:2,class:"image_container"},ze={style:{width:"32%"}},$e=["src"],Ce={key:3,class:"image_container"},Ne={style:{width:"32%"}},Qe=["src"],je={key:2,class:"choices-wrapper"},Oe=["onClick"],Ie=["src"],Ae={class:"button-container"},Me=D({__name:"Section",props:["showNext","question","answers","selectedQuestionOrder","sectionName","audio_link","duration","questionType"],emits:["next","answer","timeOver","finish"],setup(n){const T=Z(),r=n,h=X(()=>r.selectedQuestionOrder),g=b();setTimeout(()=>{var v,i;g.value=(i=(v=r.question)==null?void 0:v.image)==null?void 0:i.split(",")},1),se(h,(v,i)=>{g.value=[],setTimeout(()=>{var o,u;g.value=(u=(o=r.question)==null?void 0:o.image)==null?void 0:u.split(",")},1),y.value="show image",r.questionType=="Symbol Search"&&setTimeout(()=>{y.value="show options"},3e3)});function S(){window.scrollTo({top:0,left:0,behavior:"smooth"})}const w=b(!1);let d=b(-1),t=0;function Q(){w.value=!0,d.value=Math.floor(Math.random()*7),setTimeout(()=>{d.value=-1},2500),t=Math.random()*80+10}const j=X(()=>{var v;return M(q((v=r.question)==null?void 0:v.question))});function M(v){return v?v.split("_____"):"invalid"}const y=b("show image");return(v,i)=>{var o,u,p,C;return s(),a("div",he,[m("div",ge,[m("h3",null,k(n.selectedQuestionOrder+1)+" / "+k((o=n.answers)==null?void 0:o.length),1),A(me,{onTimeOver:i[0]||(i[0]=()=>{v.$emit("timeOver")}),totalTime:n.duration},null,8,["totalTime"])]),m("div",fe,[m("div",ye,[n.questionType!="Symbol Search"?(s(),a("div",_e,[m("h1",null,k(e(q)((u=n.question)==null?void 0:u.question)),1),m("audio",{src:n.audio_link,autoplay:""},[m("source",{src:n.audio_link},null,8,pe)],8,we),m("div",ke,[((p=n.question)==null?void 0:p.image)!=null?(s(!0),a(L,{key:0},B(g.value,l=>{var _;return s(),a("img",{class:G({image2:((_=g.value)==null?void 0:_.length)>1}),src:l,alt:""},null,10,qe)}),256)):c("",!0)])])):c("",!0),n.questionType=="Symbol Search"?(s(),a("div",be,[y.value=="show image"?(s(),a("h1",Se,k(j.value[0]),1)):c("",!0),y.value=="show options"?(s(),a("h1",xe,k(j.value[1]),1)):c("",!0),y.value=="show image"?(s(),a("div",Te,[(s(!0),a(L,null,B(g.value,(l,_)=>(s(),a("span",ze,[_<2?(s(),a("img",{key:0,class:"image2",style:{width:"100%"},src:l,alt:""},null,8,$e)):c("",!0)]))),256))])):c("",!0),y.value=="show options"?(s(),a("div",Ce,[(s(!0),a(L,null,B(g.value,(l,_)=>(s(),a("span",Ne,[_>1?(s(),a("img",{key:0,style:{width:"100%"},class:"image2",src:l,alt:""},null,8,Qe)):c("",!0)]))),256))])):c("",!0)])):c("",!0),y.value=="show image"&&n.questionType=="Symbol Search"?c("",!0):(s(),a("div",je,[(s(!0),a(L,null,B((C=n.question)==null?void 0:C.choices,l=>{var _;return s(),a("p",{class:G(["choice-text",{selectedChoice:(_=n.answers)==null?void 0:_.some(f=>{var N;return(f==null?void 0:f.sub_section_name)==n.sectionName&&(f==null?void 0:f.question_id)==((N=n.question)==null?void 0:N.id)&&(f==null?void 0:f.choice_id)==(l==null?void 0:l.id)})}]),key:l,onClick:()=>{var f;v.$emit("answer",{section_name:n.sectionName,question_id:(f=n.question)==null?void 0:f.id,choice_id:l==null?void 0:l.id})}},[m("span",null,k(e(q)(l==null?void 0:l.choice)),1),l!=null&&l.image?(s(),a("img",{key:0,src:l==null?void 0:l.image,class:"image_choice",alt:""},null,8,Ie)):c("",!0)],10,Oe)}),128))]))])]),m("div",Ae,[!(n.questionType=="Symbol Search"&&y.value=="show image")&&e(T).getLang=="en"?(s(),H(e(E),{key:0,label:e(q)(e($).next),onClick:i[1]||(i[1]=()=>{Q(),S(),n.showNext?v.$emit("next"):v.$emit("finish")}),icon:"pi pi-arrow-right",iconPos:"right"},null,8,["label"])):c("",!0),!(n.questionType=="Symbol Search"&&y.value=="show image")&&e(T).getLang=="ar"?(s(),H(e(E),{key:1,label:e(q)(e($).next),onClick:i[2]||(i[2]=()=>{Q(),S(),n.showNext?v.$emit("next"):v.$emit("finish")}),icon:"pi pi-arrow-left",iconPos:"right"},null,8,["label"])):c("",!0)]),e(d)==0?(s(),a("span",{key:0,style:I({left:e(t).toString()+"vw"}),class:"emoj"},"😀",4)):c("",!0),e(d)==1?(s(),a("span",{key:1,style:I({left:e(t).toString()+"vw"}),class:"emoj"},"😁",4)):c("",!0),e(d)==2?(s(),a("span",{key:2,style:I({left:e(t).toString()+"vw"}),class:"emoj"},"😉",4)):c("",!0),e(d)==3?(s(),a("span",{key:3,style:I({left:e(t).toString()+"vw"}),class:"emoj"},"😎",4)):c("",!0),e(d)==4?(s(),a("span",{key:4,style:I({left:e(t).toString()+"vw"}),class:"emoj"},"😍",4)):c("",!0),e(d)==5?(s(),a("span",{key:5,style:I({left:e(t).toString()+"vw"}),class:"emoj"},"😘",4)):c("",!0),e(d)==6?(s(),a("span",{key:6,style:I({left:e(t).toString()+"vw"}),class:"emoj"},"🥳",4)):c("",!0)])}}}),Pe=R(Me,[["__scopeId","data-v-b679fb1a"]]),Ee={class:"wrapper"},Le={style:{display:"flex","flex-direction":"column","align-items":"center",gap:"2rem","padding-inline":"5rem","padding-top":"2rem"}},Be={key:1,class:"section-wrapper"},De={class:"section"},Re=D({__name:"analysisQuiz",setup(n){const T=ie(),r=new J("get_analysis_quiz"),h=b({title:null,description:null,duration:null,questions:[]}),g=b(),S=b([]),w=b(0),d=b(!1),t=b(!1);r.callApi({analysis_quiz_id:T.params.quizId}).then(i=>{var o,u,p,C,l,_,f,N,z;if(i.msg=="Quiz Taken Before"){U.push("/childNotifications");return}g.value=(o=i==null?void 0:i.data)==null?void 0:o.analysis_quiz,h.value.description=(u=g.value)==null?void 0:u.description,h.value.title=(p=g.value)==null?void 0:p.title,h.value.duration=(C=g.value)==null?void 0:C.duration;for(let W=0;W<((_=(l=g.value)==null?void 0:l.sections)==null?void 0:_.length);W++){let P=(f=g.value)==null?void 0:f.sections[W];for(let F=0;F<((N=P==null?void 0:P.sub_sections)==null?void 0:N.length);F++){let x=P==null?void 0:P.sub_sections[F];for(let V=0;V<((z=x==null?void 0:x.questions)==null?void 0:z.length);V++){let O=x.questions[V];h.value.questions.push({question:O,section_name:x==null?void 0:x.info_name,order:h.value.questions.length,audio_link:O==null?void 0:O.audio_link}),S.value.push({sub_section_name:x==null?void 0:x.info_name,question_id:O==null?void 0:O.id,choice_id:-1})}}}});function Q(){t.value=!0}function j(i){let o=S.value.find(u=>(u==null?void 0:u.question_id)==i.question_id&&(u==null?void 0:u.sub_section_name)==i.section_name);o.choice_id=i==null?void 0:i.choice_id}function M(){const i=new J("add_analysis_quiz_answer");let o={answers:{quiz_id:T.params.quizId,answers:S.value}};i.callApi(o).then(u=>{u!=null&&u.success&&(d.value=!0)})}const y=Z();function v(i){i=="English"&&y.setLang("en"),i=="العربية"&&y.setLang("ar")}return(i,o)=>{var u,p,C,l,_,f,N;return s(),a("div",Ee,[A(e(ae),{style:{"max-width":"80%"},visible:d.value,"onUpdate:visible":o[1]||(o[1]=z=>d.value=z),modal:"",pt:{mask:{style:"backdrop-filter: blur(2px)"},header:{style:"display:none"},content:{style:"margin-block:auto; display: flex; flex-direction: column; align-items: center; justify-content: center;"}}},{default:ne(()=>[m("div",Le,[m("h3",null,k(e(q)(e($).wellDone)),1),m("h3",null,k(e(q)(e($).logWithParent)),1),A(e(E),{label:e(q)(e($).results),onClick:o[0]||(o[0]=z=>e(U).push("/viewChildAnalysis"))},null,8,["label"])])]),_:1},8,["visible","pt"]),t.value?c("",!0):(s(),H(de,{key:0,title:(u=h.value)==null?void 0:u.title,description:(p=h.value)==null?void 0:p.description,duration:(C=h.value)==null?void 0:C.duration,onStartQuiz:Q},null,8,["title","description","duration"])),t.value?(s(),a("div",Be,[m("div",De,[A(Pe,{"question-type":(l=h.value.questions[w.value])==null?void 0:l.section_name,"show-next":h.value.questions.length!=w.value+1,"show-previous":w.value!=0,question:(_=h.value.questions[w.value])==null?void 0:_.question,sectionName:(f=h.value.questions[w.value])==null?void 0:f.section_name,selectedQuestionOrder:w.value,answers:S.value,audio_link:(N=h.value.questions[w.value])==null?void 0:N.audio_link,duration:h.value.duration,onNext:o[2]||(o[2]=z=>w.value++),onPrevious:o[3]||(o[3]=z=>w.value--),onAnswer:o[4]||(o[4]=z=>{j(z)}),onTimeOver:M,onFinish:M},null,8,["question-type","show-next","show-previous","question","sectionName","selectedQuestionOrder","answers","audio_link","duration"])])])):c("",!0),A(e(E),{class:"lang_button",onClick:o[5]||(o[5]=()=>{v(e(q)(e($).language))}),icon:"pi pi-language"})])}}}),Fe=R(Re,[["__scopeId","data-v-412fdc2d"]]);export{Fe as default};
