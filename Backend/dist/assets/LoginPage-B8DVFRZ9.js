import{_ as S}from"./login-HlRQAw4O.js";import{d as j,u as z,a as $,r as V,H as R,c as q,b as c,e as l,t as d,f as t,g as B,h as J,i as K,j as D,o as r,N as Q,s,k as u,l as W,m as X,F as Y,n as Z,_ as oo}from"./index-CqL7pmYR.js";import{s as ao}from"./index-DG20UZ2w.js";const to={class:"container"},no={class:"right"},eo={class:"welcome"},io={class:"google-facebook-wrapper"},lo={key:0},so={key:1},uo={key:2},co={class:"wrapper"},fo={class:"button"},po=j({__name:"LoginPage",setup(mo){z();const x=K(),F=$(),b=V(),w=V(),A=V(!1),C=V(!1),E=V(!1),G=new R("token");function H(){!b.value||!w.value?A.value=!0:G.login(b.value,w.value).then(e=>{(e==null?void 0:e.msg)=="no such user"?C.value=!0:(e==null?void 0:e.msg)=="user not verified"?E.value=!0:e!=null&&e.access_token&&new R("personal_info").callApi().then(o=>{var f,i,L,a,p,m,_,g,v,h,k,y,N,I;o!=null&&o.success&&(F.addInfo({userType:(i=(f=o==null?void 0:o.data)==null?void 0:f.info)==null?void 0:i.user_type,notifications:(a=(L=o==null?void 0:o.data)==null?void 0:L.info)==null?void 0:a.notifications,id:(m=(p=o==null?void 0:o.data)==null?void 0:p.info)==null?void 0:m.id,firstName:(g=(_=o==null?void 0:o.data)==null?void 0:_.info)==null?void 0:g.first_name,lastName:(h=(v=o==null?void 0:o.data)==null?void 0:v.info)==null?void 0:h.last_name,email:(y=(k=o==null?void 0:o.data)==null?void 0:k.info)==null?void 0:y.email,gender:(I=(N=o==null?void 0:o.data)==null?void 0:N.info)==null?void 0:I.gender}),x.push("/"))})})}const O=e=>{const n=Z(e.credential);if(n.email_verified,n.email_verified){const o=new R("token"),f=$();o.login(n.email,"mahmoud2000").then(i=>{(i==null?void 0:i.msg)=="no such user"?C.value=!0:i.access_token&&new R("personal_info").callApi().then(a=>{var p,m,_,g,v,h,k,y,N,I,M,P,T,U;a!=null&&a.success&&(f.addInfo({userType:(m=(p=a==null?void 0:a.data)==null?void 0:p.info)==null?void 0:m.user_type,notifications:(g=(_=a==null?void 0:a.data)==null?void 0:_.info)==null?void 0:g.notifications,id:(h=(v=a==null?void 0:a.data)==null?void 0:v.info)==null?void 0:h.id,firstName:(y=(k=a==null?void 0:a.data)==null?void 0:k.info)==null?void 0:y.first_name,lastName:(I=(N=a==null?void 0:a.data)==null?void 0:N.info)==null?void 0:I.last_name,email:(P=(M=a==null?void 0:a.data)==null?void 0:M.info)==null?void 0:P.email,gender:(U=(T=a==null?void 0:a.data)==null?void 0:T.info)==null?void 0:U.gender}),x.push("/"))})})}};return(e,n)=>{const o=D("Options"),f=D("GoogleLogin");return r(),q("main",null,[c(Q),c(o),l("div",to,[n[3]||(n[3]=l("div",{class:"left borderRigth"},[l("img",{src:S,alt:""})],-1)),l("div",no,[l("div",eo,[l("h1",null,d(t(s)(t(u).welcomeBack)),1),l("h1",null,d(t(s)(t(u).traceCommunity)),1)]),l("div",io,[c(f,{callback:O})]),A.value?(r(),q("h4",lo,d(t(s)(t(u).dataMissing)),1)):B("",!0),C.value?(r(),q("h4",so,d(t(s)(t(u).userNotExist)),1)):B("",!0),E.value?(r(),q("h4",uo,d(t(s)(t(u).verifyEmail)),1)):B("",!0),l("div",co,[c(t(W),{style:{width:"100%"},type:"email",class:"input",modelValue:b.value,"onUpdate:modelValue":n[0]||(n[0]=i=>b.value=i),placeholder:t(s)(t(u).email)},null,8,["modelValue","placeholder"]),c(t(ao),{class:"input",modelValue:w.value,"onUpdate:modelValue":n[1]||(n[1]=i=>w.value=i),feedback:!1,toggleMask:"",placeholder:t(s)(t(u).pass)},null,8,["modelValue","placeholder"])]),l("div",fo,[c(t(X),{onClick:H,label:t(s)(t(u).login)},null,8,["label"])]),l("p",null,[J(d(t(s)(t(u).noAccount))+" ",1),l("strong",{onClick:n[2]||(n[2]=i=>t(x).push("/signup")),style:{cursor:"pointer","text-decoration":"underline",color:"var(--accent1)"}},d(t(s)(t(u).signup)),1)])])]),c(Y)])}}}),ho=oo(po,[["__scopeId","data-v-819a48f2"]]);export{ho as default};
