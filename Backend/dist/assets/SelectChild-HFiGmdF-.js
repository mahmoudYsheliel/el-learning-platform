import{d as j,r as T,H as k,c as w,e as p,b as x,f as _,t as R,g as E,i as M,q as O,a as P,o as I,s as V,k as B,m as U,_ as z}from"./index-wyPhXuOe.js";import{s as F}from"./index-DZls2ysh.js";const G={class:"container"},J={key:0,class:"selectedChildInfo"},K={class:"info"},Q={class:"childImage"},W=["src"],X={key:1,class:"pi pi-user"},Y={class:"childInfo"},Z={style:{color:"var(--accent1)",margin:"0","line-height":"2rem","padding-top":"0.5rem"}},tt={style:{color:"var(--text)",margin:"0","line-height":"0.75rem"}},at=j({__name:"SelectChild",emits:["selectedChild"],setup(et,{emit:$}){const D=$,y=T([]),a=T(null);new k("get_all_program").callApi().then(s=>{var i;const e=(i=s==null?void 0:s.data)==null?void 0:i.program;new k("personal_info").callApi().then(l=>{var u,h,t,d;if((h=(u=l==null?void 0:l.data)==null?void 0:u.info)!=null&&h.children)for(let c of(d=(t=l==null?void 0:l.data)==null?void 0:t.info)==null?void 0:d.children)new k("personal_another_user_info").callApi({another_userId:c}).then(o=>{var m,g,v,r,C;if((m=o==null?void 0:o.data)!=null&&m.info){let n=(g=o==null?void 0:o.data)==null?void 0:g.info;n.id=c,n.child_group_image=(v=e.find(f=>f.id==n.child_group))==null?void 0:v.image,n.child_group=(r=e.find(f=>f.id==n.child_group))==null?void 0:r.title,y.value.push(n),a.value||(a.value=y.value[0],D("selectedChild",(C=a.value)==null?void 0:C.id))}})})});const H=M();function L(s){const e=O();new k("switch_to_child").callApi({child_id:s}).then(i=>{var l;if(i!=null&&i.success){e.logout(),e.addToken((l=i==null?void 0:i.data)==null?void 0:l.access_token);const u=new k("personal_info"),h=P();u.callApi().then(t=>{var d,c,b,o,m,g,v,r,C,n,f,A,N,S;t!=null&&t.success&&(h.addInfo({userType:(c=(d=t==null?void 0:t.data)==null?void 0:d.info)==null?void 0:c.user_type,notifications:(o=(b=t==null?void 0:t.data)==null?void 0:b.info)==null?void 0:o.notifications,id:(g=(m=t==null?void 0:t.data)==null?void 0:m.info)==null?void 0:g.id,firstName:(r=(v=t==null?void 0:t.data)==null?void 0:v.info)==null?void 0:r.first_name,lastName:(n=(C=t==null?void 0:t.data)==null?void 0:C.info)==null?void 0:n.last_name,email:(A=(f=t==null?void 0:t.data)==null?void 0:f.info)==null?void 0:A.email,gender:(S=(N=t==null?void 0:t.data)==null?void 0:N.info)==null?void 0:S.gender}),H.push("/"))})}})}return(s,e)=>{var q,i,l,u,h,t;return I(),w("main",null,[p("div",G,[x(_(F),{onChange:e[0]||(e[0]=d=>{var c;return s.$emit("selectedChild",(c=a.value)==null?void 0:c.id)}),modelValue:a.value,"onUpdate:modelValue":e[1]||(e[1]=d=>a.value=d),options:y.value,optionLabel:"email",placeholder:_(V)(_(B).selectChild),class:"dropDown"},null,8,["modelValue","options","placeholder"]),a.value?(I(),w("div",J,[p("div",K,[p("div",Q,[((q=a.value)==null?void 0:q.image)!=""?(I(),w("img",{key:0,src:(i=a.value)==null?void 0:i.image,alt:""},null,8,W)):(I(),w("i",X))]),p("div",Y,[p("h2",Z,R((l=a.value)==null?void 0:l.first_name)+" "+R((u=a.value)==null?void 0:u.last_name),1),p("p",tt,R((h=a.value)==null?void 0:h.email),1),p("h3",null,R(_(V)((t=a.value)==null?void 0:t.child_group)),1)])]),x(_(U),{label:_(V)(_(B).switchToChild),onClick:e[2]||(e[2]=()=>{L(a.value.id)})},null,8,["label"])])):E("",!0)])])}}}),nt=z(at,[["__scopeId","data-v-b014a752"]]);export{nt as S};
