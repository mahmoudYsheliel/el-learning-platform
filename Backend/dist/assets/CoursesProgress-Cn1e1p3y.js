import{d as J,r as O,L as K,c as _,e as t,b as Q,z as D,f as o,h as L,t as l,C as N,H as X,o as a,D as Y,y as se,s as i,k as g,g as w,_ as U}from"./index-Bj9u1wIK.js";import{a as b,s as G}from"./index-ju5HW45w.js";const ce={class:"header"},re={style:{color:"var(--accent2)"}},ne={class:"content"},de={class:"chapters"},ie={class:"header"},ae={style:{color:"var(--accent1)"}},ue={style:{color:"var(--accent2)"}},_e={class:"material-content"},he={class:"material"},pe={key:0,class:"lesson"},ve={style:{color:"var(--text)"}},fe={key:0,class:"completed",style:{color:"var(--accent2)"}},ge={style:{color:"var(--text)"}},ye={key:1,class:"lesson"},Ce={style:{color:"var(--text)"}},ke={key:0,class:"completed",style:{color:"var(--accent2)"}},Ie={style:{color:"var(--text)"}},xe={key:2,class:"lesson"},we={style:{color:"var(--text)"}},Ae={key:0,class:"completed",style:{color:"var(--accent2)"}},Re={style:{color:"var(--text)"}},$e={key:3,class:"lesson"},qe={style:{color:"var(--text)"}},Se={key:0,class:"completed",style:{color:"var(--accent2)"}},ze={style:{color:"var(--text)"}},Me={key:4,class:"quiz"},De={class:"quiz-header"},Le={style:{color:"var(--text)"}},Ee={style:{color:"var(--text)"}},Pe={style:{color:"var(--text)"}},Te={class:"quiz-content"},Be={class:"row names"},Ne={style:{color:"var(--text)"}},Oe={style:{color:"var(--text)"}},Ve={style:{color:"var(--text)"}},je={style:{color:"var(--text)"}},Fe={class:"row"},He=J({__name:"ChildProgress",props:["selectedChildId"],setup(B){const C=B,y=O([]),$=O(),V=K(()=>{$.value=[],y.value=[];let h=[];const v=new X("get_child_enrollments");if(C.selectedChildId)return v.callApi({child_id:C.selectedChildId}).then(c=>{var p,e;if((p=c==null?void 0:c.data)!=null&&p.enrollments){h=(e=c==null?void 0:c.data)==null?void 0:e.enrollments,$.value=h;for(let s of h){let A=s==null?void 0:s.course_id;new X("get_course").callApi({course_id:A}).then(u=>{var E,I,x,S,f,P,j,z,W,Z,m,ee,te;if(u!=null&&u.success){let F={courseTitle:(I=(E=u==null?void 0:u.data)==null?void 0:E.course)==null?void 0:I.title,chapters:[],percentage:0};for(let R of(x=u==null?void 0:u.data)==null?void 0:x.course.chapters){let M={title:R==null?void 0:R.title,material:[],progress:0};for(let d of R==null?void 0:R.materials){let k={title:d==null?void 0:d.title,progress:[],type:d==null?void 0:d.type};if(d.type=="Lesson"){if((S=s==null?void 0:s.progress)!=null&&S.lessons_completed)for(let r of(f=s==null?void 0:s.progress)==null?void 0:f.lessons_completed)(r==null?void 0:r.lesson_id)==d.Id&&k.progress.push(r)}else if(d.type=="Simulation"){if((P=s==null?void 0:s.progress)!=null&&P.simulations_completed)for(let r of(j=s==null?void 0:s.progress)==null?void 0:j.simulations_completed)(r==null?void 0:r.simulation_id)==d.Id&&k.progress.push(r)}else if(d.type=="Project"){if((z=s==null?void 0:s.progress)!=null&&z.projects_completed)for(let r of(W=s==null?void 0:s.progress)==null?void 0:W.projects_completed)(r==null?void 0:r.project_id)==d.Id&&k.progress.push(r)}else if(d.type=="Activity"){if((Z=s==null?void 0:s.progress)!=null&&Z.activities_completed)for(let r of(m=s==null?void 0:s.progress)==null?void 0:m.activities_completed)(r==null?void 0:r.activity_id)==d.Id&&k.progress.push(r)}else if(d.type=="Quiz"&&(ee=s==null?void 0:s.progress)!=null&&ee.quizes_completed)for(let r of(te=s==null?void 0:s.progress)==null?void 0:te.quizes_completed)(r==null?void 0:r.quiz_id)==d.Id&&k.progress.push(r);M.material.push(k)}let H=M.material.reduce((d,k)=>{var r;return(r=k==null?void 0:k.progress)!=null&&r.length?d+1:d},0),T=M.material.length;M.progress=Math.floor(100*H/T),F.chapters.push(M)}let oe=F.chapters.reduce((R,M)=>{const H=M.material.reduce((T,d)=>{var k;return(k=d==null?void 0:d.progress)!=null&&k.length?T+1:T},0);return R+H},0),le=F.chapters.reduce((R,M)=>{var T;const H=(T=M.material)==null?void 0:T.length;return R+H},0);F.percentage=Math.floor(oe*100/le),y.value.push(F)}})}}}),null});function n(h){const v=new Date(h),c=v.getFullYear(),p=(v.getMonth()+1).toString().padStart(2,"0"),e=v.getDate().toString().padStart(2,"0");return`${c}-${p}-${e}`}return(h,v)=>(a(),_(N,null,[t("main",null,[Q(o(b),null,{default:D(()=>[(a(!0),_(N,null,Y(y.value,c=>(a(),se(o(G),{key:c.courseTitle},{header:D(()=>[t("div",ce,[t("h2",null,l(o(i)(c.courseTitle)),1),t("h2",re,l(o(i)(o(g).completed))+" "+l(c.percentage)+" % ",1)])]),default:D(()=>[t("div",ne,[t("div",de,[Q(o(b),null,{default:D(()=>[(a(!0),_(N,null,Y(c.chapters,p=>(a(),se(o(G),{key:p.title},{header:D(()=>[t("div",ie,[t("h3",ae,l(o(i)(p.title)),1),t("h3",ue,l(o(i)(o(g).completed))+" "+l(p.progress)+" % ",1)])]),default:D(()=>[t("div",_e,[(a(!0),_(N,null,Y(p.material,e=>{var s,A,q,u,E,I,x,S;return a(),_("div",he,[(e==null?void 0:e.type)=="Lesson"?(a(),_("div",pe,[t("h4",ve,l(o(i)(e.title)),1),(s=e==null?void 0:e.progress[0])!=null&&s.completed_at?(a(),_("div",fe,[t("span",ge,l(o(i)(o(g).completedAt)),1),L(" "+l(n((A=e==null?void 0:e.progress[0])==null?void 0:A.completed_at)),1)])):w("",!0)])):w("",!0),(e==null?void 0:e.type)=="Simulation"?(a(),_("div",ye,[t("h4",Ce,l(o(i)(e.title)),1),(q=e==null?void 0:e.progress[0])!=null&&q.completed_at?(a(),_("div",ke,[t("span",Ie,l(o(i)(o(g).completedAt)),1),L(" "+l(n((u=e==null?void 0:e.progress[0])==null?void 0:u.completed_at)),1)])):w("",!0)])):w("",!0),(e==null?void 0:e.type)=="Project"?(a(),_("div",xe,[t("h4",we,l(o(i)(e.title)),1),(E=e==null?void 0:e.progress[0])!=null&&E.completed_at?(a(),_("div",Ae,[t("span",Re,l(o(i)(o(g).completedAt)),1),L(" "+l(n((I=e==null?void 0:e.progress[0])==null?void 0:I.completed_at)),1)])):w("",!0)])):w("",!0),(e==null?void 0:e.type)=="Activity"?(a(),_("div",$e,[t("h4",qe,l(o(i)(e.title)),1),(x=e==null?void 0:e.progress[0])!=null&&x.completed_at?(a(),_("div",Se,[t("span",ze,l(o(i)(o(g).completedAt)),1),L(" "+l(n((S=e==null?void 0:e.progress[0])==null?void 0:S.completed_at)),1)])):w("",!0)])):w("",!0),e.type=="Quiz"?(a(),_("div",Me,[Q(o(b),null,{default:D(()=>[Q(o(G),null,{header:D(()=>{var f,P;return[t("div",De,[t("h4",Le,l(o(i)(e==null?void 0:e.title)),1),t("h4",null,[t("span",Ee,l(o(i)(o(g).heighest)),1),L(" "+l((f=e==null?void 0:e.progress)==null?void 0:f.reduce((j,z)=>(z==null?void 0:z.score_prcentage)>j?z==null?void 0:z.score_prcentage:j,0))+" % ",1)]),t("h4",null,[t("span",Pe,l(o(i)(o(g).nomOfAtts)),1),L(" "+l((P=e==null?void 0:e.progress)==null?void 0:P.length),1)])])]}),default:D(()=>[t("div",Te,[t("div",Be,[t("h5",Ne,l(o(i)(o(g).att)),1),t("h5",Oe,l(o(i)(o(g).score)),1),t("h5",Ve,l(o(i)(o(g).timeToAns)),1),t("h5",je,l(o(i)(o(g).date)),1)]),(a(!0),_(N,null,Y(e==null?void 0:e.progress,(f,P)=>(a(),_("div",Fe,[t("h5",null,l(P+1),1),t("h5",null,l(f==null?void 0:f.score_prcentage)+"%",1),t("h5",null,l(f==null?void 0:f.time_taken)+" sec",1),t("h5",null,l(n(f==null?void 0:f.created_at)),1)]))),256))])]),_:2},1024)]),_:2},1024)])):w("",!0)])}),256))])]),_:2},1024))),128))]),_:2},1024)])])]),_:2},1024))),128))]),_:1})]),L(" "+l(V.value),1)],64))}}),et=U(He,[["__scopeId","data-v-1544786a"]]),Qe={key:0,class:"container"},Ye=["width","height"],be=J({__name:"PiChart",props:{data:{},width:{},height:{},innerRadiusRatio:{}},setup(B){const C=B,y=O(null),$=K(()=>{var n,h,v;if(y.value){const c=y.value.getContext("2d");c&&V(c,C.data,C.width,C.height,C.innerRadiusRatio)}return Math.floor(((n=C.data[0])==null?void 0:n.value)/(((h=C.data[0])==null?void 0:h.value)+((v=C.data[1])==null?void 0:v.value))*100)});function V(n,h,v,c,p){const e=h.reduce((I,x)=>I+x.value,0);let s=1.5*Math.PI;const A=v/2,q=c/2,u=Math.min(v,c)/2,E=u*p;h.forEach(I=>{const x=I.value/e*2*Math.PI;n.beginPath(),n.arc(A,q,u,s,s+x),n.arc(A,q,E,s+x,s,!0),n.closePath();const S=n.createLinearGradient(150,0,0,150);S.addColorStop(0,I.color1),S.addColorStop(1,I.color2),n.fillStyle=S,n.fill(),s+=x})}return(n,h)=>n.data?(a(),_("div",Qe,[t("canvas",{ref_key:"donutChart",ref:y,width:n.width,height:n.height},null,8,Ye),t("h3",null,[t("span",null,l(o(i)(o(g).completed)),1),t("span",null,l($.value)+"%",1)])])):w("",!0)}}),Ge=U(be,[["__scopeId","data-v-3ae7506e"]]),Xe={class:"container",style:{width:"75%","margin-inline":"auto"}},Je={key:0,class:"progress"},Ke={class:"completed"},Ue={class:"in-progress"},We=J({__name:"CoursesProgress",props:["selectedChildId"],setup(B){const C=B,y=O([]),$=O([]),V=K(()=>{let h=[];$.value=[],y.value=[];const v=new X("get_child_enrollments");if(C.selectedChildId)return v.callApi({child_id:C.selectedChildId}).then(c=>{var p,e,s,A;if((p=c==null?void 0:c.data)!=null&&p.enrollments){h=(e=c==null?void 0:c.data)==null?void 0:e.enrollments,y.value=h;let q=(s=y.value)==null?void 0:s.filter(u=>u==null?void 0:u.is_completed).length;$.value=[q,((A=y.value)==null?void 0:A.length)-q],n.value=[{value:$.value[0],color1:"#7302ff",color2:"#01abff"},{value:$.value[1],color1:"#aaa",color2:"#aaa"}]}}),null}),n=O();return(h,v)=>{var c,p;return a(),_(N,null,[L(l(V.value)+" ",1),t("main",null,[t("div",Xe,[B.selectedChildId?(a(),_("div",Je,[t("div",Ke,[t("p",null,l((c=y.value)==null?void 0:c.length),1),t("p",null,l(o(i)(o(g).coursesEnrolled)),1)]),t("div",Ue,[t("p",null,l((p=y.value)==null?void 0:p.filter(e=>e==null?void 0:e.is_completed).length),1),t("p",null,l(o(i)(o(g).coursesCompleted)),1)])])):w("",!0),Q(Ge,{style:{transform:"translate(0,-1rem)"},data:n.value,width:150,height:150,innerRadiusRatio:.8},null,8,["data"])])])],64)}}}),tt=U(We,[["__scopeId","data-v-d13e30b7"]]);export{tt as C,et as a};
