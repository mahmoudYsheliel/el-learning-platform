import{d as R,c as o,b as M,e as m,t as k,f as e,h as L,g as c,o as n,ak as Z,s as q,k as $,m as D,_ as W,r as b,a0 as G,al as J,u as K,x as H,Y as ee,v as P,w as B,z as V,Z as j,D as Y,H as X,a3 as U,B as te,y as se,C as ne}from"./index-mmTtHggo.js";const ie={class:"container"},ae={key:0},oe={class:"button-container"},le=R({__name:"Introduction",props:["title","description","duration","sectionsTitles"],emits:["startQuiz"],setup(i){return(T,r)=>(n(),o("div",ie,[M(Z),m("h1",null,k(e(q)(i.title)),1),m("h3",null,k(e(q)(i.description)),1),m("h3",null,[L(k(e(q)(e($).durationOfTest))+" ",1),m("strong",null,[L(k(Math.floor(i.duration/60))+":",1),i.duration%60<10?(n(),o("strong",ae,"0")):c("",!0),L(k(i.duration%60)+" "+k(e(q)(e($).minutes)),1)])]),m("div",oe,[M(e(D),{label:e(q)(e($).startAnalysisQuiz),onClick:r[0]||(r[0]=()=>{T.$emit("startQuiz")})},null,8,["label"])])]))}}),ue=W(le,[["__scopeId","data-v-a811fb54"]]),re=["width","height"],de=R({__name:"CountDown",props:{width:{type:Number,default:125},height:{type:Number,default:125},totalTime:{type:Number,default:300},lineWidth:{type:Number,default:5},strokeStyle:{type:String,default:"#01abff"},backgroundColor:{type:String,default:"#fff"},textColor:{type:String,default:"#01abff"},fontSize:{type:Number,default:20},source:{type:String,default:"/images/jerryFace.jpeg"}},emits:["timeOver"],setup(i,{emit:T}){const r=i,h=T,f=b(r.totalTime);setInterval(()=>{f.value-=1,f.value==0&&h("timeOver")},1e3);const x=b(),w=()=>{const d=x.value;if(!d)return;const s=d.getContext("2d"),N=d.width/2,C=d.height/2,O=Math.min(N,C)-r.lineWidth,u=-Math.PI/2,t=u+2*Math.PI*(f.value/r.totalTime);s.clearRect(0,0,d.width,d.height),s.fillStyle=r.backgroundColor,s.fillRect(0,0,d.width,d.height),s.beginPath(),s.arc(N,C,O,u,t,!1),s.lineWidth=r.lineWidth,s.strokeStyle=r.strokeStyle,s.stroke(),s.fillStyle=r.textColor,s.font=`${r.fontSize}px Arial`,s.textAlign="center",s.textBaseline="middle";const a=new Image;a.src=r.source,a.onload=function(){const g=r.width/2,y=r.height/2,p=Math.sqrt(r.width*r.height*2)/3;s.save(),s.beginPath(),s.arc(g,y,p,u,t,!1),s.lineTo(g,y),s.closePath(),s.clip(),s.drawImage(a,g-p,y-p,p*2,p*2),s.restore()}};return G(w),J(w),(d,s)=>(n(),o("div",null,[m("canvas",{ref_key:"canvas",ref:x,width:i.width,height:i.height},null,8,re)]))}}),ce=W(de,[["__scopeId","data-v-b1882f42"]]),ve={class:"container"},me={style:{display:"flex","justify-content":"space-between"}},he={class:"question-container"},fe={class:"question"},ge={key:0,class:"question-text"},ye=["src"],_e=["src"],we={class:"image_container"},pe=["src"],ke={key:1,class:"question-text"},qe={key:0},be={key:1},xe={key:2,class:"image_container"},Se={style:{width:"32%"}},Te=["src"],ze={key:3,class:"image_container"},$e={style:{width:"32%"}},Ne=["src"],Ce={key:2,class:"choices-wrapper"},Qe=["onClick"],je=["src"],Oe={class:"button-container"},Ie=R({__name:"Section",props:["showNext","question","answers","selectedQuestionOrder","sectionName","audio_link","duration","questionType"],emits:["next","answer","timeOver","finish"],setup(i){const T=K(),r=i,h=H(()=>r.selectedQuestionOrder),f=b();setTimeout(()=>{var t,a;f.value=(a=(t=r.question)==null?void 0:t.image)==null?void 0:a.split(",")},1),ee(h,(t,a)=>{f.value=[],setTimeout(()=>{var g,y;f.value=(y=(g=r.question)==null?void 0:g.image)==null?void 0:y.split(",")},1),u.value="show image",setTimeout(()=>{u.value="show options"},3e3)});function x(){window.scrollTo({top:0,left:0,behavior:"smooth"})}const w=b(!1);let d=b(-1),s=0;function N(){w.value=!0,d.value=Math.floor(Math.random()*7),setTimeout(()=>{d.value=-1},2500),s=Math.random()*80+10}const C=H(()=>{var t;return O(q((t=r.question)==null?void 0:t.question))});function O(t){return t?t.split("_____"):"invalid"}const u=b("show image");return(t,a)=>{var g,y,p,z;return n(),o("div",ve,[m("div",me,[m("h3",null,k(i.selectedQuestionOrder+1)+" / "+k((g=i.answers)==null?void 0:g.length),1),M(ce,{onTimeOver:a[0]||(a[0]=()=>{t.$emit("timeOver")}),totalTime:i.duration},null,8,["totalTime"])]),m("div",he,[m("div",fe,[i.questionType!="Symbol Search"?(n(),o("div",ge,[m("h1",null,k(e(q)((y=i.question)==null?void 0:y.question)),1),m("audio",{src:i.audio_link,autoplay:""},[m("source",{src:i.audio_link},null,8,_e)],8,ye),m("div",we,[((p=i.question)==null?void 0:p.image)!=null?(n(!0),o(P,{key:0},B(f.value,l=>{var _;return n(),o("img",{class:Y({image2:((_=f.value)==null?void 0:_.length)>1}),src:l,alt:""},null,10,pe)}),256)):c("",!0)])])):c("",!0),i.questionType=="Symbol Search"?(n(),o("div",ke,[u.value=="show image"?(n(),o("h1",qe,k(C.value[0]),1)):c("",!0),u.value=="show options"?(n(),o("h1",be,k(C.value[1]),1)):c("",!0),u.value=="show image"?(n(),o("div",xe,[(n(!0),o(P,null,B(f.value,(l,_)=>(n(),o("span",Se,[_<2?(n(),o("img",{key:0,class:"image2",style:{width:"100%"},src:l,alt:""},null,8,Te)):c("",!0)]))),256))])):c("",!0),u.value=="show options"?(n(),o("div",ze,[(n(!0),o(P,null,B(f.value,(l,_)=>(n(),o("span",$e,[_>1?(n(),o("img",{key:0,style:{width:"100%"},class:"image2",src:l,alt:""},null,8,Ne)):c("",!0)]))),256))])):c("",!0)])):c("",!0),u.value=="show image"&&i.questionType=="Symbol Search"?c("",!0):(n(),o("div",Ce,[(n(!0),o(P,null,B((z=i.question)==null?void 0:z.choices,l=>{var _;return n(),o("p",{class:Y(["choice-text",{selectedChoice:(_=i.answers)==null?void 0:_.some(v=>{var I;return(v==null?void 0:v.sub_section_name)==i.sectionName&&(v==null?void 0:v.question_id)==((I=i.question)==null?void 0:I.id)&&(v==null?void 0:v.choice_id)==(l==null?void 0:l.id)})}]),key:l,onClick:()=>{var v;t.$emit("answer",{section_name:i.sectionName,question_id:(v=i.question)==null?void 0:v.id,choice_id:l==null?void 0:l.id})}},[m("span",null,k(e(q)(l==null?void 0:l.choice)),1),l!=null&&l.image?(n(),o("img",{key:0,src:l==null?void 0:l.image,class:"image2",alt:""},null,8,je)):c("",!0)],10,Qe)}),128))]))])]),m("div",Oe,[!(i.questionType=="Symbol Search"&&u.value=="show image")&&e(T).getLang=="en"?(n(),V(e(D),{key:0,label:e(q)(e($).next),onClick:a[1]||(a[1]=()=>{N(),x(),i.showNext?t.$emit("next"):t.$emit("finish")}),icon:"pi pi-arrow-right",iconPos:"right"},null,8,["label"])):c("",!0),!(i.questionType=="Symbol Search"&&u.value=="show image")&&e(T).getLang=="ar"?(n(),V(e(D),{key:1,label:e(q)(e($).next),onClick:a[2]||(a[2]=()=>{N(),x(),i.showNext?t.$emit("next"):t.$emit("finish")}),icon:"pi pi-arrow-left",iconPos:"right"},null,8,["label"])):c("",!0)]),e(d)==0?(n(),o("span",{key:0,style:j({left:e(s).toString()+"vw"}),class:"emoj"},"😀",4)):c("",!0),e(d)==1?(n(),o("span",{key:1,style:j({left:e(s).toString()+"vw"}),class:"emoj"},"😁",4)):c("",!0),e(d)==2?(n(),o("span",{key:2,style:j({left:e(s).toString()+"vw"}),class:"emoj"},"😉",4)):c("",!0),e(d)==3?(n(),o("span",{key:3,style:j({left:e(s).toString()+"vw"}),class:"emoj"},"😎",4)):c("",!0),e(d)==4?(n(),o("span",{key:4,style:j({left:e(s).toString()+"vw"}),class:"emoj"},"😍",4)):c("",!0),e(d)==5?(n(),o("span",{key:5,style:j({left:e(s).toString()+"vw"}),class:"emoj"},"😘",4)):c("",!0),e(d)==6?(n(),o("span",{key:6,style:j({left:e(s).toString()+"vw"}),class:"emoj"},"🥳",4)):c("",!0)])}}}),Ae=W(Ie,[["__scopeId","data-v-adf3c192"]]),Me={class:"wrapper"},Pe={style:{display:"flex","flex-direction":"column","align-items":"center",gap:"2rem","padding-inline":"5rem","padding-top":"2rem"}},Be={key:1,class:"section-wrapper"},De={class:"section"},Re=R({__name:"analysisQuiz",setup(i){const T=se(),r=new X("get_analysis_quiz"),h=b({title:null,description:null,duration:null,questions:[]}),f=b(),x=b([]),w=b(0),d=b(!1),s=b(!1);r.callApi({analysis_quiz_id:T.params.quizId}).then(u=>{var t,a,g,y,p,z,l,_,v;if(u.msg=="Quiz Taken Before"){U.push("/childNotifications");return}f.value=(t=u==null?void 0:u.data)==null?void 0:t.analysis_quiz,h.value.description=(a=f.value)==null?void 0:a.description,h.value.title=(g=f.value)==null?void 0:g.title,h.value.duration=(y=f.value)==null?void 0:y.duration;for(let I=0;I<((z=(p=f.value)==null?void 0:p.sections)==null?void 0:z.length);I++){let A=(l=f.value)==null?void 0:l.sections[I];for(let E=0;E<((_=A==null?void 0:A.sub_sections)==null?void 0:_.length);E++){let S=A==null?void 0:A.sub_sections[E];for(let F=0;F<((v=S==null?void 0:S.questions)==null?void 0:v.length);F++){let Q=S.questions[F];h.value.questions.push({question:Q,section_name:S==null?void 0:S.info_name,order:h.value.questions.length,audio_link:Q==null?void 0:Q.audio_link}),x.value.push({sub_section_name:S==null?void 0:S.info_name,question_id:Q==null?void 0:Q.id,choice_id:-1})}}}});function N(){s.value=!0}function C(u){let t=x.value.find(a=>(a==null?void 0:a.question_id)==u.question_id&&(a==null?void 0:a.sub_section_name)==u.section_name);t.choice_id=u==null?void 0:u.choice_id}function O(){const u=new X("add_analysis_quiz_answer");let t={answers:{quiz_id:T.params.quizId,answers:x.value}};u.callApi(t).then(a=>{a!=null&&a.success&&(d.value=!0)})}return(u,t)=>{var a,g,y,p,z,l,_;return n(),o("div",Me,[M(e(ne),{style:{"max-width":"80%"},visible:d.value,"onUpdate:visible":t[1]||(t[1]=v=>d.value=v),modal:"",pt:{mask:{style:"backdrop-filter: blur(2px)"},header:{style:"display:none"},content:{style:"margin-block:auto; display: flex; flex-direction: column; align-items: center; justify-content: center;"}}},{default:te(()=>[m("div",Pe,[m("h3",null,k(e(q)(e($).wellDone)),1),m("h3",null,k(e(q)(e($).logWithParent)),1),M(e(D),{label:e(q)(e($).returnHome),onClick:t[0]||(t[0]=v=>e(U).push("/childNotifications"))},null,8,["label"])])]),_:1},8,["visible","pt"]),s.value?c("",!0):(n(),V(ue,{key:0,title:(a=h.value)==null?void 0:a.title,description:(g=h.value)==null?void 0:g.description,duration:(y=h.value)==null?void 0:y.duration,onStartQuiz:N},null,8,["title","description","duration"])),s.value?(n(),o("div",Be,[m("div",De,[M(Ae,{"question-type":(p=h.value.questions[w.value])==null?void 0:p.section_name,"show-next":h.value.questions.length!=w.value+1,"show-previous":w.value!=0,question:(z=h.value.questions[w.value])==null?void 0:z.question,sectionName:(l=h.value.questions[w.value])==null?void 0:l.section_name,selectedQuestionOrder:w.value,answers:x.value,audio_link:(_=h.value.questions[w.value])==null?void 0:_.audio_link,duration:h.value.duration,onNext:t[2]||(t[2]=v=>w.value++),onPrevious:t[3]||(t[3]=v=>w.value--),onAnswer:t[4]||(t[4]=v=>{C(v)}),onTimeOver:O,onFinish:O},null,8,["question-type","show-next","show-previous","question","sectionName","selectedQuestionOrder","answers","audio_link","duration"])])])):c("",!0)])}}}),Ee=W(Re,[["__scopeId","data-v-febed0b8"]]);export{Ee as default};
