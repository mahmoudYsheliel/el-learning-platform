import{P as O}from"./ParentSidebar-VYMRzSB6.js";import{d as Q,r as u,H as N,s as n,c as X,b as d,e as t,z as Y,f as l,t as i,C as Z,k as s,o as ll,N as el,m as J,B as al,l as _,ab as ol,ac as tl,ad as nl,F as sl,q as dl,a as il,ae as ul,_ as ml}from"./index-CxDCorye.js";import{s as I}from"./index-Cg_tFfxo.js";import{s as pl}from"./index-toAsbKMm.js";/* empty css                                                                      */import"./index-DzK6FooO.js";const cl={class:"container"},vl={class:"dialog-container"},fl={style:{color:"var(--secondary)"}},_l={class:"big-wrapper"},rl={class:"wrapper"},hl={class:"element"},bl={class:"element"},Vl={class:"element"},gl={class:"element"},yl={class:"element"},Cl={class:"element"},wl={class:"element"},kl={class:"element"},Nl={class:"element"},Ul=Q({__name:"addChild",setup(ql){const r=u(),h=u(),v=u(),f=u(),b=u(),V=u(),g=u(),L=u(),y=u(),C=u(),w=u(),U=u(!1),W=u([]);let R="";new N("get_all_program").callApi().then(m=>{var e;if(m!=null&&m.success)for(let a of(e=m==null?void 0:m.data)==null?void 0:e.program)W.value.push({label:n(a==null?void 0:a.title),code:a==null?void 0:a.id})});function j(){var m,e,a,p;if(!r.value||!h.value||!v.value||!f.value||!b.value||!V.value||!g.value||!C.value||!y.value)w.value=n(s.dataMissing);else if(f.value!==b.value)w.value=n(s.diffPass);else{const k=new N("add_child");let q={user:{email:v.value,hashed_pass:f.value,user_type:"Child",first_name:r.value,last_name:h.value,gender:(m=V.value)==null?void 0:m.value,birth_day:g.value},child:{user_id:"",grade:(e=C.value)==null?void 0:e.value,child_group:(a=L.value)==null?void 0:a.code,education_system:(p=y.value)==null?void 0:p.value}};k.callApi(q).then(c=>{var o;c!=null&&c.success?(U.value=!0,R=(o=c==null?void 0:c.data)==null?void 0:o.child_user_id):c.msg=="email is already used once"&&(w.value=n(s.emailTaken))})}}function K(m){const e=dl();new N("switch_to_child").callApi({child_id:m}).then(p=>{var k;if(p!=null&&p.success){e.logout(),e.addToken((k=p==null?void 0:p.data)==null?void 0:k.access_token);const q=new N("personal_info"),c=il();q.callApi().then(o=>{var A,P,S,x,D,T,B,F,$,G,H,M,z,E;o!=null&&o.success&&(c.addInfo({userType:(P=(A=o==null?void 0:o.data)==null?void 0:A.info)==null?void 0:P.user_type,notifications:(x=(S=o==null?void 0:o.data)==null?void 0:S.info)==null?void 0:x.notifications,id:(T=(D=o==null?void 0:o.data)==null?void 0:D.info)==null?void 0:T.id,firstName:(F=(B=o==null?void 0:o.data)==null?void 0:B.info)==null?void 0:F.first_name,lastName:(G=($=o==null?void 0:o.data)==null?void 0:$.info)==null?void 0:G.last_name,email:(M=(H=o==null?void 0:o.data)==null?void 0:H.info)==null?void 0:M.email,gender:(E=(z=o==null?void 0:o.data)==null?void 0:z.info)==null?void 0:E.gender}),ul.push("/"))})}})}return(m,e)=>(ll(),X(Z,null,[d(el),t("div",cl,[d(l(al),{modal:"",visible:U.value,"onUpdate:visible":e[1]||(e[1]=a=>U.value=a),pt:{root:"border-none",mask:{style:"backdrop-filter: blur(2px)"},header:{style:"display:none"}}},{default:Y(()=>[t("div",vl,[t("h3",null,i(l(n)(l(s).childAdded)),1),t("h3",null,i(l(n)(l(s).loginWith)),1),t("h3",fl,i(v.value)+" Account",1),t("h3",null,i(l(n)(l(s).toStartJourney)),1),d(l(J),{label:l(n)(l(s).switchToChild),onClick:e[0]||(e[0]=()=>{K(l(R))})},null,8,["label"])])]),_:1},8,["visible"]),d(O,{class:"sidebar",selected:"addChild"}),t("div",_l,[t("h2",null,i(w.value),1),t("div",rl,[t("div",hl,[t("p",null,i(l(n)(l(s).firstName)),1),d(l(_),{modelValue:r.value,"onUpdate:modelValue":e[2]||(e[2]=a=>r.value=a)},null,8,["modelValue"])]),t("div",bl,[t("p",null,i(l(n)(l(s).lastName)),1),d(l(_),{modelValue:h.value,"onUpdate:modelValue":e[3]||(e[3]=a=>h.value=a)},null,8,["modelValue"])]),t("div",Vl,[t("p",null,i(l(n)(l(s).email))+" / "+i(l(n)(l(s).username)),1),d(l(_),{modelValue:v.value,"onUpdate:modelValue":e[4]||(e[4]=a=>v.value=a)},null,8,["modelValue"])]),t("div",gl,[t("p",null,i(l(n)(l(s).pass)),1),d(l(_),{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=a=>f.value=a)},null,8,["modelValue"])]),t("div",yl,[t("p",null,i(l(n)(l(s).confirmPass)),1),d(l(_),{modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=a=>b.value=a)},null,8,["modelValue"])]),t("div",Cl,[t("p",null,i(l(n)(l(s).gender)),1),d(l(I),{modelValue:V.value,"onUpdate:modelValue":e[7]||(e[7]=a=>V.value=a),options:l(ol),"option-label":"label"},null,8,["modelValue","options"])]),t("div",wl,[t("p",null,i(l(n)(l(s).birthDate)),1),d(l(pl),{modelValue:g.value,"onUpdate:modelValue":e[8]||(e[8]=a=>g.value=a),showIcon:"",iconDisplay:"input"},null,8,["modelValue"])]),t("div",kl,[t("p",null,i(l(n)(l(s).grade)),1),d(l(I),{modelValue:C.value,"onUpdate:modelValue":e[9]||(e[9]=a=>C.value=a),options:l(tl),"option-label":"label","option-group-label":"label",optionGroupChildren:"items"},null,8,["modelValue","options"])]),t("div",Nl,[t("p",null,i(l(n)(l(s).educationSystem)),1),d(l(I),{modelValue:y.value,"onUpdate:modelValue":e[10]||(e[10]=a=>y.value=a),options:l(nl),"option-label":"label"},null,8,["modelValue","options"])])]),d(l(J),{label:l(n)(l(s).addChild),onClick:j,style:{"margin-bottom":"5rem"}},null,8,["label"])])]),d(sl)],64))}}),Tl=ml(Ul,[["__scopeId","data-v-a5b3f348"]]);export{Tl as default};
