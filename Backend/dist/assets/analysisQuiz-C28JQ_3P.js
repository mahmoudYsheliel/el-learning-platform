import{d as D,c as r,b as Q,e as h,t as z,f as i,o as a,al as U,s as p,k as N,m as M,_ as R,r as b,a0 as K,am as Z,u as J,D as V,Y as ee,v as j,w as B,g as _,G as H,y as Y,H as X,a5 as G,C as te,E as se,J as ne}from"./index-DnDwTmGv.js";const ie={class:"container"},ae=["innerHTML"],oe={class:"button-container"},le=D({__name:"Introduction",props:["title","description","duration","sectionsTitles"],emits:["startQuiz"],setup(n){return(x,o)=>(a(),r("div",ie,[Q(U),h("h1",null,z(i(p)(n.title)),1),h("p",{innerHTML:i(p)(n.description)},null,8,ae),h("div",oe,[Q(i(M),{style:{direction:"ltr"},label:i(p)(i(N).startAnalysisQuiz),onClick:o[0]||(o[0]=()=>{x.$emit("startQuiz")})},null,8,["label"])])]))}}),ue=R(le,[["__scopeId","data-v-0304410b"]]),re=["width","height"],de=D({__name:"CountDown",props:{width:{type:Number,default:75},height:{type:Number,default:75},totalTime:{type:Number,default:300},lineWidth:{type:Number,default:10},strokeStyle:{type:String,default:"#01abff"},backgroundColor:{type:String,default:"#fff"},textColor:{type:String,default:"#01abff"},fontSize:{type:Number,default:20},source:{type:String,default:"/images/jerryFace.jpeg"}},emits:["timeOver"],setup(n,{emit:x}){const o=n,c=x,v=b(o.totalTime);setInterval(()=>{v.value-=1,v.value==0&&c("timeOver")},1e3);const w=b(),m=()=>{const g=w.value;if(!g)return;const t=g.getContext("2d"),d=g.width/2,f=g.height/2,q=Math.min(d,f)-o.lineWidth,y=-Math.PI/2,$=y+2*Math.PI*(v.value/o.totalTime);t.clearRect(0,0,g.width,g.height),t.fillStyle=o.backgroundColor,t.fillRect(0,0,g.width,g.height),t.beginPath(),t.arc(d,f,q,y,$,!1),t.lineWidth=o.lineWidth,t.strokeStyle=o.strokeStyle,t.stroke(),t.fillStyle=o.textColor,t.font=`${o.fontSize}px Arial`,t.textAlign="center",t.textBaseline="middle";const u=new Image;u.src=o.source,u.onload=function(){const e=o.width/2,s=o.height/2,l=Math.sqrt(o.width*o.height*2)/3;t.save(),t.beginPath(),t.arc(e,s,l,y,$,!1),t.lineTo(e,s),t.closePath(),t.clip(),t.drawImage(u,e-l,s-l,l*2,l*2),t.restore()}};return K(m),Z(m),(g,t)=>(a(),r("div",null,[h("canvas",{ref_key:"canvas",ref:w,width:n.width,height:n.height},null,8,re)]))}}),ce=R(de,[["__scopeId","data-v-64900ae1"]]),ve={class:"container"},he={style:{display:"flex","justify-content":"space-between"}},me={class:"question-container"},ge={class:"question"},fe={key:0,class:"question-text"},_e=["src"],ye=["src"],pe={class:"image_container"},we=["src"],qe={key:1,class:"question-text"},ke={key:0},be={key:1},xe={key:2,class:"image_container"},Te={style:{width:"32%"}},ze=["src"],Se={key:3,class:"image_container"},$e={style:{width:"32%"}},Ce=["src"],Qe={key:2,class:"choices-wrapper"},Ne=["onClick"],Oe=["src"],Ie={class:"button-container"},Ae=D({__name:"Section",props:["showNext","question","answers","selectedQuestionOrder","sectionName","audio_link","duration","questionType"],emits:["next","answer","timeOver","finish"],setup(n){const x=J(),o=n,c=V(()=>o.selectedQuestionOrder),v=b();setTimeout(()=>{var d,f;v.value=(f=(d=o.question)==null?void 0:d.image)==null?void 0:f.split(",")},1),ee(c,(d,f)=>{v.value=[],setTimeout(()=>{var q,y;v.value=(y=(q=o.question)==null?void 0:q.image)==null?void 0:y.split(",")},1),t.value="show image",o.questionType=="Symbol Search"&&setTimeout(()=>{t.value="show options"},3e3)});function w(){window.scrollTo({top:0,left:0,behavior:"smooth"})}const m=V(()=>{var d;return g(p((d=o.question)==null?void 0:d.question))});function g(d){return d?d.split("_____"):"invalid"}const t=b("show image");return(d,f)=>{var q,y,$,u;return a(),r("div",ve,[h("div",he,[h("h3",null,z(n.selectedQuestionOrder+1)+" / "+z((q=n.answers)==null?void 0:q.length),1),Q(ce,{onTimeOver:f[0]||(f[0]=()=>{d.$emit("timeOver")}),totalTime:n.duration},null,8,["totalTime"])]),h("div",me,[h("div",ge,[n.questionType!="Symbol Search"?(a(),r("div",fe,[h("h1",null,z(i(p)((y=n.question)==null?void 0:y.question)),1),h("audio",{src:n.audio_link,autoplay:""},[h("source",{src:n.audio_link},null,8,ye)],8,_e),h("div",pe,[(($=n.question)==null?void 0:$.image)!=null?(a(!0),r(j,{key:0},B(v.value,e=>{var s;return a(),r("img",{class:Y({image2:((s=v.value)==null?void 0:s.length)>1}),src:e,alt:""},null,10,we)}),256)):_("",!0)])])):_("",!0),n.questionType=="Symbol Search"?(a(),r("div",qe,[t.value=="show image"?(a(),r("h1",ke,z(m.value[0]),1)):_("",!0),t.value=="show options"?(a(),r("h1",be,z(m.value[1]),1)):_("",!0),t.value=="show image"?(a(),r("div",xe,[(a(!0),r(j,null,B(v.value,(e,s)=>(a(),r("span",Te,[s<2?(a(),r("img",{key:0,class:"image2",style:{width:"100%"},src:e,alt:""},null,8,ze)):_("",!0)]))),256))])):_("",!0),t.value=="show options"?(a(),r("div",Se,[(a(!0),r(j,null,B(v.value,(e,s)=>(a(),r("span",$e,[s>1?(a(),r("img",{key:0,style:{width:"100%"},class:"image2",src:e,alt:""},null,8,Ce)):_("",!0)]))),256))])):_("",!0)])):_("",!0),t.value=="show image"&&n.questionType=="Symbol Search"?_("",!0):(a(),r("div",Qe,[(a(!0),r(j,null,B((u=n.question)==null?void 0:u.choices,e=>{var s;return a(),r("p",{class:Y(["choice-text",{selectedChoice:(s=n.answers)==null?void 0:s.some(l=>{var S;return(l==null?void 0:l.sub_section_name)==n.sectionName&&(l==null?void 0:l.question_id)==((S=n.question)==null?void 0:S.id)&&(l==null?void 0:l.choice_id)==(e==null?void 0:e.id)})}]),key:e,onClick:()=>{var l;d.$emit("answer",{section_name:n.sectionName,question_id:(l=n.question)==null?void 0:l.id,choice_id:e==null?void 0:e.id})}},[h("span",null,z(i(p)(e==null?void 0:e.choice)),1),e!=null&&e.image?(a(),r("img",{key:0,src:e==null?void 0:e.image,class:"image_choice",alt:""},null,8,Oe)):_("",!0)],10,Ne)}),128))]))])]),h("div",Ie,[!(n.questionType=="Symbol Search"&&t.value=="show image")&&i(x).getLang=="en"?(a(),H(i(M),{key:0,label:i(p)(i(N).next),onClick:f[1]||(f[1]=()=>{w(),n.showNext?d.$emit("next"):d.$emit("finish")}),icon:"pi pi-arrow-right",iconPos:"right"},null,8,["label"])):_("",!0),!(n.questionType=="Symbol Search"&&t.value=="show image")&&i(x).getLang=="ar"?(a(),H(i(M),{key:1,label:i(p)(i(N).next),onClick:f[2]||(f[2]=()=>{w(),n.showNext?d.$emit("next"):d.$emit("finish")}),icon:"pi pi-arrow-left",iconPos:"right"},null,8,["label"])):_("",!0)])])}}}),Le=R(Ae,[["__scopeId","data-v-46bb6dbb"]]),Pe={class:"wrapper"},Me={style:{display:"flex","flex-direction":"column","align-items":"center",gap:"2rem","padding-inline":"5rem","padding-top":"2rem"}},je={key:1,class:"section-wrapper"},Be={class:"section"},De=D({__name:"analysisQuiz",setup(n){const x=se(),o=new X("get_analysis_quiz"),c=b({title:null,description:null,duration:null,questions:[]}),v=b(),w=b([]),m=b(0),g=b(!1),t=b(!1);o.callApi({analysis_quiz_id:x.params.quizId}).then(u=>{var e,s,l,S,I,A,L,P,T;if(u.msg=="Quiz Taken Before"){G.push("/childNotifications");return}v.value=(e=u==null?void 0:u.data)==null?void 0:e.analysis_quiz,c.value.description=(s=v.value)==null?void 0:s.description,c.value.title=(l=v.value)==null?void 0:l.title,c.value.duration=(S=v.value)==null?void 0:S.duration;for(let W=0;W<((A=(I=v.value)==null?void 0:I.sections)==null?void 0:A.length);W++){let O=(L=v.value)==null?void 0:L.sections[W];for(let E=0;E<((P=O==null?void 0:O.sub_sections)==null?void 0:P.length);E++){let k=O==null?void 0:O.sub_sections[E];for(let F=0;F<((T=k==null?void 0:k.questions)==null?void 0:T.length);F++){let C=k.questions[F];c.value.questions.push({question:C,section_name:k==null?void 0:k.info_name,order:c.value.questions.length,audio_link:C==null?void 0:C.audio_link}),w.value.push({sub_section_name:k==null?void 0:k.info_name,question_id:C==null?void 0:C.id,choice_id:-1})}}}});function d(){t.value=!0}function f(u){let e=w.value.find(s=>(s==null?void 0:s.question_id)==u.question_id&&(s==null?void 0:s.sub_section_name)==u.section_name);e.choice_id=u==null?void 0:u.choice_id}function q(){const u=new X("add_analysis_quiz_answer");let e={answers:{quiz_id:x.params.quizId,answers:w.value}};u.callApi(e).then(s=>{s!=null&&s.success&&(g.value=!0)})}const y=J();function $(u){u=="English"&&y.setLang("en"),u=="العربية"&&y.setLang("ar")}return(u,e)=>{var s,l,S,I,A,L,P;return a(),r("div",Pe,[Q(i(ne),{style:{"max-width":"80%"},visible:g.value,"onUpdate:visible":e[1]||(e[1]=T=>g.value=T),modal:"",pt:{mask:{style:"backdrop-filter: blur(2px)"},header:{style:"display:none"},content:{style:"margin-block:auto; display: flex; flex-direction: column; align-items: center; justify-content: center;"}}},{default:te(()=>[h("div",Me,[h("h3",null,z(i(p)(i(N).wellDone)),1),h("h3",null,z(i(p)(i(N).logWithParent)),1),Q(i(M),{label:i(p)(i(N).results),onClick:e[0]||(e[0]=T=>i(G).push("/viewChildAnalysis"))},null,8,["label"])])]),_:1},8,["visible","pt"]),t.value?_("",!0):(a(),H(ue,{key:0,title:(s=c.value)==null?void 0:s.title,description:(l=c.value)==null?void 0:l.description,duration:(S=c.value)==null?void 0:S.duration,onStartQuiz:d},null,8,["title","description","duration"])),t.value?(a(),r("div",je,[h("div",Be,[Q(Le,{"question-type":(I=c.value.questions[m.value])==null?void 0:I.section_name,"show-next":c.value.questions.length!=m.value+1,"show-previous":m.value!=0,question:(A=c.value.questions[m.value])==null?void 0:A.question,sectionName:(L=c.value.questions[m.value])==null?void 0:L.section_name,selectedQuestionOrder:m.value,answers:w.value,audio_link:(P=c.value.questions[m.value])==null?void 0:P.audio_link,duration:c.value.duration,onNext:e[2]||(e[2]=T=>m.value++),onPrevious:e[3]||(e[3]=T=>m.value--),onAnswer:e[4]||(e[4]=T=>{f(T)}),onTimeOver:q,onFinish:q},null,8,["question-type","show-next","show-previous","question","sectionName","selectedQuestionOrder","answers","audio_link","duration"])])])):_("",!0),Q(i(M),{class:"lang_button",onClick:e[5]||(e[5]=()=>{$(i(p)(i(N).language))}),icon:"pi pi-language"})])}}}),We=R(De,[["__scopeId","data-v-412fdc2d"]]);export{We as default};
