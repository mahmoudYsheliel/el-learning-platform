import{d as $,c as I,e as l,t as s,f as e,y as A,g as N,q as B,v as V,o as p,s as i,k as r,l as R,_ as x,z as j,a as F,r as h,H as y,b as d,x as L,i as O,N as z,O as G,F as H}from"./index-vIkyQCYi.js";import{C as W}from"./CourseCard-CGvaDDjY.js";import{A as J,E as K,G as Q,P as U}from"./PromoCodeDialog-DSdqE0Ka.js";import"./inputtext.esm-CSF6Q_pY.js";const X={class:"course-description"},Y={class:"head"},Z=["src"],ee={class:"information"},le={class:"info-container"},oe={class:"wrapper"},ne={class:"wrapper"},se={class:"description"},ae={class:"header"},te={class:"objectives"},ie=$({__name:"PlanDescribtion",props:["plan","isEnrolled","notShowButton"],emits:["enroll","viewMaterial"],setup(a,{emit:g}){return(b,m)=>{var w,v,C,P,D,f,k;return p(),I("div",X,[l("div",Y,[l("h1",null,s(e(i)((w=a.plan)==null?void 0:w.title)),1)]),l("img",{src:(v=a.plan)==null?void 0:v.image,alt:""},null,8,Z),l("div",ee,[l("h2",null,s(e(i)(e(r).planInfo)),1),l("div",le,[l("div",oe,[l("h4",null,s(e(i)(e(r).price)),1),l("p",null,s((C=a.plan)==null?void 0:C.price)+" L.E",1)]),l("div",ne,[l("h4",null,s(e(i)(e(r).age)),1),l("p",null,s((P=a.plan)==null?void 0:P.min_age)+" - "+s((D=a.plan)==null?void 0:D.max_age)+" "+s(e(i)(e(r).years)),1)])])]),l("div",se,[l("div",ae,[l("h2",null,s(e(i)(e(r).planDescription)),1),!a.isEnrolled&&!a.notShowButton?(p(),A(e(R),{key:0,label:e(i)(e(r).enrollNow),onClick:m[0]||(m[0]=()=>{b.$emit("enroll")})},null,8,["label"])):N("",!0),a.isEnrolled&&!a.notShowButton?(p(),A(e(R),{key:1,label:e(i)(e(r).viewMat),onClick:m[1]||(m[1]=()=>{b.$emit("viewMaterial")})},null,8,["label"])):N("",!0)]),l("p",null,s(e(i)((f=a.plan)==null?void 0:f.description)),1)]),l("div",te,[l("h2",null,s(e(i)(e(r).planObjectives)),1),(p(!0),I(B,null,V((k=a.plan)==null?void 0:k.objectives,E=>(p(),I("p",null,"- "+s(e(i)(E)),1))),256))])])}}}),ue=x(ie,[["__scopeId","data-v-4b2cd19d"]]),ce={class:"container"},re={class:"courses"},de={class:"coursesContainer"},pe=$({__name:"planView",setup(a){const g=L(),b=O(),m=j(),w=F(),v=h(),C=h([]);new y("get_plan").callApi({plan_id:g.params.planId}).then(o=>{var u,n,t;if(o.success){v.value=(u=o==null?void 0:o.data)==null?void 0:u.plan;for(let _ of(t=(n=o==null?void 0:o.data)==null?void 0:n.plan)==null?void 0:t.courses)new y("get_course").callApi({course_id:_==null?void 0:_.Id}).then(c=>{var S;c!=null&&c.success&&C.value.push((S=c==null?void 0:c.data)==null?void 0:S.course)})}});const D=h(),f=h(!1),k=h(!1),E=h(!1),q=h(!1);function M(){var o,u,n,t;m.getIsAuthorized?((o=w.getInfo)==null?void 0:o.userType)=="Child"?f.value=!0:((u=w.getInfo)==null?void 0:u.userType)=="Parent"&&(((n=g.params)==null?void 0:n.childId)=="0"?E.value=!0:((t=g.params)==null?void 0:t.childId)!="0"&&(q.value=!0)):b.push("/login")}function T(o){var n;q.value=!1,new y("request_enrollment").callApi({request:{student_id:g.params.childId,course_id:(n=v.value)==null?void 0:n.id,promo_code:o,package_type:"plan"}}).then(t=>{var _,c;t!=null&&t.success&&(D.value=(c=(_=t==null?void 0:t.data)==null?void 0:_.request)==null?void 0:c.price,k.value=!0)})}return(o,u)=>(p(),I(B,null,[d(z),d(G),d(J,{showDialog:f.value,onRemoveDialog:u[0]||(u[0]=n=>{f.value=!1})},null,8,["showDialog"]),d(K,{showDialog:k.value,cost:D.value},null,8,["showDialog","cost"]),d(Q,{showDialog:E.value},null,8,["showDialog"]),d(U,{showDialog:q.value,onPromoCode:u[1]||(u[1]=n=>{T(n)})},null,8,["showDialog"]),l("div",ce,[d(ue,{plan:v.value,onEnroll:M},null,8,["plan"]),l("div",re,[l("h2",null,s(e(i)(e(r).planCourses)),1),l("div",de,[(p(!0),I(B,null,V(C.value,n=>(p(),A(W,{course:n,search:""},null,8,["course"]))),256))])])]),d(H)],64))}}),_e=x(pe,[["__scopeId","data-v-e9141d53"]]);export{_e as default};
