import{P as oe}from"./ParentSidebar-DcOdEnsw.js";import{d as Y,r as V,w as U,c as u,e as s,b as A,A as z,f as o,h as N,t as l,q as O,H as K,o as i,v as Q,y as ee,s as d,k as y,g as $,_ as G,N as le,F as re}from"./index-vIkyQCYi.js";import{S as ce}from"./SelectChild-vXO4udBE.js";import{a as X,s as J}from"./accordiontab.esm-nlmWO43E.js";import"./dropdown.esm-PnvIj9kv.js";import"./index.esm-wiCtErUF.js";const ne={class:"header"},de={style:{color:"var(--accent2)"}},ie={class:"content"},ae={class:"chapters"},ue={class:"header"},_e={style:{color:"var(--accent1)"}},he={style:{color:"var(--accent2)"}},pe={class:"material-content"},ve={class:"material"},fe={key:0,class:"lesson"},ge={style:{color:"var(--text)"}},ye={key:0,class:"completed",style:{color:"var(--accent2)"}},Ce={style:{color:"var(--text)"}},Ie={key:1,class:"lesson"},ke={style:{color:"var(--text)"}},we={key:0,class:"completed",style:{color:"var(--accent2)"}},xe={style:{color:"var(--text)"}},$e={key:2,class:"lesson"},Ae={style:{color:"var(--text)"}},Se={key:0,class:"completed",style:{color:"var(--accent2)"}},Re={style:{color:"var(--text)"}},qe={key:3,class:"lesson"},Pe={style:{color:"var(--text)"}},ze={key:0,class:"completed",style:{color:"var(--accent2)"}},Me={style:{color:"var(--text)"}},De={key:4,class:"quiz"},Ne={class:"quiz-header"},Ee={style:{color:"var(--text)"}},Le={style:{color:"var(--text)"}},Te={style:{color:"var(--text)"}},Be={class:"quiz-content"},Fe={class:"row names"},Oe={style:{color:"var(--text)"}},Ve={style:{color:"var(--text)"}},be={style:{color:"var(--text)"}},je={style:{color:"var(--text)"}},He={class:"row"},Qe=Y({__name:"ChildProgress",props:["selectedChildId"],setup(E){const _=E,v=V([]),I=V(),L=U(()=>{I.value=[],v.value=[];let h=[];const f=new K("get_child_enrollments");if(_.selectedChildId)return f.callApi({child_id:_.selectedChildId}).then(a=>{if(a.data.enrollments){h=a.data.enrollments,I.value=h;for(let t of h){let e=t==null?void 0:t.course_id;new K("get_course").callApi({course_id:e}).then(p=>{var M,D,T,w,x,R,g,B,b,q,W,Z,m;if(p.success){let j={courseTitle:(D=(M=p==null?void 0:p.data)==null?void 0:M.course)==null?void 0:D.title,chapters:[],percentage:0};for(let S of(T=p==null?void 0:p.data)==null?void 0:T.course.chapters){let P={title:S==null?void 0:S.title,material:[],progress:0};for(let n of S==null?void 0:S.materials){let C={title:n==null?void 0:n.title,progress:[],type:n==null?void 0:n.type};if(n.type=="Lesson"){if((w=t==null?void 0:t.progress)!=null&&w.lessons_completed)for(let r of(x=t==null?void 0:t.progress)==null?void 0:x.lessons_completed)(r==null?void 0:r.lesson_id)==n.Id&&C.progress.push(r)}else if(n.type=="Simulation"){if((R=t==null?void 0:t.progress)!=null&&R.simulations_completed)for(let r of(g=t==null?void 0:t.progress)==null?void 0:g.simulations_completed)(r==null?void 0:r.simulation_id)==n.Id&&C.progress.push(r)}else if(n.type=="Project"){if((B=t==null?void 0:t.progress)!=null&&B.projects_completed)for(let r of(b=t==null?void 0:t.progress)==null?void 0:b.projects_completed)(r==null?void 0:r.project_id)==n.Id&&C.progress.push(r)}else if(n.type=="Activity"){if((q=t==null?void 0:t.progress)!=null&&q.activities_completed)for(let r of(W=t==null?void 0:t.progress)==null?void 0:W.activities_completed)(r==null?void 0:r.activity_id)==n.Id&&C.progress.push(r)}else if(n.type=="Quiz"&&(Z=t==null?void 0:t.progress)!=null&&Z.quizes_completed)for(let r of(m=t==null?void 0:t.progress)==null?void 0:m.quizes_completed)(r==null?void 0:r.quiz_id)==n.Id&&C.progress.push(r);P.material.push(C)}let H=P.material.reduce((n,C)=>{var r;return(r=C==null?void 0:C.progress)!=null&&r.length?n+1:n},0),F=P.material.length;P.progress=Math.floor(100*H/F),j.chapters.push(P)}let te=j.chapters.reduce((S,P)=>{const H=P.material.reduce((F,n)=>{var C;return(C=n==null?void 0:n.progress)!=null&&C.length?F+1:F},0);return S+H},0),se=j.chapters.reduce((S,P)=>{var F;const H=(F=P.material)==null?void 0:F.length;return S+H},0);j.percentage=Math.floor(te*100/se),v.value.push(j)}})}}}),null});function c(h){const f=new Date(h),a=f.getFullYear(),t=(f.getMonth()+1).toString().padStart(2,"0"),e=f.getDate().toString().padStart(2,"0");return`${a}-${t}-${e}`}return(h,f)=>(i(),u(O,null,[s("main",null,[A(o(X),null,{default:z(()=>[(i(!0),u(O,null,Q(v.value,a=>(i(),ee(o(J),{key:a.courseTitle},{header:z(()=>[s("div",ne,[s("h2",null,l(o(d)(a.courseTitle)),1),s("h2",de,l(o(d)(o(y).completed))+" "+l(a.percentage)+" % ",1)])]),default:z(()=>[s("div",ie,[s("div",ae,[A(o(X),null,{default:z(()=>[(i(!0),u(O,null,Q(a.chapters,t=>(i(),ee(o(J),{key:t.title},{header:z(()=>[s("div",ue,[s("h3",_e,l(o(d)(t.title)),1),s("h3",he,l(o(d)(o(y).completed))+" "+l(t.progress)+" % ",1)])]),default:z(()=>[s("div",pe,[(i(!0),u(O,null,Q(t.material,e=>{var k,p,M,D,T,w,x,R;return i(),u("div",ve,[(e==null?void 0:e.type)=="Lesson"?(i(),u("div",fe,[s("h4",ge,l(o(d)(e.title)),1),(k=e==null?void 0:e.progress[0])!=null&&k.completed_at?(i(),u("div",ye,[s("span",Ce,l(o(d)(o(y).completedAt)),1),N(" "+l(c((p=e==null?void 0:e.progress[0])==null?void 0:p.completed_at)),1)])):$("",!0)])):$("",!0),(e==null?void 0:e.type)=="Simulation"?(i(),u("div",Ie,[s("h4",ke,l(o(d)(e.title)),1),(M=e==null?void 0:e.progress[0])!=null&&M.completed_at?(i(),u("div",we,[s("span",xe,l(o(d)(o(y).completedAt)),1),N(" "+l(c((D=e==null?void 0:e.progress[0])==null?void 0:D.completed_at)),1)])):$("",!0)])):$("",!0),(e==null?void 0:e.type)=="Project"?(i(),u("div",$e,[s("h4",Ae,l(o(d)(e.title)),1),(T=e==null?void 0:e.progress[0])!=null&&T.completed_at?(i(),u("div",Se,[s("span",Re,l(o(d)(o(y).completedAt)),1),N(" "+l(c((w=e==null?void 0:e.progress[0])==null?void 0:w.completed_at)),1)])):$("",!0)])):$("",!0),(e==null?void 0:e.type)=="Activity"?(i(),u("div",qe,[s("h4",Pe,l(o(d)(e.title)),1),(x=e==null?void 0:e.progress[0])!=null&&x.completed_at?(i(),u("div",ze,[s("span",Me,l(o(d)(o(y).completedAt)),1),N(" "+l(c((R=e==null?void 0:e.progress[0])==null?void 0:R.completed_at)),1)])):$("",!0)])):$("",!0),e.type=="Quiz"?(i(),u("div",De,[A(o(X),null,{default:z(()=>[A(o(J),null,{header:z(()=>{var g,B;return[s("div",Ne,[s("h4",Ee,l(o(d)(e==null?void 0:e.title)),1),s("h4",null,[s("span",Le,l(o(d)(o(y).heighest)),1),N(" "+l((g=e==null?void 0:e.progress)==null?void 0:g.reduce((b,q)=>(q==null?void 0:q.score_prcentage)>b?q==null?void 0:q.score_prcentage:b,0))+" % ",1)]),s("h4",null,[s("span",Te,l(o(d)(o(y).nomOfAtts)),1),N(" "+l((B=e==null?void 0:e.progress)==null?void 0:B.length),1)])])]}),default:z(()=>[s("div",Be,[s("div",Fe,[s("h5",Oe,l(o(d)(o(y).att)),1),s("h5",Ve,l(o(d)(o(y).score)),1),s("h5",be,l(o(d)(o(y).timeToAns)),1),s("h5",je,l(o(d)(o(y).date)),1)]),(i(!0),u(O,null,Q(e==null?void 0:e.progress,(g,B)=>(i(),u("div",He,[s("h5",null,l(B+1),1),s("h5",null,l(g==null?void 0:g.score_prcentage)+"%",1),s("h5",null,l(g==null?void 0:g.time_taken)+" sec",1),s("h5",null,l(c(g==null?void 0:g.created_at)),1)]))),256))])]),_:2},1024)]),_:2},1024)])):$("",!0)])}),256))])]),_:2},1024))),128))]),_:2},1024)])])]),_:2},1024))),128))]),_:1})]),N(" "+l(L.value),1)],64))}}),Ye=G(Qe,[["__scopeId","data-v-fc2aae22"]]),Ge={key:0,class:"container"},Xe=["width","height"],Je=Y({__name:"PiChart",props:{data:{},width:{},height:{},innerRadiusRatio:{}},setup(E){const _=E,v=V(null),I=U(()=>{var c,h,f;if(v.value){const a=v.value.getContext("2d");a&&L(a,_.data,_.width,_.height,_.innerRadiusRatio)}return Math.floor(((c=_.data[0])==null?void 0:c.value)/(((h=_.data[0])==null?void 0:h.value)+((f=_.data[1])==null?void 0:f.value))*100)});function L(c,h,f,a,t){const e=h.reduce((w,x)=>w+x.value,0);let k=1.5*Math.PI;const p=f/2,M=a/2,D=Math.min(f,a)/2,T=D*t;h.forEach(w=>{const x=w.value/e*2*Math.PI;c.beginPath(),c.arc(p,M,D,k,k+x),c.arc(p,M,T,k+x,k,!0),c.closePath();const R=c.createLinearGradient(150,0,0,150);R.addColorStop(0,w.color1),R.addColorStop(1,w.color2),c.fillStyle=R,c.fill(),k+=x})}return(c,h)=>c.data?(i(),u("div",Ge,[s("canvas",{ref_key:"donutChart",ref:v,width:c.width,height:c.height},null,8,Xe),s("h3",null,[s("span",null,l(o(d)(o(y).completed)),1),s("span",null,l(I.value)+"%",1)])])):$("",!0)}}),Ke=G(Je,[["__scopeId","data-v-3ae7506e"]]),Ue={class:"container",style:{width:"75%","margin-inline":"auto"}},We={key:0,class:"progress"},Ze={class:"completed"},me={class:"in-progress"},et=Y({__name:"CoursesProgress",props:["selectedChildId"],setup(E){const _=E,v=V(),I=V([]),L=U(()=>{let h=[];I.value=[],v.value=null;const f=new K("get_child_enrollments");if(_.selectedChildId)return f.callApi({child_id:_.selectedChildId}).then(a=>{var t,e;if(a.data.enrollments){h=a.data.enrollments,v.value=h;let k=(t=v.value)==null?void 0:t.filter(p=>p==null?void 0:p.is_completed).length;I.value=[k,((e=v.value)==null?void 0:e.length)-k],c.value=[{value:I.value[0],color1:"#7302ff",color2:"#01abff"},{value:I.value[1],color1:"#aaa",color2:"#aaa"}]}}),null}),c=V();return(h,f)=>{var a,t;return i(),u(O,null,[N(l(L.value)+" ",1),s("main",null,[s("div",Ue,[E.selectedChildId?(i(),u("div",We,[s("div",Ze,[s("p",null,l((a=v.value)==null?void 0:a.length),1),s("p",null,l(o(d)(o(y).coursesEnrolled)),1)]),s("div",me,[s("p",null,l((t=v.value)==null?void 0:t.filter(e=>e==null?void 0:e.is_completed).length),1),s("p",null,l(o(d)(o(y).coursesCompleted)),1)])])):$("",!0),A(Ke,{style:{transform:"translate(0,-1rem)"},data:c.value,width:150,height:150,innerRadiusRatio:.8},null,8,["data"])])])],64)}}}),tt=G(et,[["__scopeId","data-v-1499c71e"]]),st={class:"container"},ot={class:"wrapper"},lt=Y({__name:"childrenProgress",setup(E){const _=V(null);return(v,I)=>(i(),u(O,null,[A(le),s("div",st,[A(oe,{class:"sidebar",selected:"childProgress"}),s("div",ot,[A(ce,{onSelectedChild:I[0]||(I[0]=L=>_.value=L)}),A(tt,{selectedChildId:_.value},null,8,["selectedChildId"]),A(Ye,{selectedChildId:_.value},null,8,["selectedChildId"])])]),A(re)],64))}}),ut=G(lt,[["__scopeId","data-v-21142fc9"]]);export{ut as default};
