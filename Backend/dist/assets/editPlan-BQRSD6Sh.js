import{d as se,H as E,r as C,au as l,c as g,b as u,e as a,v as x,w as S,f as c,B as f,y as ue,i as ce,o as v,N as re,t as de,z as pe,V as ve,m as q,l as Q,F as me,p as _e,n as he,_ as ge}from"./index-BJdoJiJr.js";import{s as z}from"./dropdown.esm-DB7wIzJi.js";import{s as L,a as be}from"./accordiontab.esm-DYKSXxbK.js";import"./index.esm-X8XxGBs1.js";const b=j=>(_e("data-v-57f0993d"),j=j(),he(),j),fe={class:"container"},Ve={class:"element"},Ce=b(()=>a("h3",null,"Road Map",-1)),ye={class:"row"},Ae={class:"element"},ke=b(()=>a("span",null,"Course",-1)),Ie={class:"element"},Ue=b(()=>a("span",null,"Prequsite",-1)),Re=b(()=>a("h3",null,"Objectives",-1)),we={class:"row"},xe={class:"element"},je=b(()=>a("span",null,"English",-1)),Ee={class:"element"},Se=b(()=>a("span",null,"Arabic",-1)),qe=b(()=>a("h3",null,"Categories",-1)),Be={class:"row"},ze={class:"element"},Le=b(()=>a("span",null,"Category",-1)),Me={class:"btn-container"},Ne=se({__name:"editPlan",setup(j){const M=ue(),W=ce(),X=new E("get_plan"),Y=new E("get_courses"),Z=new E("get_categories"),t=C(),y=C([]),B=C([]),r=C([]),m=C([]),_=C([]);Z.callApi().then(n=>{var V;n!=null&&n.success&&(B.value=(V=n==null?void 0:n.data)==null?void 0:V.categories,Y.callApi({}).then(o=>{var e,s;o!=null&&o.success&&(y.value=(e=o==null?void 0:o.data)==null?void 0:e.courses,X.callApi({plan_id:(s=M.params)==null?void 0:s.planId}).then(h=>{var A,k,I,U,i,N,O,P,$,F,D,H,T,G,J,K;if(h!=null&&h.success){t.value=(A=h==null?void 0:h.data)==null?void 0:A.plan,l.value={...l.value,titleEn:{...l.value.titleEn,variable:((I=(k=t.value)==null?void 0:k.title)==null?void 0:I.en)||""},titleAr:{...l.value.titleAr,variable:((i=(U=t.value)==null?void 0:U.title)==null?void 0:i.ar)||""},descriptionEn:{...l.value.descriptionEn,variable:((O=(N=t.value)==null?void 0:N.description)==null?void 0:O.en)||""},descriptionAr:{...l.value.descriptionAr,variable:(($=(P=t.value)==null?void 0:P.description)==null?void 0:$.ar)||""},image:{...l.value.image,variable:((F=t.value)==null?void 0:F.image)||""},minAge:{...l.value.minAge,variable:((D=t.value)==null?void 0:D.min_age)||""},maxAge:{...l.value.maxAge,variable:((H=t.value)==null?void 0:H.max_age)||""},price:{...l.value.price,variable:((T=t.value)==null?void 0:T.price)||""}};for(let p of t==null?void 0:t.value.objectives)m.value.push(p);for(let p of t==null?void 0:t.value.categories)_.value.push((G=B.value)==null?void 0:G.find(d=>(d==null?void 0:d.id)==(p==null?void 0:p.Id)));r.value=[];for(let p=0;p<((K=(J=t.value)==null?void 0:J.courses)==null?void 0:K.length);p++)r.value.push({course:y.value.find(d=>{var R,w;return(d==null?void 0:d.id)==((w=(R=t.value)==null?void 0:R.courses[p])==null?void 0:w.Id)}),restriction:y.value.find(d=>{var R,w;return(d==null?void 0:d.id)==((w=(R=t.value)==null?void 0:R.courses[p])==null?void 0:w.ristriction_on_course)})})}}))}))});function ee(){r.value.push({restriction:null,course:null})}function ae(n){r.value.splice(n,1)}function le(){_.value.push({Id:null,ristriction_on_course:null})}function te(n){_.value.splice(n,1)}function oe(){m.value.push({en:null,ar:null})}function ne(n){m.value.splice(n,1)}function ie(){var e,s,h,A,k,I,U;let n=[];for(let i=0;i<r.value.length;i++)n.push({Id:(s=(e=r.value[i])==null?void 0:e.course)==null?void 0:s.id,ristriction_on_course:(A=(h=r.value[i])==null?void 0:h.restriction)==null?void 0:A.id});let V=[];for(let i=0;i<_.value.length;i++)V.push({Id:(k=_.value[i])==null?void 0:k.id,title:(I=_.value[i])==null?void 0:I.category});const o={plan_id:(U=M.params)==null?void 0:U.planId,update:{name:l.value.titleEn.variable,title:{en:l.value.titleEn.variable,ar:l.value.titleAr.variable},description:{en:l.value.descriptionEn.variable,ar:l.value.descriptionAr.variable},courses:n,categories:V,objectives:m.value,price:l.value.price.variable,min_age:l.value.minAge.variable,max_age:l.value.maxAge.variable,image:l.value.image.variable}};new E("update_plan").callApi(o).then(i=>{i!=null&&i.success&&W.push("/manageCourses")})}return(n,V)=>(v(),g(x,null,[u(re),a("div",fe,[(v(!0),g(x,null,S(c(l),o=>(v(),g("div",Ve,[a("h3",null,de(o.label),1),(v(),pe(ve(o.component),{type:o.inputType,modelValue:o.variable,"onUpdate:modelValue":e=>o.variable=e},null,8,["type","modelValue","onUpdate:modelValue"]))]))),256)),u(c(be),{activeIndex:0},{default:f(()=>[u(c(L),{pt:{headerAction:{style:"padding-inline:0"}}},{header:f(()=>[Ce]),default:f(()=>[(v(!0),g(x,null,S(r.value,(o,e)=>(v(),g("div",ye,[a("div",Ae,[ke,u(c(z),{modelValue:r.value[e].course,"onUpdate:modelValue":s=>r.value[e].course=s,options:y.value,optionLabel:"title.en",placeholder:"Select a Course"},null,8,["modelValue","onUpdate:modelValue","options"])]),a("div",Ie,[Ue,u(c(z),{modelValue:r.value[e].restriction,"onUpdate:modelValue":s=>r.value[e].restriction=s,options:y.value,optionLabel:"title.en",placeholder:"Select a Course"},null,8,["modelValue","onUpdate:modelValue","options"])]),u(c(q),{onClick:()=>{ae(e)},label:"Remove",style:{"background-color":"red"}},null,8,["onClick"])]))),256)),a("div",{class:"btn-container",style:{"margin-right":"2rem"}},[a("i",{class:"pi pi-plus-circle",onClick:ee,style:{"font-size":"1.5rem",color:"var(--accent1)"}})])]),_:1}),u(c(L),{pt:{headerAction:{style:"padding-inline:0"}}},{header:f(()=>[Re]),default:f(()=>[(v(!0),g(x,null,S(m.value,(o,e)=>(v(),g("div",we,[a("div",xe,[je,u(c(Q),{modelValue:m.value[e].en,"onUpdate:modelValue":s=>m.value[e].en=s},null,8,["modelValue","onUpdate:modelValue"])]),a("div",Ee,[Se,u(c(Q),{modelValue:m.value[e].ar,"onUpdate:modelValue":s=>m.value[e].ar=s},null,8,["modelValue","onUpdate:modelValue"])]),u(c(q),{onClick:()=>{ne(e)},label:"Remove",style:{"background-color":"red"}},null,8,["onClick"])]))),256)),a("div",{class:"btn-container",style:{"margin-right":"2rem"}},[a("i",{class:"pi pi-plus-circle",onClick:oe,style:{"font-size":"1.5rem",color:"var(--accent1)"}})])]),_:1}),u(c(L),{pt:{headerAction:{style:"padding-inline:0"}}},{header:f(()=>[qe]),default:f(()=>[(v(!0),g(x,null,S(_.value,(o,e)=>(v(),g("div",Be,[a("div",ze,[Le,u(c(z),{modelValue:_.value[e],"onUpdate:modelValue":s=>_.value[e]=s,options:B.value,optionLabel:"category.en"},null,8,["modelValue","onUpdate:modelValue","options"])]),u(c(q),{onClick:()=>{te(e)},label:"Remove",style:{"background-color":"red"}},null,8,["onClick"])]))),256)),a("div",{class:"btn-container",style:{"margin-right":"2rem"}},[a("i",{class:"pi pi-plus-circle",onClick:le,style:{"font-size":"1.5rem",color:"var(--accent1)"}})])]),_:1})]),_:1}),a("div",Me,[u(c(q),{onClick:ie,label:"Save Changes",style:{"margin-top":"2rem"}})])]),u(me)],64))}}),De=ge(Ne,[["__scopeId","data-v-57f0993d"]]);export{De as default};
