import{d as x,c as f,e as t,t as a,f as e,w as V,x as F,h as K,o as r,s as i,k as m,p as ae,n as ie,_ as E,I as T,D as L,i as O,b as y,m as G,K as Z,z as ee,g as k,J as ue,a as ce,r as C,H as b,L as re,G as de,N as pe,F as ve}from"./index-DY8XNVPR.js";import{A as me,E as he,G as _e,P as ge}from"./PromoCodeDialog-D2HNYQmz.js";import{s as fe,a as we}from"./accordiontab.esm-ChxY9R7F.js";const le=s=>(ae("data-v-c0b38cc4"),s=s(),ie(),s),Ie={class:"container"},Ce={class:"wrapper"},ye={class:"wrapper"},be={class:"wrapper"},ke=le(()=>t("i",{class:"pi pi-clock"},null,-1)),De={class:"wrapper"},$e=le(()=>t("i",{class:"pi pi-dollar"},null,-1)),qe=x({__name:"Information",props:["title","price","categories","min_age","max_age","duration"],setup(s){return(D,h)=>(r(),f("main",null,[t("div",Ie,[t("h2",null,a(e(i)(e(m).courseInfo)),1),t("div",Ce,[t("h4",null,a(e(i)(e(m).title)),1),t("p",null,a(s.title),1)]),t("div",ye,[t("h4",null,a(e(i)(e(m).categories)),1),(r(!0),f(V,null,F(s.categories,n=>(r(),f("p",null,a(e(i)(n.title)),1))),256))]),t("div",be,[t("h4",null,[K(a(e(i)(e(m).duration)),1),ke]),t("p",null,a(s.duration)+" "+a(e(i)(e(m).days)),1)]),t("div",De,[t("h4",null,[K(a(e(i)(e(m).price)),1),$e]),t("p",null,a(s.price)+" L.E",1)])])]))}}),Pe=E(qe,[["__scopeId","data-v-c0b38cc4"]]),Te={class:"dialog"},xe=x({__name:"CourseBelongsToPlanDialog",props:["showDialog","planId","childId"],setup(s){const D=O(),h=s;return(n,g)=>(r(),T(e(Z),{visible:h.showDialog,"onUpdate:visible":g[1]||(g[1]=u=>h.showDialog=u),modal:"",pt:{root:"border-none",mask:{style:"backdrop-filter: blur(2px)"}}},{container:L(({closeCallback:u})=>[t("div",Te,[t("h2",null,a(e(i)(e(m).courseBelongsToPlan)),1),y(e(G),{label:e(i)(e(m).viewPlans),style:{width:"10rem"},onClick:g[0]||(g[0]=A=>e(D).push(`/plan/${s.planId}/${s.childId}`))},null,8,["label"])])]),_:1},8,["visible","pt"]))}}),Ee=E(xe,[["__scopeId","data-v-004f4601"]]),Ae={class:"course-description"},Be={class:"head"},Re=["src"],Se={class:"description"},ze={class:"header"},Me={key:2,style:{color:"#f33"}},Ne={key:0,class:"objectives"},je=x({__name:"CourseDescribtion",props:["course","isEnrolled","notShowButton","userType"],emits:["enroll","viewMaterial"],setup(s,{emit:D}){return(h,n)=>{var g,u,A,q,B,R,S,P,z,$;return r(),f("div",Ae,[t("div",Be,[t("h1",null,a(e(i)((g=s.course)==null?void 0:g.title)),1)]),t("img",{src:(u=s.course)==null?void 0:u.image,alt:"",class:ee({locked:(A=s.course)==null?void 0:A.is_locked})},null,10,Re),t("div",Se,[t("div",ze,[t("h2",null,a(e(i)(e(m).courseDescription)),1),!s.isEnrolled&&!s.notShowButton&&!((q=s.course)!=null&&q.is_locked)&&s.userType!=="Admin"?(r(),T(e(G),{key:0,label:e(i)(e(m).enrollNow),onClick:n[0]||(n[0]=()=>{h.$emit("enroll")})},null,8,["label"])):k("",!0),s.isEnrolled&&!s.notShowButton&&!((B=s.course)!=null&&B.is_locked)||s.userType=="Admin"?(r(),T(e(G),{key:1,label:e(i)(e(m).viewMat),onClick:n[1]||(n[1]=()=>{h.$emit("viewMaterial")})},null,8,["label"])):k("",!0),(R=s.course)!=null&&R.is_locked?(r(),f("p",Me,a(e(i)(e(m).locked)),1)):k("",!0)]),t("p",null,a(e(i)((S=s.course)==null?void 0:S.description)),1)]),((z=(P=s.course)==null?void 0:P.objectives)==null?void 0:z.length)>0?(r(),f("div",Ne,[t("h2",null,a(e(i)(e(m).courseObjectives)),1),t("ul",null,[(r(!0),f(V,null,F(($=s.course)==null?void 0:$.objectives,M=>(r(),f("li",null,a(e(i)(M)),1))),256))])])):k("",!0)])}}}),Le=E(je,[["__scopeId","data-v-d058e86f"]]),Ve={class:"card"},Fe={style:{display:"flex","padding-left":"2rem",gap:"2rem"}},Ge={key:0},He={key:1},Ue={key:2},Je={style:{padding:"0","margin-block":"0.35rem",color:"var(--accent1)"},class:"m-0"},Ke=x({__name:"CourseMaterial",props:["chapters"],setup(s){return(D,h)=>(r(),f("div",Ve,[t("h2",null,a(e(i)(e(m).courseContent)),1),y(e(we),{multiple:!0,activeIndex:[]},{default:L(()=>[(r(!0),f(V,null,F(s.chapters,(n,g)=>(r(),T(e(fe),{key:n.title,pt:{root:{style:"margin-block:0.5rem; border:solid 2px var(--accent1); border-radius:1rem; padding:0.25rem;"}}},{header:L(()=>[t("div",null,[t("h4",null,a(e(i)(n.title)),1),t("div",Fe,[n.lessonCount?(r(),f("h5",Ge,a(n.lessonCount)+" "+a(e(i)(e(m).lessons)),1)):k("",!0),n.quizCount?(r(),f("h5",He,a(n.quizCount)+" "+a(e(i)(e(m).quiz)),1)):k("",!0),n.activityCount?(r(),f("h5",Ue,a(n.activityCount)+" "+a(e(i)(e(m).activity)),1)):k("",!0)])])]),default:L(()=>[(r(!0),f(V,null,F(n.materials,u=>(r(),f("p",Je,[t("i",{class:ee(u.icon)},null,2),K(" "+a(u.title),1)]))),256))]),_:2},1032,["pt"]))),128))]),_:1})]))}}),Oe=E(Ke,[["__scopeId","data-v-2b3d0d4a"]]),Qe={class:"dialog"},We=x({__name:"PrequisiteDialog",props:["showDialog","course"],emits:["removeDialog"],setup(s,{emit:D}){O();const h=s;return(n,g)=>(r(),T(e(Z),{visible:h.showDialog,"onUpdate:visible":g[1]||(g[1]=u=>h.showDialog=u),modal:"",pt:{root:"border-none",mask:{style:"backdrop-filter: blur(2px)"}}},{container:L(({closeCallback:u})=>[t("div",Qe,[t("h2",null,a(e(i)(e(m).courseHasPrequisite))+" "+a(s.course),1),y(e(G),{label:e(i)(e(m).cancell),onClick:g[0]||(g[0]=()=>{n.$emit("removeDialog")})},null,8,["label"])])]),_:1},8,["visible","pt"]))}}),Xe=E(We,[["__scopeId","data-v-b41bb835"]]),Ye={class:"big-container"},Ze={class:"content"},el=x({__name:"courseDetails",setup(s){const D=ue(),h=ce(),n=de(),g=O(),u=C(),A=new b("get_course"),q=C([]);A.callApi({course_id:n.params.courseId}).then(v=>{var c,w;u.value=(c=v==null?void 0:v.data)==null?void 0:c.course;for(let d of(w=u.value)==null?void 0:w.chapters){let p={title:"",lessonCount:0,quizCount:0,activityCount:0,materials:[]};p.title=d==null?void 0:d.title;for(let l of d==null?void 0:d.materials){for(let o of re)(l==null?void 0:l.type)==o.name&&p.materials.push({title:i(l.title),icon:o.icon});(l==null?void 0:l.type)==="Lesson"&&(p.lessonCount=p.lessonCount+1),(l==null?void 0:l.type)==="Quiz"&&(p.quizCount=p.quizCount+1),((l==null?void 0:l.type)==="Activity"||(l==null?void 0:l.type)==="Project"||(l==null?void 0:l.type)==="Simulation")&&(p.activityCount=p.activityCount+1)}q.value.push(p)}});const B=C(),R=C(!1),S=C(!1),P=C(!1),z=C(!1),$=C(!1),M=C(),H=C(!1);function oe(){var v,c,w,d,p;D.getIsAuthorized?((v=h.getInfo)==null?void 0:v.userType)=="Child"?new b("get_course_plan").callApi({course_id:(c=n.params)==null?void 0:c.courseId}).then(o=>{var _,I;(o==null?void 0:o.success)==!1?$.value=!0:(o==null?void 0:o.success)==!0&&(P.value=!0,M.value=(I=(_=o==null?void 0:o.data)==null?void 0:_.plan)==null?void 0:I.id)}):((w=h.getInfo)==null?void 0:w.userType)=="Parent"&&(((d=n.params)==null?void 0:d.childId)=="0"?z.value=!0:new b("get_course_plan").callApi({course_id:(p=n.params)==null?void 0:p.courseId}).then(o=>{var _,I;(o==null?void 0:o.success)==!1?$.value=!0:(o==null?void 0:o.success)==!0&&(P.value=!0,M.value=(I=(_=o==null?void 0:o.data)==null?void 0:_.plan)==null?void 0:I.id)})):g.push("/login")}function te(v){var d,p,l;$.value=!1;let c;((d=h.getInfo)==null?void 0:d.userType)=="Parent"?c=n.params.childId??"":((p=h.getInfo)==null?void 0:p.userType)=="Child"&&(c=h.getInfo.id),new b("request_enrollment").callApi({request:{student_id:c,course_id:(l=u.value)==null?void 0:l.id,promo_code:v}}).then(o=>{var _,I;o!=null&&o.success&&(B.value=(I=(_=o==null?void 0:o.data)==null?void 0:_.request)==null?void 0:I.price,S.value=!0)})}const Q=C(!1),W=C();new b("get_enrollment").callApi({course_id:n.params.courseId}).then(v=>{var c,w,d;(c=v==null?void 0:v.data)!=null&&c.enrollment&&(Q.value=!0,W.value=(d=(w=v==null?void 0:v.data)==null?void 0:w.enrollment)==null?void 0:d.id)});const U=C(""),X=C(""),se=new b("get_course_plan");function ne(){se.callApi({course_id:n.params.courseId}).then(v=>{var w,d,p;let c=(d=(w=v==null?void 0:v.data)==null?void 0:w.plan)==null?void 0:d.courses;U.value=(p=c==null?void 0:c.find(l=>(l==null?void 0:l.Id)==n.params.courseId))==null?void 0:p.ristriction_on_course,new b("get_course").callApi({course_id:U.value||""}).then(l=>{var o,_;X.value=i((_=(o=l==null?void 0:l.data)==null?void 0:o.course)==null?void 0:_.title)||""}),new b("get_enrollment").callApi({course_id:U.value||""}).then(l=>{var o,_,I,N,j;((_=(o=l==null?void 0:l.data)==null?void 0:o.enrollment)==null?void 0:_.is_completed)==!1?H.value=!0:g.push(`/viewCoursePage/${n.params.courseId}/${W.value}/${(j=(N=(I=u.value)==null?void 0:I.chapters[0])==null?void 0:N.materials[0])==null?void 0:j.Id}`)})})}return(v,c)=>{var w,d,p,l,o,_,I,N,j,Y;return r(),f(V,null,[y(pe),t("div",Ye,[y(me,{showDialog:R.value,onRemoveDialog:c[0]||(c[0]=J=>{R.value=!1})},null,8,["showDialog"]),y(Xe,{course:X.value,"show-dialog":H.value,onRemoveDialog:c[1]||(c[1]=J=>H.value=!1)},null,8,["course","show-dialog"]),y(he,{showDialog:S.value,cost:B.value},null,8,["showDialog","cost"]),y(_e,{showDialog:z.value},null,8,["showDialog"]),y(Ee,{showDialog:P.value,planId:M.value,childId:(w=e(n).params)==null?void 0:w.childId},null,8,["showDialog","planId","childId"]),y(ge,{showDialog:$.value,onPromoCode:c[2]||(c[2]=J=>{te(J)})},null,8,["showDialog"]),y(Le,{course:u.value,isEnrolled:Q.value,userType:(d=e(h).getInfo)==null?void 0:d.userType,notShowButton:((p=e(h).getInfo)==null?void 0:p.userType)=="Parent"&&e(n).params.isEnrolled=="1",onEnroll:oe,onViewMaterial:ne},null,8,["course","isEnrolled","userType","notShowButton"]),t("div",Ze,[((l=q.value)==null?void 0:l.length)>0?(r(),T(Oe,{key:0,chapters:q.value},null,8,["chapters"])):k("",!0),y(Pe,{categories:(o=u.value)==null?void 0:o.categories,title:e(i)((_=u.value)==null?void 0:_.title),price:(I=u.value)==null?void 0:I.price,duration:(N=u.value)==null?void 0:N.duration,min_age:(j=u.value)==null?void 0:j.min_age,max_age:(Y=u.value)==null?void 0:Y.max_age},null,8,["categories","title","price","duration","min_age","max_age"])])]),y(ve)],64)}}}),nl=E(el,[["__scopeId","data-v-73ead709"]]);export{nl as default};
