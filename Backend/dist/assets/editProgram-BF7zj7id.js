import{d as ge,H as I,r as q,b4 as p,c as k,b as i,e as l,z as A,f as n,C as P,w as _e,i as be,o as V,N as fe,D as z,t as ee,y as le,a5 as Ve,m as E,l as T,aX as ae,g as te,h as he,F as Ce,_ as ke}from"./index-DPyxnlxI.js";import{s as O}from"./index-Bwp1VVHy.js";import{s as se}from"./index-BsrvICpx.js";import{s as H}from"./index-CNhvXrsE.js";import"./index-CEQ4rZCR.js";const Ae={class:"container"},Ue={class:"tab_container"},ye={class:"element"},Te={class:"tab_container"},Le={class:"tracks"},we={class:"btn-container"},Ee={class:"element",style:{"margin-bottom":"0.5rem"}},$e={key:0,class:"track_container",style:{"border-top":"2px solid var(--text)","padding-top":"1rem"}},Ne={class:"btn-container"},xe={class:"element"},De={class:"element"},Se={class:"element"},Me={class:"element"},Re={class:"images"},Be={class:"image"},Fe=["src"],qe={class:"image"},Pe=["src"],ze={class:"image"},He=["src"],je={class:"image"},Ie=["src"],Oe=["onClick"],Xe=["onClick"],Ge={class:"level_container"},Je={class:"element"},Ke={class:"element"},Qe={class:"btn-container"},We={class:"row"},Ye={class:"courseelement"},Ze=["onClick"],el={class:"btn-container"},ll={class:"btn-container"},al={class:"tab_container"},tl={class:"row"},sl={class:"courseelement"},ol=["onClick"],il={class:"btn-container"},nl={class:"btn-container"},ul=ge({__name:"editProgram",setup(dl){const X=_e(),oe=be(),ie=new I("get_program"),ne=new I("get_courses"),b=q(),y=q([]),U=q([]),f=q([]),t=q();ne.callApi({}).then(o=>{var e,a;o!=null&&o.success&&(y.value=(e=o==null?void 0:o.data)==null?void 0:e.courses,ie.callApi({program_id:(a=X.params)==null?void 0:a.programId}).then(s=>{var u,r,m,L,N,x,D,S,M,R,B,c,v,g,h,$,F,J,K,Q,W,Y,Z;if(s!=null&&s.success){b.value=(u=s==null?void 0:s.data)==null?void 0:u.program,p.value={...p.value,titleEn:{...p.value.titleEn,variable:((m=(r=b.value)==null?void 0:r.title)==null?void 0:m.en)||""},titleAr:{...p.value.titleAr,variable:((N=(L=b.value)==null?void 0:L.title)==null?void 0:N.ar)||""},descriptionEn:{...p.value.descriptionEn,variable:((D=(x=b.value)==null?void 0:x.description)==null?void 0:D.en)||""},descriptionAr:{...p.value.descriptionAr,variable:((M=(S=b.value)==null?void 0:S.description)==null?void 0:M.ar)||""},image:{...p.value.image,variable:((R=b.value)==null?void 0:R.image)||""},minAge:{...p.value.minAge,variable:((B=b.value)==null?void 0:B.min_age)||""},maxAge:{...p.value.maxAge,variable:((c=b.value)==null?void 0:c.max_age)||""}},U.value=[];for(let w=0;w<((g=(v=b.value)==null?void 0:v.road_map)==null?void 0:g.length);w++)U.value.push({course:y.value.find(d=>{var _,C;return(d==null?void 0:d.id)==((C=(_=b.value)==null?void 0:_.road_map[w])==null?void 0:C.id)})});f.value=[];for(let w=0;w<(($=(h=b.value)==null?void 0:h.tracks)==null?void 0:$.length);w++){let d=(F=b.value)==null?void 0:F.tracks[w];for(let _=0;_<((J=d==null?void 0:d.levels)==null?void 0:J.length);_++)for(let C=0;C<((Q=(K=d==null?void 0:d.levels[_])==null?void 0:K.courses)==null?void 0:Q.length);C++)d.levels[_].courses[C]=(W=y.value)==null?void 0:W.find(j=>(j==null?void 0:j.id)==d.levels[_].courses[C]);for(let _=0;_<((Y=d==null?void 0:d.courses)==null?void 0:Y.length);_++)d.courses[_]=(Z=y.value)==null?void 0:Z.find(C=>(C==null?void 0:C.id)==(d==null?void 0:d.courses[_]));f.value.push(d)}}}))});function ue(){U.value.push({course:null})}function de(){var o;f.value.push({id:Math.floor(Math.random()*1e9),title:{en:"New Track",ar:""},description:{en:"",ar:""},female_image:"",male_image:"",image:"",video:"",levels:[],courses:[]}),t.value=f.value[((o=f.value)==null?void 0:o.length)-1]}function re(){var o;(o=t.value)==null||o.levels.push({title:{en:"New Level",ar:""},courses:[]})}function ve(o){var e,a;(a=(e=t.value)==null?void 0:e.levels[o])==null||a.courses.push({course:null})}function pe(o){U.value.splice(o,1)}function me(){var e,a,s;let o=-1;for(let u=0;u<f.value.length;u++)((e=f.value[u])==null?void 0:e.title.en)==((s=(a=t.value)==null?void 0:a.title)==null?void 0:s.en)&&(o=u);f.value.splice(o,1),t.value=f.value[0]}function ce(){var s,u,r,m,L,N,x,D,S,M,R,B;let o=[];for(let c=0;c<U.value.length;c++)o.push({id:(u=(s=U.value[c])==null?void 0:s.course)==null?void 0:u.id});let e=[];for(let c=0;c<((r=f.value)==null?void 0:r.length);c++){let v=f.value[c];for(let g=0;g<((m=v==null?void 0:v.levels)==null?void 0:m.length);g++)for(let h=0;h<((N=(L=v==null?void 0:v.levels[g])==null?void 0:L.courses)==null?void 0:N.length);h++)v.levels[g].courses[h]=(D=(x=y.value)==null?void 0:x.find($=>{var F;return($==null?void 0:$.id)==((F=v.levels[g].courses[h])==null?void 0:F.id)}))==null?void 0:D.id;for(let g=0;g<((S=v==null?void 0:v.courses)==null?void 0:S.length);g++)v.courses[g]=(R=(M=y.value)==null?void 0:M.find(h=>(h==null?void 0:h.id)==(v==null?void 0:v.courses[g])))==null?void 0:R.id;e.push(v)}const a={program_id:(B=X.params)==null?void 0:B.programId,update:{title:{en:p.value.titleEn.variable,ar:p.value.titleAr.variable},description:{en:p.value.descriptionEn.variable,ar:p.value.descriptionAr.variable},min_age:p.value.minAge.variable,max_age:p.value.maxAge.variable,image:p.value.image.variable,road_map:o,tracks:e}};new I("update_program").callApi(a).then(c=>{c!=null&&c.success&&oe.push("/manageCourses")})}function G(o,e){var s,u,r,m;if(o<0||e<0||o>=((s=t.value)==null?void 0:s.levels.length)||e>=((u=t.value)==null?void 0:u.levels.length))return;const a=(r=t.value)==null?void 0:r.levels[o];t.value.levels[o]=(m=t.value)==null?void 0:m.levels[e],t.value.levels[e]=a}return(o,e)=>(V(),k(P,null,[i(fe),l("div",Ae,[i(n(se),null,{default:A(()=>[i(n(H),null,{header:A(()=>e[11]||(e[11]=[l("div",{class:"tab_header"},[l("i",{class:"pi pi-info"}),l("p",null," Basic Info ")],-1)])),default:A(()=>[l("div",Ue,[(V(!0),k(P,null,z(n(p),a=>(V(),k("div",ye,[l("h3",null,ee(a.label),1),(V(),le(Ve(a.component),{type:a.inputType,modelValue:a.variable,"onUpdate:modelValue":s=>a.variable=s},null,8,["type","modelValue","onUpdate:modelValue"]))]))),256))])]),_:1}),i(n(H),null,{header:A(()=>e[12]||(e[12]=[l("div",{class:"tab_header"},[l("i",{class:"pi pi-bars"}),l("p",null," Tracks")],-1)])),default:A(()=>[l("div",Te,[l("div",Le,[l("div",we,[i(n(E),{onClick:de,icon:"pi pi-plus-circle",label:"Add Track"})]),l("div",Ee,[e[13]||(e[13]=l("h3",null,"Select Track",-1)),i(n(O),{modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=a=>t.value=a),options:f.value,optionLabel:"title.en",placeholder:"Select a track"},null,8,["modelValue","options"])]),t.value?(V(),k("div",$e,[l("div",Ne,[i(n(E),{onClick:e[1]||(e[1]=a=>me()),icon:"pi pi-times-circle",label:"Delete Track",style:{"background-color":"red"}})]),l("div",xe,[e[14]||(e[14]=l("h4",null,"English Title",-1)),i(n(T),{modelValue:t.value.title.en,"onUpdate:modelValue":e[2]||(e[2]=a=>t.value.title.en=a)},null,8,["modelValue"])]),l("div",De,[e[15]||(e[15]=l("h4",null,"Arabic Title",-1)),i(n(T),{modelValue:t.value.title.ar,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value.title.ar=a)},null,8,["modelValue"])]),l("div",Se,[e[16]||(e[16]=l("h4",null,"English Description",-1)),i(n(ae),{modelValue:t.value.description.en,"onUpdate:modelValue":e[4]||(e[4]=a=>t.value.description.en=a)},null,8,["modelValue"])]),l("div",Me,[e[17]||(e[17]=l("h4",null,"Arabic Description",-1)),i(n(ae),{modelValue:t.value.description.ar,"onUpdate:modelValue":e[5]||(e[5]=a=>t.value.description.ar=a)},null,8,["modelValue"])]),l("div",Re,[l("div",Be,[e[18]||(e[18]=l("h4",null,"Female Image",-1)),i(n(T),{modelValue:t.value.female_image,"onUpdate:modelValue":e[6]||(e[6]=a=>t.value.female_image=a)},null,8,["modelValue"]),l("img",{src:t.value.female_image,alt:""},null,8,Fe)]),l("div",qe,[e[19]||(e[19]=l("h4",null,"Male Image",-1)),i(n(T),{modelValue:t.value.male_image,"onUpdate:modelValue":e[7]||(e[7]=a=>t.value.male_image=a)},null,8,["modelValue"]),l("img",{src:t.value.male_image,alt:""},null,8,Pe)]),l("div",ze,[e[20]||(e[20]=l("h4",null,"Image",-1)),i(n(T),{modelValue:t.value.image,"onUpdate:modelValue":e[8]||(e[8]=a=>t.value.image=a)},null,8,["modelValue"]),l("img",{src:t.value.image,alt:""},null,8,He)]),l("div",je,[e[21]||(e[21]=l("h4",null,"Video",-1)),i(n(T),{modelValue:t.value.video,"onUpdate:modelValue":e[9]||(e[9]=a=>t.value.video=a)},null,8,["modelValue"]),t.value.video?(V(),k("iframe",{key:0,style:{"aspect-ratio":"1.75/1"},src:t.value.video,alt:""},null,8,Ie)):te("",!0)])]),e[24]||(e[24]=l("h3",null,"Levels",-1)),i(n(se),{scrollable:!0},{default:A(()=>{var a;return[(V(!0),k(P,null,z((a=t.value)==null?void 0:a.levels,(s,u)=>(V(),le(n(H),{key:u},{header:A(()=>[l("i",{class:"pi pi-angle-left",onClick:r=>G(u,u-1)},null,8,Oe),he(" "+ee(s.title.en)+" ",1),l("i",{class:"pi pi-angle-right",onClick:r=>G(u,u+1)},null,8,Xe)]),default:A(()=>[l("div",Ge,[l("div",Je,[e[22]||(e[22]=l("h4",null,"English Title",-1)),i(n(T),{modelValue:s.title.en,"onUpdate:modelValue":r=>s.title.en=r},null,8,["modelValue","onUpdate:modelValue"])]),l("div",Ke,[e[23]||(e[23]=l("h4",null,"Arabic Title",-1)),i(n(T),{modelValue:s.title.ar,"onUpdate:modelValue":r=>s.title.ar=r},null,8,["modelValue","onUpdate:modelValue"])]),l("div",Qe,[i(n(E),{onClick:r=>ve(u),icon:"pi pi-plus-circle",label:"Add Level Course",style:{"font-size":"0.75rem"}},null,8,["onClick"])]),(V(!0),k(P,null,z(s.courses,(r,m)=>(V(),k("div",We,[l("div",Ye,[i(n(O),{modelValue:s.courses[m],"onUpdate:modelValue":L=>s.courses[m]=L,options:y.value,optionLabel:"title.en",placeholder:"Select a Course"},null,8,["modelValue","onUpdate:modelValue","options"]),l("i",{class:"pi pi-times-circle",onClick:()=>{s.courses.splice(m,1)}},null,8,Ze)])]))),256)),l("div",el,[i(n(E),{onClick:()=>{var r,m;(m=(r=t.value)==null?void 0:r.levels)==null||m.splice(u,1)},icon:"pi pi-times-circle",label:"Delete Level",style:{"background-color":"red"}},null,8,["onClick"])])])]),_:2},1024))),128))]}),_:1}),l("div",ll,[i(n(E),{onClick:e[10]||(e[10]=a=>re()),icon:"pi pi-plus-circle",label:"Add Level"})])])):te("",!0)])])]),_:1}),i(n(H),null,{header:A(()=>e[25]||(e[25]=[l("div",{class:"tab_header"},[l("i",{class:"pi pi-book"}),l("p",null," Courses")],-1)])),default:A(()=>[l("div",al,[l("div",null,[(V(!0),k(P,null,z(U.value,(a,s)=>(V(),k("div",tl,[l("div",sl,[i(n(O),{modelValue:U.value[s].course,"onUpdate:modelValue":u=>U.value[s].course=u,options:y.value,optionLabel:"title.en",placeholder:"Select a Course"},null,8,["modelValue","onUpdate:modelValue","options"]),l("i",{class:"pi pi-times-circle",onClick:()=>{pe(s)}},null,8,ol)])]))),256)),l("div",il,[i(n(E),{onClick:ue,icon:"pi pi-plus-circle",label:"Add Course"})])])])]),_:1})]),_:1}),l("div",nl,[i(n(E),{onClick:ce,label:"Save Changes"})])]),i(Ce)],64))}}),gl=ke(ul,[["__scopeId","data-v-21497bbe"]]);export{gl as default};
