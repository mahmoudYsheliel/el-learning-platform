import{d as he,H as G,r as F,av as r,c as A,b as s,e,C as U,f as i,v as M,E as ge,i as be,o as f,N as Ve,w as H,t as le,G as ae,V as fe,m as w,l as x,aq as te,g as oe,h as Ce,F as ke,p as Ae,n as Ue,_ as Te}from"./index-DeAx0hMz.js";import{s as O}from"./dropdown.esm-BrjOAaZv.js";import{s as j,a as se}from"./tabpanel.esm-Cg0Y2iTJ.js";import"./index.esm-D2KV1JNy.js";const v=P=>(Ae("data-v-0ee9ae4a"),P=P(),Ue(),P),ye={class:"container"},xe=v(()=>e("div",{class:"tab_header"},[e("i",{class:"pi pi-info"}),e("p",null," Basic Info ")],-1)),Ee={class:"tab_container"},Le={class:"element"},we=v(()=>e("div",{class:"tab_header"},[e("i",{class:"pi pi-bars"}),e("p",null," Tracks")],-1)),Ie={class:"tab_container"},Se={class:"tracks"},Ne={class:"btn-container"},$e={class:"element",style:{"margin-bottom":"0.5rem"}},De=v(()=>e("h3",null,"Select Track",-1)),Re={key:0,class:"track_container",style:{"border-top":"2px solid var(--text)","padding-top":"1rem"}},Be={class:"btn-container"},qe={class:"element"},Fe=v(()=>e("h4",null,"English Title",-1)),Me={class:"element"},Pe=v(()=>e("h4",null,"Arabic Title",-1)),He={class:"element"},je=v(()=>e("h4",null,"English Description",-1)),ze={class:"element"},Ge=v(()=>e("h4",null,"Arabic Description",-1)),Oe={class:"images"},Je={class:"image"},Ke=v(()=>e("h4",null,"Female Image",-1)),Qe=["src"],We={class:"image"},Xe=v(()=>e("h4",null,"Male Image",-1)),Ye=["src"],Ze={class:"image"},el=v(()=>e("h4",null,"Image",-1)),ll=["src"],al={class:"image"},tl=v(()=>e("h4",null,"Video",-1)),ol=["src"],sl=v(()=>e("h3",null,"Levels",-1)),il={class:"level_container"},nl={class:"element"},ul=v(()=>e("h4",null,"English Title",-1)),dl={class:"element"},rl=v(()=>e("h4",null,"Arabic Title",-1)),cl={class:"btn-container"},vl={class:"row"},pl={class:"courseelement"},ml=["onClick"],_l={class:"btn-container"},hl={class:"btn-container"},gl=v(()=>e("div",{class:"tab_header"},[e("i",{class:"pi pi-book"}),e("p",null," Courses")],-1)),bl={class:"tab_container"},Vl={class:"row"},fl={class:"courseelement"},Cl=["onClick"],kl={class:"btn-container"},Al={class:"btn-container"},Ul=he({__name:"editProgram",setup(P){const J=ge(),ie=be(),ne=new G("get_program"),ue=new G("get_courses"),g=F(),y=F([]),T=F([]),b=F([]),t=F();ue.callApi({}).then(n=>{var a,l;n!=null&&n.success&&(y.value=(a=n==null?void 0:n.data)==null?void 0:a.courses,ne.callApi({program_id:(l=J.params)==null?void 0:l.programId}).then(o=>{var c,p,V,E,S,N,$,D,R,B,q,m,d,_,C,I,K,Q,W,X,Y,Z,ee;if(o!=null&&o.success){g.value=(c=o==null?void 0:o.data)==null?void 0:c.program,r.value={...r.value,titleEn:{...r.value.titleEn,variable:((V=(p=g.value)==null?void 0:p.title)==null?void 0:V.en)||""},titleAr:{...r.value.titleAr,variable:((S=(E=g.value)==null?void 0:E.title)==null?void 0:S.ar)||""},descriptionEn:{...r.value.descriptionEn,variable:(($=(N=g.value)==null?void 0:N.description)==null?void 0:$.en)||""},descriptionAr:{...r.value.descriptionAr,variable:((R=(D=g.value)==null?void 0:D.description)==null?void 0:R.ar)||""},image:{...r.value.image,variable:((B=g.value)==null?void 0:B.image)||""},minAge:{...r.value.minAge,variable:((q=g.value)==null?void 0:q.min_age)||""},maxAge:{...r.value.maxAge,variable:((m=g.value)==null?void 0:m.max_age)||""}},T.value=[];for(let L=0;L<((_=(d=g.value)==null?void 0:d.road_map)==null?void 0:_.length);L++)T.value.push({course:y.value.find(u=>{var h,k;return(u==null?void 0:u.id)==((k=(h=g.value)==null?void 0:h.road_map[L])==null?void 0:k.id)})});b.value=[];for(let L=0;L<((I=(C=g.value)==null?void 0:C.tracks)==null?void 0:I.length);L++){let u=(K=g.value)==null?void 0:K.tracks[L];for(let h=0;h<((Q=u==null?void 0:u.levels)==null?void 0:Q.length);h++)for(let k=0;k<((X=(W=u==null?void 0:u.levels[h])==null?void 0:W.courses)==null?void 0:X.length);k++)u.levels[h].courses[k]=(Y=y.value)==null?void 0:Y.find(z=>(z==null?void 0:z.id)==u.levels[h].courses[k]);for(let h=0;h<((Z=u==null?void 0:u.courses)==null?void 0:Z.length);h++)u.courses[h]=(ee=y.value)==null?void 0:ee.find(k=>(k==null?void 0:k.id)==(u==null?void 0:u.courses[h]));b.value.push(u)}}}))});function de(){T.value.push({course:null})}function re(){var n;b.value.push({title:{en:"New Track",ar:""},description:{en:"",ar:""},female_image:"",male_image:"",image:"",video:"",levels:[],courses:[]}),t.value=b.value[((n=b.value)==null?void 0:n.length)-1]}function ce(){var n;(n=t.value)==null||n.levels.push({title:{en:"New Level",ar:""},courses:[]})}function ve(n){var a,l;(l=(a=t.value)==null?void 0:a.levels[n])==null||l.courses.push({course:null})}function pe(n){T.value.splice(n,1)}function me(){var a,l,o;let n=-1;for(let c=0;c<b.value.length;c++)((a=b.value[c])==null?void 0:a.title.en)==((o=(l=t.value)==null?void 0:l.title)==null?void 0:o.en)&&(n=c);b.value.splice(n,1),t.value=b.value[0]}function _e(){var o,c,p,V,E,S,N,$,D,R,B,q;let n=[];for(let m=0;m<T.value.length;m++)n.push({id:(c=(o=T.value[m])==null?void 0:o.course)==null?void 0:c.id});let a=[];for(let m=0;m<((p=b.value)==null?void 0:p.length);m++){let d=b.value[m];for(let _=0;_<((V=d==null?void 0:d.levels)==null?void 0:V.length);_++)for(let C=0;C<((S=(E=d==null?void 0:d.levels[_])==null?void 0:E.courses)==null?void 0:S.length);C++)d.levels[_].courses[C]=($=(N=y.value)==null?void 0:N.find(I=>(I==null?void 0:I.id)==d.levels[_].courses[C].id))==null?void 0:$.id;for(let _=0;_<((D=d==null?void 0:d.courses)==null?void 0:D.length);_++)d.courses[_]=(B=(R=y.value)==null?void 0:R.find(C=>(C==null?void 0:C.id)==(d==null?void 0:d.courses[_])))==null?void 0:B.id;a.push(d)}const l={program_id:(q=J.params)==null?void 0:q.programId,update:{title:{en:r.value.titleEn.variable,ar:r.value.titleAr.variable},description:{en:r.value.descriptionEn.variable,ar:r.value.descriptionAr.variable},min_age:r.value.minAge.variable,max_age:r.value.maxAge.variable,image:r.value.image.variable,road_map:n,tracks:a}};new G("update_program").callApi(l).then(m=>{m!=null&&m.success&&ie.push("/manageCourses")})}return(n,a)=>(f(),A(M,null,[s(Ve),e("div",ye,[s(i(se),null,{default:U(()=>[s(i(j),null,{header:U(()=>[xe]),default:U(()=>[e("div",Ee,[(f(!0),A(M,null,H(i(r),l=>(f(),A("div",Le,[e("h3",null,le(l.label),1),(f(),ae(fe(l.component),{type:l.inputType,modelValue:l.variable,"onUpdate:modelValue":o=>l.variable=o},null,8,["type","modelValue","onUpdate:modelValue"]))]))),256))])]),_:1}),s(i(j),null,{header:U(()=>[we]),default:U(()=>[e("div",Ie,[e("div",Se,[e("div",Ne,[s(i(w),{onClick:re,icon:"pi pi-plus-circle",label:"Add Track"})]),e("div",$e,[De,s(i(O),{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=l=>t.value=l),options:b.value,optionLabel:"title.en",placeholder:"Select a track"},null,8,["modelValue","options"])]),t.value?(f(),A("div",Re,[e("div",Be,[s(i(w),{onClick:a[1]||(a[1]=l=>me()),icon:"pi pi-times-circle",label:"Delete Track",style:{"background-color":"red"}})]),e("div",qe,[Fe,s(i(x),{modelValue:t.value.title.en,"onUpdate:modelValue":a[2]||(a[2]=l=>t.value.title.en=l)},null,8,["modelValue"])]),e("div",Me,[Pe,s(i(x),{modelValue:t.value.title.ar,"onUpdate:modelValue":a[3]||(a[3]=l=>t.value.title.ar=l)},null,8,["modelValue"])]),e("div",He,[je,s(i(te),{modelValue:t.value.description.en,"onUpdate:modelValue":a[4]||(a[4]=l=>t.value.description.en=l)},null,8,["modelValue"])]),e("div",ze,[Ge,s(i(te),{modelValue:t.value.description.ar,"onUpdate:modelValue":a[5]||(a[5]=l=>t.value.description.ar=l)},null,8,["modelValue"])]),e("div",Oe,[e("div",Je,[Ke,s(i(x),{modelValue:t.value.female_image,"onUpdate:modelValue":a[6]||(a[6]=l=>t.value.female_image=l)},null,8,["modelValue"]),e("img",{src:t.value.female_image,alt:""},null,8,Qe)]),e("div",We,[Xe,s(i(x),{modelValue:t.value.male_image,"onUpdate:modelValue":a[7]||(a[7]=l=>t.value.male_image=l)},null,8,["modelValue"]),e("img",{src:t.value.male_image,alt:""},null,8,Ye)]),e("div",Ze,[el,s(i(x),{modelValue:t.value.image,"onUpdate:modelValue":a[8]||(a[8]=l=>t.value.image=l)},null,8,["modelValue"]),e("img",{src:t.value.image,alt:""},null,8,ll)]),e("div",al,[tl,s(i(x),{modelValue:t.value.video,"onUpdate:modelValue":a[9]||(a[9]=l=>t.value.video=l)},null,8,["modelValue"]),t.value.video?(f(),A("iframe",{key:0,style:{"aspect-ratio":"1.75/1"},src:t.value.video,alt:""},null,8,ol)):oe("",!0)])]),sl,s(i(se),{scrollable:!0},{default:U(()=>{var l;return[(f(!0),A(M,null,H((l=t.value)==null?void 0:l.levels,(o,c)=>(f(),ae(i(j),{key:c},{header:U(()=>[Ce(le(o.title.en),1)]),default:U(()=>[e("div",il,[e("div",nl,[ul,s(i(x),{modelValue:o.title.en,"onUpdate:modelValue":p=>o.title.en=p},null,8,["modelValue","onUpdate:modelValue"])]),e("div",dl,[rl,s(i(x),{modelValue:o.title.ar,"onUpdate:modelValue":p=>o.title.ar=p},null,8,["modelValue","onUpdate:modelValue"])]),e("div",cl,[s(i(w),{onClick:p=>ve(c),icon:"pi pi-plus-circle",label:"Add Level Course",style:{"font-size":"0.75rem"}},null,8,["onClick"])]),(f(!0),A(M,null,H(o.courses,(p,V)=>(f(),A("div",vl,[e("div",pl,[s(i(O),{modelValue:o.courses[V],"onUpdate:modelValue":E=>o.courses[V]=E,options:y.value,optionLabel:"title.en",placeholder:"Select a Course"},null,8,["modelValue","onUpdate:modelValue","options"]),e("i",{class:"pi pi-times-circle",onClick:()=>{o.courses.splice(V,1)}},null,8,ml)])]))),256)),e("div",_l,[s(i(w),{onClick:()=>{var p,V;(V=(p=t.value)==null?void 0:p.levels)==null||V.splice(c,1)},icon:"pi pi-times-circle",label:"Delete Level",style:{"background-color":"red"}},null,8,["onClick"])])])]),_:2},1024))),128))]}),_:1}),e("div",hl,[s(i(w),{onClick:a[10]||(a[10]=l=>ce()),icon:"pi pi-plus-circle",label:"Add Level"})])])):oe("",!0)])])]),_:1}),s(i(j),null,{header:U(()=>[gl]),default:U(()=>[e("div",bl,[e("div",null,[(f(!0),A(M,null,H(T.value,(l,o)=>(f(),A("div",Vl,[e("div",fl,[s(i(O),{modelValue:T.value[o].course,"onUpdate:modelValue":c=>T.value[o].course=c,options:y.value,optionLabel:"title.en",placeholder:"Select a Course"},null,8,["modelValue","onUpdate:modelValue","options"]),e("i",{class:"pi pi-times-circle",onClick:()=>{pe(o)}},null,8,Cl)])]))),256)),e("div",kl,[s(i(w),{onClick:de,icon:"pi pi-plus-circle",label:"Add Course"})])])])]),_:1})]),_:1}),e("div",Al,[s(i(w),{onClick:_e,label:"Save Changes"})])]),s(ke)],64))}}),Ll=Te(Ul,[["__scopeId","data-v-0ee9ae4a"]]);export{Ll as default};
