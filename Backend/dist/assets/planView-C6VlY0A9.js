import{d as $,c as I,e as l,t as s,f as e,y as A,g as N,q as B,v as V,o as p,s as i,k as r,l as R,_ as x,z as j,a as F,r as h,H as y,b as d,x as L,i as O,N as z,O as G,F as H}from"./index-DCiEO1RF.js";import{C as W}from"./CourseCard-BBXRmpjG.js";import{A as J,E as K,G as Q,P as U}from"./PromoCodeDialog-Cuap6WOR.js";import"./inputtext.esm-Cij7q3me.js";const X={class:"course-description"},Y={class:"head"},Z=["src"],ee={class:"information"},le={class:"info-container"},oe={class:"wrapper"},ne={class:"wrapper"},ae={class:"description"},se={class:"header"},te={class:"objectives"},ie=$({__name:"PlanDescribtion",props:["plan","isEnrolled","notShowButton"],emits:["enroll","viewMaterial"],setup(t,{emit:w}){return(b,m)=>{var C,v,D,P,f,g,k;return p(),I("div",X,[l("div",Y,[l("h1",null,s(e(i)((C=t.plan)==null?void 0:C.title)),1)]),l("img",{src:(v=t.plan)==null?void 0:v.image,alt:""},null,8,Z),l("div",ee,[l("h2",null,s(e(i)(e(r).planInfo)),1),l("div",le,[l("div",oe,[l("h4",null,s(e(i)(e(r).price)),1),l("p",null,s((D=t.plan)==null?void 0:D.price)+" L.E",1)]),l("div",ne,[l("h4",null,s(e(i)(e(r).age)),1),l("p",null,s((P=t.plan)==null?void 0:P.min_age)+" - "+s((f=t.plan)==null?void 0:f.max_age)+" "+s(e(i)(e(r).years)),1)])])]),l("div",ae,[l("div",se,[l("h2",null,s(e(i)(e(r).planDescription)),1),!t.isEnrolled&&!t.notShowButton?(p(),A(e(R),{key:0,label:e(i)(e(r).enrollNow),onClick:m[0]||(m[0]=()=>{b.$emit("enroll")})},null,8,["label"])):N("",!0),t.isEnrolled&&!t.notShowButton?(p(),A(e(R),{key:1,label:e(i)(e(r).viewMat),onClick:m[1]||(m[1]=()=>{b.$emit("viewMaterial")})},null,8,["label"])):N("",!0)]),l("p",null,s(e(i)((g=t.plan)==null?void 0:g.description)),1)]),l("div",te,[l("h2",null,s(e(i)(e(r).planObjectives)),1),(p(!0),I(B,null,V((k=t.plan)==null?void 0:k.objectives,E=>(p(),I("p",null,"- "+s(e(i)(E)),1))),256))])])}}}),ue=x(ie,[["__scopeId","data-v-4b2cd19d"]]),ce={class:"container"},re={class:"courses"},de={class:"coursesContainer"},pe=$({__name:"planView",setup(t){const w=L(),b=O(),m=j(),C=F(),v=h(),D=h([]);new y("get_plan").callApi({plan_id:w.params.planId}).then(o=>{var u,n,a;if(console.log(o),o.success){v.value=(u=o==null?void 0:o.data)==null?void 0:u.plan;for(let _ of(a=(n=o==null?void 0:o.data)==null?void 0:n.plan)==null?void 0:a.courses)new y("get_course").callApi({course_id:_==null?void 0:_.Id}).then(c=>{var S;c!=null&&c.success&&D.value.push((S=c==null?void 0:c.data)==null?void 0:S.course)})}});const f=h(),g=h(!1),k=h(!1),E=h(!1),q=h(!1);function M(){var o,u,n,a;m.getIsAuthorized?((o=C.getInfo)==null?void 0:o.userType)=="Child"?g.value=!0:((u=C.getInfo)==null?void 0:u.userType)=="Parent"&&(((n=w.params)==null?void 0:n.childId)=="0"?E.value=!0:((a=w.params)==null?void 0:a.childId)!="0"&&(q.value=!0)):b.push("/login")}function T(o){var n;q.value=!1,new y("request_enrollment").callApi({request:{student_id:w.params.childId,course_id:(n=v.value)==null?void 0:n.id,promo_code:o,package_type:"plan"}}).then(a=>{var _,c;console.log(a),a!=null&&a.success&&(f.value=(c=(_=a==null?void 0:a.data)==null?void 0:_.request)==null?void 0:c.price,console.log(f.value),k.value=!0)})}return(o,u)=>(p(),I(B,null,[d(z),d(G),d(J,{showDialog:g.value,onRemoveDialog:u[0]||(u[0]=n=>{g.value=!1})},null,8,["showDialog"]),d(K,{showDialog:k.value,cost:f.value},null,8,["showDialog","cost"]),d(Q,{showDialog:E.value},null,8,["showDialog"]),d(U,{showDialog:q.value,onPromoCode:u[1]||(u[1]=n=>{T(n)})},null,8,["showDialog"]),l("div",ce,[d(ue,{plan:v.value,onEnroll:M},null,8,["plan"]),l("div",re,[l("h2",null,s(e(i)(e(r).planCourses)),1),l("div",de,[(p(!0),I(B,null,V(D.value,n=>(p(),A(W,{course:n,search:""},null,8,["course"]))),256))])])]),d(H)],64))}}),ge=x(pe,[["__scopeId","data-v-a9f10d41"]]);export{ge as default};
