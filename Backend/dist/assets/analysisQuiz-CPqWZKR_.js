import{d as D,c as l,b as O,e as m,t as x,f as n,o as i,al as J,s as k,k as A,m as P,_ as H,r as T,a0 as ee,am as te,h as G,g as p,u as Z,E as K,Z as U,w as j,x as B,z as F,I as V,an as ne,H as X,a5 as Y,D as se,G as ie,K as ae}from"./index-Bvp1XuOg.js";const oe={class:"container"},le=["innerHTML"],ue={class:"button-container"},re=D({__name:"Introduction",props:["title","description","duration","sectionsTitles"],emits:["startQuiz"],setup(t){return($,d)=>(i(),l("div",oe,[O(J),m("h1",null,x(n(k)(t.title)),1),m("p",{innerHTML:n(k)(t.description)},null,8,le),m("div",ue,[O(n(P),{style:{direction:"ltr"},label:n(k)(n(A).startAnalysisQuiz),onClick:d[0]||(d[0]=()=>{$.$emit("startQuiz")})},null,8,["label"])])]))}}),de=H(re,[["__scopeId","data-v-0304410b"]]),ce=["width","height"],ve={style:{"text-align":"center",color:"var(--accent1)",margin:"0","line-height":"0.5rem","font-size":"1rem","margin-bottom":"1rem",direction:"ltr"}},me={key:0},he=D({__name:"CountDown",props:{width:{type:Number,default:60},height:{type:Number,default:60},totalTime:{type:Number,default:300},lineWidth:{type:Number,default:7},strokeStyle:{type:String,default:"#01abff"},backgroundColor:{type:String,default:"#fff"},textColor:{type:String,default:"#01abff"},fontSize:{type:Number,default:20},source:{type:String,default:"/images/jerryFace.jpeg"}},emits:["timeOver"],setup(t,{emit:$}){const d=t,h=$,u=T(d.totalTime);setInterval(()=>{u.value-=1,u.value==0&&h("timeOver")},1e3);const b=T(),f=new Image;f.src=d.source,f.onload=function(){z()};const z=()=>{const y=b.value;if(!y)return;const e=y.getContext("2d"),a=y.width/2,c=y.height/2,g=Math.min(a,c)-d.lineWidth,w=-Math.PI/2,o=w+2*Math.PI*(u.value/d.totalTime);e.clearRect(0,0,y.width,y.height),e.fillStyle=d.backgroundColor,e.fillRect(0,0,y.width,y.height),e.beginPath(),e.arc(a,c,g,w,o,!1),e.lineWidth=d.lineWidth,e.strokeStyle=d.strokeStyle,e.stroke(),e.fillStyle=d.textColor,e.font=`${d.fontSize}px Arial`,e.textAlign="center",e.textBaseline="middle",e.save(),e.beginPath(),e.arc(a,c,g,w,o,!1),e.lineTo(a,c),e.closePath(),e.clip(),e.drawImage(f,a-g,c-g,g*2,g*2),e.restore()};return ee(z),te(z),(y,e)=>(i(),l("div",null,[m("canvas",{ref_key:"canvas",ref:b,width:t.width,height:t.height},null,8,ce),m("p",ve,[G(x(Math.floor(u.value/60))+" : ",1),u.value%60<10?(i(),l("span",me,"0")):p("",!0),G(x(u.value%60),1)])]))}}),ge=H(he,[["__scopeId","data-v-eeee5ac3"]]),_e={class:"container"},fe={style:{display:"flex","justify-content":"space-between"}},ye={class:"question-container"},pe={class:"question"},we={key:0,class:"question-text"},qe={key:0},ke=["innerHTML"],be=["src"],xe=["src"],Te={class:"image_container"},ze=["src"],Se={key:1,class:"question-text"},$e={key:0},Ce={key:1},Qe={key:2,class:"image_container"},Ne={style:{width:"32%"}},Ie=["src"],Oe={key:3,class:"image_container"},Ae={style:{width:"20%"}},Le=["src"],Me=["onClick"],Pe={style:{direction:"ltr"}},je=["src"],Be={class:"button-container"},De=D({__name:"Section",props:["showNext","question","answers","selectedQuestionOrder","sectionName","audio_link","duration","questionType"],emits:["next","answer","timeOver","finish"],setup(t){const $=Z(),d=t,h=K(()=>d.selectedQuestionOrder),u=T(),b=T();setTimeout(()=>{var a,c;u.value=(c=(a=d.question)==null?void 0:a.image)==null?void 0:c.split(",")},1),U(h,(a,c)=>{u.value=[],b.value=[],setTimeout(()=>{var g,w;u.value=(w=(g=d.question)==null?void 0:g.image)==null?void 0:w.split(",")},1),e.value="show image",d.questionType=="Symbol Search"&&setTimeout(()=>{e.value="show options"},3e3)}),U(u,(a,c)=>{var g,w,o;((g=u.value)==null?void 0:g.length)>2&&(b.value=(o=u.value)==null?void 0:o.slice(2,(w=u.value)==null?void 0:w.length))});function f(){window.scrollTo({top:0,left:0,behavior:"smooth"})}const z=K(()=>{var a;return y(k((a=d.question)==null?void 0:a.question))});function y(a){return a?a.split("_____"):"invalid"}const e=T("show image");return(a,c)=>{var g,w,o,r,v,Q;return i(),l("div",_e,[m("div",fe,[m("h3",null,x(t.selectedQuestionOrder+1)+" / "+x((g=t.answers)==null?void 0:g.length),1),O(ge,{onTimeOver:c[0]||(c[0]=()=>{a.$emit("timeOver")}),totalTime:t.duration},null,8,["totalTime"])]),m("div",ye,[m("div",pe,[t.questionType!="Symbol Search"?(i(),l("div",we,[((o=(w=t.question)==null?void 0:w.question)==null?void 0:o.en)!="AudioStart"?(i(),l("h1",qe,x(n(k)((r=t.question)==null?void 0:r.question)),1)):(i(),l("div",{key:1,innerHTML:n(k)(n(ne))},null,8,ke)),m("audio",{src:t.audio_link,autoplay:""},[m("source",{src:t.audio_link},null,8,xe)],8,be),m("div",Te,[((v=t.question)==null?void 0:v.image)!=null?(i(!0),l(j,{key:0},B(u.value,s=>{var q;return i(),l("img",{class:F({image2:((q=u.value)==null?void 0:q.length)>1}),src:s,alt:""},null,10,ze)}),256)):p("",!0)])])):p("",!0),t.questionType=="Symbol Search"?(i(),l("div",Se,[e.value=="show image"?(i(),l("h1",$e,x(z.value[0]),1)):p("",!0),e.value=="show options"?(i(),l("h1",Ce,x(z.value[1]),1)):p("",!0),e.value=="show image"?(i(),l("div",Qe,[(i(!0),l(j,null,B(u.value,(s,q)=>(i(),l("span",Ne,[q<2?(i(),l("img",{key:0,class:"image2",style:{width:"100%"},src:s,alt:""},null,8,Ie)):p("",!0)]))),256))])):p("",!0),e.value=="show options"?(i(),l("div",Oe,[(i(!0),l(j,null,B(b.value,(s,q)=>(i(),l("span",Ae,[m("img",{style:{width:"100%"},class:"image2",src:s,alt:""},null,8,Le)]))),256))])):p("",!0)])):p("",!0),e.value=="show image"&&t.questionType=="Symbol Search"?p("",!0):(i(),l("div",{key:2,class:F([{choices_wrapper_similarity:t.questionType=="Similarities"},"choices-wrapper"])},[(i(!0),l(j,null,B((Q=t.question)==null?void 0:Q.choices,s=>{var q;return i(),l("p",{class:F(["choice-text",{selectedChoice:(q=t.answers)==null?void 0:q.some(_=>{var N;return(_==null?void 0:_.sub_section_name)==t.sectionName&&(_==null?void 0:_.question_id)==((N=t.question)==null?void 0:N.id)&&(_==null?void 0:_.choice_id)==(s==null?void 0:s.id)})}]),key:s,onClick:()=>{var _;a.$emit("answer",{section_name:t.sectionName,question_id:(_=t.question)==null?void 0:_.id,choice_id:s==null?void 0:s.id})}},[m("span",Pe,x(n(k)(s==null?void 0:s.choice)),1),s!=null&&s.image?(i(),l("img",{key:0,src:s==null?void 0:s.image,class:"image_choice",alt:""},null,8,je)):p("",!0)],10,Me)}),128))],2))])]),m("div",Be,[!(t.questionType=="Symbol Search"&&e.value=="show image")&&n($).getLang=="en"?(i(),V(n(P),{key:0,label:n(k)(n(A).next),onClick:c[1]||(c[1]=()=>{f(),t.showNext?a.$emit("next"):a.$emit("finish")}),icon:"pi pi-arrow-right",iconPos:"right"},null,8,["label"])):p("",!0),!(t.questionType=="Symbol Search"&&e.value=="show image")&&n($).getLang=="ar"?(i(),V(n(P),{key:1,label:n(k)(n(A).next),onClick:c[2]||(c[2]=()=>{f(),t.showNext?a.$emit("next"):a.$emit("finish")}),icon:"pi pi-arrow-left",iconPos:"right"},null,8,["label"])):p("",!0)])])}}}),He=H(De,[["__scopeId","data-v-cc074177"]]),Re={class:"wrapper"},We={style:{display:"flex","flex-direction":"column","align-items":"center",gap:"2rem","padding-inline":"5rem","padding-top":"2rem"}},Ee={style:{"font-size":"2.2rem"}},Fe={key:1,class:"section-wrapper"},Ve={class:"section"},Ge=D({__name:"analysisQuiz",setup(t){const $=ie(),d=new X("get_analysis_quiz"),h=T({title:null,description:null,duration:null,questions:[]}),u=T(),b=T([]),f=T(0),z=T(!1),y=T(!1);d.callApi({analysis_quiz_id:$.params.quizId}).then(o=>{var r,v,Q,s,q,_,N,M,C;if(o.msg=="Quiz Taken Before"){Y.push("/childNotifications");return}u.value=(r=o==null?void 0:o.data)==null?void 0:r.analysis_quiz,h.value.description=(v=u.value)==null?void 0:v.description,h.value.title=(Q=u.value)==null?void 0:Q.title,h.value.duration=(s=u.value)==null?void 0:s.duration;for(let R=0;R<((_=(q=u.value)==null?void 0:q.sections)==null?void 0:_.length);R++){let L=(N=u.value)==null?void 0:N.sections[R];for(let W=0;W<((M=L==null?void 0:L.sub_sections)==null?void 0:M.length);W++){let S=L==null?void 0:L.sub_sections[W];for(let E=0;E<((C=S==null?void 0:S.questions)==null?void 0:C.length);E++){let I=S.questions[E];h.value.questions.push({question:I,section_name:S==null?void 0:S.info_name,order:h.value.questions.length,audio_link:I==null?void 0:I.audio_link}),b.value.push({sub_section_name:S==null?void 0:S.info_name,question_id:I==null?void 0:I.id,choice_id:-1})}}}});function e(){y.value=!0}function a(o){let r=b.value.find(v=>(v==null?void 0:v.question_id)==o.question_id&&(v==null?void 0:v.sub_section_name)==o.section_name);r.choice_id=o==null?void 0:o.choice_id}function c(){const o=new X("add_analysis_quiz_answer");let r={answers:{quiz_id:$.params.quizId,answers:b.value}};o.callApi(r).then(v=>{v!=null&&v.success&&(z.value=!0)})}const g=Z();function w(o){o=="English"&&g.setLang("en"),o=="العربية"&&g.setLang("ar")}return(o,r)=>{var v,Q,s,q,_,N,M;return i(),l("div",Re,[O(n(ae),{style:{"max-width":"80%"},visible:z.value,"onUpdate:visible":r[1]||(r[1]=C=>z.value=C),modal:"",pt:{mask:{style:"backdrop-filter: blur(2px)"},header:{style:"display:none"},content:{style:"margin-block:auto; display: flex; flex-direction: column; align-items: center; justify-content: center;"}}},{default:se(()=>[m("div",We,[m("h3",Ee,x(n(k)(n(A).wellDone)),1),m("h3",null,x(n(k)(n(A).logWithParent)),1),O(n(P),{label:n(k)(n(A).results),onClick:r[0]||(r[0]=C=>n(Y).push("/viewChildAnalysis"))},null,8,["label"])])]),_:1},8,["visible","pt"]),y.value?p("",!0):(i(),V(de,{key:0,title:(v=h.value)==null?void 0:v.title,description:(Q=h.value)==null?void 0:Q.description,duration:(s=h.value)==null?void 0:s.duration,onStartQuiz:e},null,8,["title","description","duration"])),y.value?(i(),l("div",Fe,[m("div",Ve,[O(He,{"question-type":(q=h.value.questions[f.value])==null?void 0:q.section_name,"show-next":h.value.questions.length!=f.value+1,"show-previous":f.value!=0,question:(_=h.value.questions[f.value])==null?void 0:_.question,sectionName:(N=h.value.questions[f.value])==null?void 0:N.section_name,selectedQuestionOrder:f.value,answers:b.value,audio_link:(M=h.value.questions[f.value])==null?void 0:M.audio_link,duration:h.value.duration,onNext:r[2]||(r[2]=C=>f.value++),onPrevious:r[3]||(r[3]=C=>f.value--),onAnswer:r[4]||(r[4]=C=>{a(C)}),onTimeOver:c,onFinish:c},null,8,["question-type","show-next","show-previous","question","sectionName","selectedQuestionOrder","answers","audio_link","duration"])])])):p("",!0),O(n(P),{class:"lang_button",onClick:r[5]||(r[5]=()=>{w(n(k)(n(A).language))}),icon:"pi pi-language"})])}}}),Ue=H(Ge,[["__scopeId","data-v-8adee48a"]]);export{Ue as default};
