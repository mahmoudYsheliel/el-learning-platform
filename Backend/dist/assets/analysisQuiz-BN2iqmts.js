import{d as D,c as l,b as A,e as m,t as T,f as n,o as i,al as J,s as k,k as L,m as P,_ as H,r as S,a0 as ee,am as te,h as G,g as _,u as Z,E as K,Z as U,w as j,x as B,z as F,I as V,an as ne,H as X,a5 as Y,D as se,G as ie,K as ae}from"./index-QBm80XMo.js";const oe={class:"container"},le=["innerHTML"],ue={class:"button-container"},re=D({__name:"Introduction",props:["title","description","duration","sectionsTitles"],emits:["startQuiz"],setup(t){return(C,d)=>(i(),l("div",oe,[A(J),m("h1",null,T(n(k)(t.title)),1),m("p",{innerHTML:n(k)(t.description)},null,8,le),m("div",ue,[A(n(P),{style:{direction:"ltr"},label:n(k)(n(L).startAnalysisQuiz),onClick:d[0]||(d[0]=()=>{C.$emit("startQuiz")})},null,8,["label"])])]))}}),de=H(re,[["__scopeId","data-v-0304410b"]]),ce=["width","height"],ve={style:{"text-align":"center",color:"var(--accent1)",margin:"0","line-height":"0.5rem","font-size":"1rem","margin-bottom":"1rem",direction:"ltr"}},me={key:0},he=D({__name:"CountDown",props:{width:{type:Number,default:60},height:{type:Number,default:60},totalTime:{type:Number,default:300},lineWidth:{type:Number,default:7},strokeStyle:{type:String,default:"#01abff"},backgroundColor:{type:String,default:"#fff"},textColor:{type:String,default:"#01abff"},fontSize:{type:Number,default:20},source:{type:String,default:"/images/jerryFace.jpeg"}},emits:["timeOver"],setup(t,{emit:C}){const d=t,h=C,u=S(d.totalTime);setInterval(()=>{u.value-=1,u.value==0&&h("timeOver")},1e3);const x=S(),y=new Image;y.src=d.source,y.onload=function(){z()};const z=()=>{const p=x.value;if(!p)return;const e=p.getContext("2d"),a=p.width/2,c=p.height/2,g=Math.min(a,c)-d.lineWidth,q=-Math.PI/2,o=q+2*Math.PI*(u.value/d.totalTime);e.clearRect(0,0,p.width,p.height),e.fillStyle=d.backgroundColor,e.fillRect(0,0,p.width,p.height),e.beginPath(),e.arc(a,c,g,q,o,!1),e.lineWidth=d.lineWidth,e.strokeStyle=d.strokeStyle,e.stroke(),e.fillStyle=d.textColor,e.font=`${d.fontSize}px Arial`,e.textAlign="center",e.textBaseline="middle",e.save(),e.beginPath(),e.arc(a,c,g,q,o,!1),e.lineTo(a,c),e.closePath(),e.clip(),e.drawImage(y,a-g,c-g,g*2,g*2),e.restore()};return ee(z),te(z),(p,e)=>(i(),l("div",null,[m("canvas",{ref_key:"canvas",ref:x,width:t.width,height:t.height},null,8,ce),m("p",ve,[G(T(Math.floor(u.value/60))+" : ",1),u.value%60<10?(i(),l("span",me,"0")):_("",!0),G(T(u.value%60),1)])]))}}),ge=H(he,[["__scopeId","data-v-eeee5ac3"]]),fe={class:"container"},_e={style:{display:"flex","justify-content":"space-between"}},ye={class:"question-container"},pe={class:"question"},qe={key:0,class:"question-text"},we=["innerHTML"],ke={key:1},be=["src"],xe=["src"],Te={class:"image_container"},Se=["src"],ze={key:1,class:"question-text"},$e={key:0},Ce={key:1},Qe={key:2,class:"image_container"},Ne={style:{width:"32%"}},Ie=["src"],Oe={key:3,class:"image_container"},Ae={style:{width:"20%"}},Le=["src"],Me=["onClick"],Pe={style:{direction:"ltr"}},je=["src"],Be={class:"button-container"},De=D({__name:"Section",props:["showNext","question","answers","selectedQuestionOrder","sectionName","audio_link","duration","questionType"],emits:["next","answer","timeOver","finish"],setup(t){const C=Z(),d=t,h=K(()=>d.selectedQuestionOrder),u=S(),x=S();setTimeout(()=>{var a,c;u.value=(c=(a=d.question)==null?void 0:a.image)==null?void 0:c.split(",")},1),U(h,(a,c)=>{u.value=[],x.value=[],setTimeout(()=>{var g,q;u.value=(q=(g=d.question)==null?void 0:g.image)==null?void 0:q.split(",")},1),e.value="show image",d.questionType=="Symbol Search"&&setTimeout(()=>{e.value="show options"},3e3)}),U(u,(a,c)=>{var g,q,o;((g=u.value)==null?void 0:g.length)>2&&(x.value=(o=u.value)==null?void 0:o.slice(2,(q=u.value)==null?void 0:q.length))});function y(){window.scrollTo({top:0,left:0,behavior:"smooth"})}const z=K(()=>{var a;return p(k((a=d.question)==null?void 0:a.question))});function p(a){return a?a.split("_____"):"invalid"}const e=S("show image");return(a,c)=>{var g,q,o,r,v,Q,N,I;return i(),l("div",fe,[m("div",_e,[m("h3",null,T(t.selectedQuestionOrder+1)+" / "+T((g=t.answers)==null?void 0:g.length),1),A(ge,{onTimeOver:c[0]||(c[0]=()=>{a.$emit("timeOver")}),totalTime:t.duration},null,8,["totalTime"])]),m("div",ye,[m("div",pe,[t.questionType!="Symbol Search"?(i(),l("div",qe,[((o=(q=t.question)==null?void 0:q.question)==null?void 0:o.en)=="AudioStart"?(i(),l("div",{key:0,innerHTML:n(k)(n(ne))},null,8,we)):_("",!0),((v=(r=t.question)==null?void 0:r.question)==null?void 0:v.en)!="AudioStart"?(i(),l("h1",ke,T(n(k)((Q=t.question)==null?void 0:Q.question)),1)):_("",!0),m("audio",{src:t.audio_link,autoplay:""},[m("source",{src:t.audio_link},null,8,xe)],8,be),m("div",Te,[((N=t.question)==null?void 0:N.image)!=null?(i(!0),l(j,{key:0},B(u.value,s=>{var w;return i(),l("img",{class:F({image2:((w=u.value)==null?void 0:w.length)>1}),src:s,alt:""},null,10,Se)}),256)):_("",!0)])])):_("",!0),t.questionType=="Symbol Search"?(i(),l("div",ze,[e.value=="show image"?(i(),l("h1",$e,T(z.value[0]),1)):_("",!0),e.value=="show options"?(i(),l("h1",Ce,T(z.value[1]),1)):_("",!0),e.value=="show image"?(i(),l("div",Qe,[(i(!0),l(j,null,B(u.value,(s,w)=>(i(),l("span",Ne,[w<2?(i(),l("img",{key:0,class:"image2",style:{width:"100%"},src:s,alt:""},null,8,Ie)):_("",!0)]))),256))])):_("",!0),e.value=="show options"?(i(),l("div",Oe,[(i(!0),l(j,null,B(x.value,(s,w)=>(i(),l("span",Ae,[m("img",{style:{width:"100%"},class:"image2",src:s,alt:""},null,8,Le)]))),256))])):_("",!0)])):_("",!0),e.value=="show image"&&t.questionType=="Symbol Search"?_("",!0):(i(),l("div",{key:2,class:F([{choices_wrapper_similarity:t.questionType=="Similarities"},"choices-wrapper"])},[(i(!0),l(j,null,B((I=t.question)==null?void 0:I.choices,s=>{var w;return i(),l("p",{class:F(["choice-text",{selectedChoice:(w=t.answers)==null?void 0:w.some(f=>{var b;return(f==null?void 0:f.sub_section_name)==t.sectionName&&(f==null?void 0:f.question_id)==((b=t.question)==null?void 0:b.id)&&(f==null?void 0:f.choice_id)==(s==null?void 0:s.id)})}]),key:s,onClick:()=>{var f;a.$emit("answer",{section_name:t.sectionName,question_id:(f=t.question)==null?void 0:f.id,choice_id:s==null?void 0:s.id})}},[m("span",Pe,T(n(k)(s==null?void 0:s.choice)),1),s!=null&&s.image?(i(),l("img",{key:0,src:s==null?void 0:s.image,class:"image_choice",alt:""},null,8,je)):_("",!0)],10,Me)}),128))],2))])]),m("div",Be,[!(t.questionType=="Symbol Search"&&e.value=="show image")&&n(C).getLang=="en"?(i(),V(n(P),{key:0,label:n(k)(n(L).next),onClick:c[1]||(c[1]=()=>{y(),t.showNext?a.$emit("next"):a.$emit("finish")}),icon:"pi pi-arrow-right",iconPos:"right"},null,8,["label"])):_("",!0),!(t.questionType=="Symbol Search"&&e.value=="show image")&&n(C).getLang=="ar"?(i(),V(n(P),{key:1,label:n(k)(n(L).next),onClick:c[2]||(c[2]=()=>{y(),t.showNext?a.$emit("next"):a.$emit("finish")}),icon:"pi pi-arrow-left",iconPos:"right"},null,8,["label"])):_("",!0)])])}}}),He=H(De,[["__scopeId","data-v-fa422c05"]]),Re={class:"wrapper"},We={style:{display:"flex","flex-direction":"column","align-items":"center",gap:"2rem","padding-inline":"5rem","padding-top":"2rem"}},Ee={style:{"font-size":"2.2rem"}},Fe={key:1,class:"section-wrapper"},Ve={class:"section"},Ge=D({__name:"analysisQuiz",setup(t){const C=ie(),d=new X("get_analysis_quiz"),h=S({title:null,description:null,duration:null,questions:[]}),u=S(),x=S([]),y=S(0),z=S(!1),p=S(!1);d.callApi({analysis_quiz_id:C.params.quizId}).then(o=>{var r,v,Q,N,I,s,w,f,b;if(o.msg=="Quiz Taken Before"){Y.push("/childNotifications");return}u.value=(r=o==null?void 0:o.data)==null?void 0:r.analysis_quiz,h.value.description=(v=u.value)==null?void 0:v.description,h.value.title=(Q=u.value)==null?void 0:Q.title,h.value.duration=(N=u.value)==null?void 0:N.duration;for(let R=0;R<((s=(I=u.value)==null?void 0:I.sections)==null?void 0:s.length);R++){let M=(w=u.value)==null?void 0:w.sections[R];for(let W=0;W<((f=M==null?void 0:M.sub_sections)==null?void 0:f.length);W++){let $=M==null?void 0:M.sub_sections[W];for(let E=0;E<((b=$==null?void 0:$.questions)==null?void 0:b.length);E++){let O=$.questions[E];h.value.questions.push({question:O,section_name:$==null?void 0:$.info_name,order:h.value.questions.length,audio_link:O==null?void 0:O.audio_link}),x.value.push({sub_section_name:$==null?void 0:$.info_name,question_id:O==null?void 0:O.id,choice_id:-1})}}}});function e(){p.value=!0}function a(o){let r=x.value.find(v=>(v==null?void 0:v.question_id)==o.question_id&&(v==null?void 0:v.sub_section_name)==o.section_name);r.choice_id=o==null?void 0:o.choice_id}function c(){const o=new X("add_analysis_quiz_answer");let r={answers:{quiz_id:C.params.quizId,answers:x.value}};o.callApi(r).then(v=>{v!=null&&v.success&&(z.value=!0)})}const g=Z();function q(o){o=="English"&&g.setLang("en"),o=="العربية"&&g.setLang("ar")}return(o,r)=>{var v,Q,N,I,s,w,f;return i(),l("div",Re,[A(n(ae),{style:{"max-width":"80%"},visible:z.value,"onUpdate:visible":r[1]||(r[1]=b=>z.value=b),modal:"",pt:{mask:{style:"backdrop-filter: blur(2px)"},header:{style:"display:none"},content:{style:"margin-block:auto; display: flex; flex-direction: column; align-items: center; justify-content: center;"}}},{default:se(()=>[m("div",We,[m("h3",Ee,T(n(k)(n(L).wellDone)),1),m("h3",null,T(n(k)(n(L).logWithParent)),1),A(n(P),{label:n(k)(n(L).results),onClick:r[0]||(r[0]=b=>n(Y).push("/viewChildAnalysis"))},null,8,["label"])])]),_:1},8,["visible","pt"]),p.value?_("",!0):(i(),V(de,{key:0,title:(v=h.value)==null?void 0:v.title,description:(Q=h.value)==null?void 0:Q.description,duration:(N=h.value)==null?void 0:N.duration,onStartQuiz:e},null,8,["title","description","duration"])),p.value?(i(),l("div",Fe,[m("div",Ve,[A(He,{"question-type":(I=h.value.questions[y.value])==null?void 0:I.section_name,"show-next":h.value.questions.length!=y.value+1,"show-previous":y.value!=0,question:(s=h.value.questions[y.value])==null?void 0:s.question,sectionName:(w=h.value.questions[y.value])==null?void 0:w.section_name,selectedQuestionOrder:y.value,answers:x.value,audio_link:(f=h.value.questions[y.value])==null?void 0:f.audio_link,duration:h.value.duration,onNext:r[2]||(r[2]=b=>y.value++),onPrevious:r[3]||(r[3]=b=>y.value--),onAnswer:r[4]||(r[4]=b=>{a(b)}),onTimeOver:c,onFinish:c},null,8,["question-type","show-next","show-previous","question","sectionName","selectedQuestionOrder","answers","audio_link","duration"])])])):_("",!0),A(n(P),{class:"lang_button",onClick:r[5]||(r[5]=()=>{q(n(k)(n(L).language))}),icon:"pi pi-language"})])}}}),Ue=H(Ge,[["__scopeId","data-v-8adee48a"]]);export{Ue as default};
