import{d as B,c as n,b as A,e as f,t as w,f as e,h as F,g as d,o as s,O as U,s as S,k as j,m as V,_ as D,r as x,a2 as Z,al as G,Z as J,x as K,v as M,w as P,z as Y,$ as Q,D as H,H as L,a4 as X,B as ee,y as te,C as se}from"./index-eNF47aEj.js";const ne={class:"container"},ie={key:0},oe={class:"button-container"},ae=B({__name:"Introduction",props:["title","description","duration","sectionsTitles"],emits:["startQuiz"],setup(i){return(T,u)=>(s(),n("div",ne,[A(U),f("h1",null,w(e(S)(i.title)),1),f("h3",null,w(e(S)(i.description)),1),f("h3",null,[F(w(e(S)(e(j).durationOfTest))+" ",1),f("strong",null,[F(w(Math.floor(i.duration/60))+":",1),i.duration%60<10?(s(),n("strong",ie,"0")):d("",!0),F(w(i.duration%60)+" "+w(e(S)(e(j).minutes)),1)])]),f("div",oe,[A(e(V),{label:e(S)(e(j).startAnalysisQuiz),onClick:u[0]||(u[0]=()=>{T.$emit("startQuiz")})},null,8,["label"])])]))}}),le=D(ae,[["__scopeId","data-v-b0a0139b"]]),ue=["width","height"],re=B({__name:"CountDown",props:{width:{type:Number,default:125},height:{type:Number,default:125},totalTime:{type:Number,default:300},lineWidth:{type:Number,default:5},strokeStyle:{type:String,default:"#01abff"},backgroundColor:{type:String,default:"#fff"},textColor:{type:String,default:"#01abff"},fontSize:{type:Number,default:20},source:{type:String,default:"/images/jerryFace.jpeg"}},emits:["timeOver"],setup(i,{emit:T}){const u=i,v=T,k=x(0);setInterval(()=>{k.value+=1,k.value==u.totalTime&&v("timeOver")},1e3);const y=x(),c=()=>{const g=y.value;if(!g)return;const o=g.getContext("2d"),O=g.width/2,p=g.height/2,m=Math.min(O,p)-u.lineWidth,r=-Math.PI/2,a=r+2*Math.PI*(k.value/u.totalTime);o.clearRect(0,0,g.width,g.height),o.fillStyle=u.backgroundColor,o.fillRect(0,0,g.width,g.height),o.beginPath(),o.arc(O,p,m,r,a,!1),o.lineWidth=u.lineWidth,o.strokeStyle=u.strokeStyle,o.stroke(),o.fillStyle=u.textColor,o.font=`${u.fontSize}px Arial`,o.textAlign="center",o.textBaseline="middle";const l=new Image;l.src=u.source,l.onload=function(){const q=u.width/2,b=u.height/2,t=Math.sqrt(u.width*u.height*2)/3;o.save(),o.beginPath(),o.arc(q,b,t,r,a,!1),o.lineTo(q,b),o.closePath(),o.clip(),o.drawImage(l,q-t,b-t,t*2,t*2),o.restore()}};return Z(c),G(c),(g,o)=>(s(),n("div",null,[f("canvas",{ref_key:"canvas",ref:y,width:i.width,height:i.height},null,8,ue)]))}}),de=D(re,[["__scopeId","data-v-bc51d42c"]]),ce={class:"container"},ve={style:{display:"flex","justify-content":"space-between"}},me={class:"question-container"},he={class:"question"},fe={key:0,class:"question-text"},ye=["src"],ge={class:"image_container"},_e=["src"],we={key:1,class:"question-text"},pe={key:0},ke={key:1},qe={key:2,class:"image_container"},be={style:{width:"32%"}},xe=["src"],Se={key:3,class:"image_container"},ze={style:{width:"32%"}},Te=["src"],$e={key:2,class:"choices-wrapper"},Ne=["onClick"],Ce=["src"],Qe={class:"button-container"},je=B({__name:"Section",props:["showPrevious","showNext","question","answers","selectedQuestionOrder","sectionName","audio_link","duration","questionType"],emits:["previous","next","answer","timeOver","finish"],setup(i){const T=i,u=x();J(T,(m,r)=>{u.value=[],setTimeout(()=>{var a,l;u.value=(l=(a=r.question)==null?void 0:a.image)==null?void 0:l.split(",")},100),p.value="show image",setTimeout(()=>{p.value="show options"},3e3)});function v(){window.scrollTo({top:0,left:0,behavior:"smooth"})}const k=x(!1);let y=x(-1),c=0;function g(){k.value=!0,y.value=Math.floor(Math.random()*7),setTimeout(()=>{y.value=-1},2500),c=Math.random()*80+10}const o=K(()=>{var m;return O(S((m=T.question)==null?void 0:m.question))});function O(m){return m?(console.log(m),console.log(m.split("_____")),m.split("_____")):"invalid"}const p=x("show image");return(m,r)=>{var a,l,q,b;return s(),n("div",ce,[f("div",ve,[f("h3",null,w(i.selectedQuestionOrder+1)+" / "+w((a=i.answers)==null?void 0:a.length),1),A(de,{onTimeOver:r[0]||(r[0]=()=>{m.$emit("timeOver")}),totalTime:i.duration},null,8,["totalTime"])]),f("div",me,[f("div",he,[i.questionType!="Symbol Search"?(s(),n("div",fe,[f("h1",null,w(e(S)((l=i.question)==null?void 0:l.question)),1),i.audio_link?(s(),n("iframe",{key:0,src:i.audio_link,frameborder:"0",allowtransparency:"true",sandbox:"allow-scripts allow-same-origin"},null,8,ye)):d("",!0),f("div",ge,[((q=i.question)==null?void 0:q.image)!=null?(s(!0),n(M,{key:0},P(u.value,t=>{var _;return s(),n("img",{class:H({image2:((_=u.value)==null?void 0:_.length)>1}),src:t,alt:""},null,10,_e)}),256)):d("",!0)])])):d("",!0),i.questionType=="Symbol Search"?(s(),n("div",we,[p.value=="show image"?(s(),n("h1",pe,w(o.value[0]),1)):d("",!0),p.value=="show options"?(s(),n("h1",ke,w(o.value[1]),1)):d("",!0),p.value=="show image"?(s(),n("div",qe,[(s(!0),n(M,null,P(u.value,(t,_)=>(s(),n("span",be,[_<2?(s(),n("img",{key:0,class:"image2",style:{width:"100%"},src:t,alt:""},null,8,xe)):d("",!0)]))),256))])):d("",!0),p.value=="show options"?(s(),n("div",Se,[(s(!0),n(M,null,P(u.value,(t,_)=>(s(),n("span",ze,[_>1?(s(),n("img",{key:0,style:{width:"100%"},class:"image2",src:t,alt:""},null,8,Te)):d("",!0)]))),256))])):d("",!0)])):d("",!0),p.value=="show image"&&i.questionType=="Symbol Search"?d("",!0):(s(),n("div",$e,[(s(!0),n(M,null,P((b=i.question)==null?void 0:b.choices,t=>{var _;return s(),n("p",{class:H(["choice-text",{selectedChoice:(_=i.answers)==null?void 0:_.some(h=>{var N;return(h==null?void 0:h.sub_section_name)==i.sectionName&&(h==null?void 0:h.question_id)==((N=i.question)==null?void 0:N.id)&&(h==null?void 0:h.choice_id)==(t==null?void 0:t.id)})}]),key:t,onClick:()=>{var h;m.$emit("answer",{section_name:i.sectionName,question_id:(h=i.question)==null?void 0:h.id,choice_id:t==null?void 0:t.id})}},[f("span",null,w(e(S)(t==null?void 0:t.choice)),1),t!=null&&t.image?(s(),n("img",{key:0,src:t==null?void 0:t.image,alt:""},null,8,Ce)):d("",!0)],10,Ne)}),128))]))])]),f("div",Qe,[i.questionType=="Symbol Search"&&p.value=="show image"?d("",!0):(s(),Y(e(V),{key:0,label:e(S)(e(j).next),onClick:r[1]||(r[1]=()=>{g(),v(),i.showNext?m.$emit("next"):m.$emit("finish")}),icon:"pi pi-arrow-right",iconPos:"right"},null,8,["label"]))]),e(y)==0?(s(),n("span",{key:0,style:Q({left:e(c).toString()+"vw"}),class:"emoj"},"😀",4)):d("",!0),e(y)==1?(s(),n("span",{key:1,style:Q({left:e(c).toString()+"vw"}),class:"emoj"},"😁",4)):d("",!0),e(y)==2?(s(),n("span",{key:2,style:Q({left:e(c).toString()+"vw"}),class:"emoj"},"😉",4)):d("",!0),e(y)==3?(s(),n("span",{key:3,style:Q({left:e(c).toString()+"vw"}),class:"emoj"},"😎",4)):d("",!0),e(y)==4?(s(),n("span",{key:4,style:Q({left:e(c).toString()+"vw"}),class:"emoj"},"😍",4)):d("",!0),e(y)==5?(s(),n("span",{key:5,style:Q({left:e(c).toString()+"vw"}),class:"emoj"},"😘",4)):d("",!0),e(y)==6?(s(),n("span",{key:6,style:Q({left:e(c).toString()+"vw"}),class:"emoj"},"🥳",4)):d("",!0)])}}}),Oe=D(je,[["__scopeId","data-v-107c3c92"]]),Ie={class:"wrapper"},Ae={style:{display:"flex","flex-direction":"column","align-items":"center",gap:"2rem","padding-inline":"5rem","padding-top":"2rem"}},Me={key:1,class:"section-wrapper"},Pe={class:"section"},Be=B({__name:"analysisQuiz",setup(i){const T=te(),u=new L("get_analysis_quiz"),v=x({title:null,description:null,duration:null,questions:[]}),k=x(),y=x([]),c=x(0),g=x(!1),o=x(!0);u.callApi({analysis_quiz_id:T.params.quizId}).then(r=>{var a,l,q,b,t,_,h,N,$;if(r.msg=="Quiz Taken Before"){X.push("/childNotifications");return}k.value=(a=r==null?void 0:r.data)==null?void 0:a.analysis_quiz,v.value.description=(l=k.value)==null?void 0:l.description,v.value.title=(q=k.value)==null?void 0:q.title,v.value.duration=(b=k.value)==null?void 0:b.duration;for(let R=0;R<((_=(t=k.value)==null?void 0:t.sections)==null?void 0:_.length);R++){let I=(h=k.value)==null?void 0:h.sections[R];for(let W=0;W<((N=I==null?void 0:I.sub_sections)==null?void 0:N.length);W++){let z=I==null?void 0:I.sub_sections[W];for(let E=0;E<(($=z==null?void 0:z.questions)==null?void 0:$.length);E++){let C=z.questions[E];v.value.questions.push({question:C,section_name:z==null?void 0:z.info_name,order:v.value.questions.length,audio_link:C==null?void 0:C.audio_link}),y.value.push({sub_section_name:z==null?void 0:z.info_name,question_id:C==null?void 0:C.id,choice_id:-1})}}}});function O(){o.value=!0}function p(r){let a=y.value.find(l=>(l==null?void 0:l.question_id)==r.question_id&&(l==null?void 0:l.sub_section_name)==r.section_name);a.choice_id=r==null?void 0:r.choice_id}function m(){const r=new L("add_analysis_quiz_answer");let a={answers:{quiz_id:T.params.quizId,answers:y.value}};r.callApi(a).then(l=>{l!=null&&l.success&&(g.value=!0)})}return(r,a)=>{var l,q,b,t,_,h,N;return s(),n("div",Ie,[A(e(se),{style:{"max-width":"80%"},visible:g.value,"onUpdate:visible":a[1]||(a[1]=$=>g.value=$),modal:"",pt:{mask:{style:"backdrop-filter: blur(2px)"},header:{style:"display:none"},content:{style:"margin-block:auto; display: flex; flex-direction: column; align-items: center; justify-content: center;"}}},{default:ee(()=>[f("div",Ae,[f("h3",null,w(e(S)(e(j).wellDone)),1),f("h3",null,w(e(S)(e(j).logWithParent)),1),A(e(V),{label:e(S)(e(j).returnHome),onClick:a[0]||(a[0]=$=>e(X).push("/childNotifications"))},null,8,["label"])])]),_:1},8,["visible","pt"]),o.value?d("",!0):(s(),Y(le,{key:0,title:(l=v.value)==null?void 0:l.title,description:(q=v.value)==null?void 0:q.description,duration:(b=v.value)==null?void 0:b.duration,onStartQuiz:O},null,8,["title","description","duration"])),o.value?(s(),n("div",Me,[f("div",Pe,[A(Oe,{"question-type":(t=v.value.questions[c.value])==null?void 0:t.section_name,"show-next":v.value.questions.length!=c.value+1,"show-previous":c.value!=0,question:(_=v.value.questions[c.value])==null?void 0:_.question,sectionName:(h=v.value.questions[c.value])==null?void 0:h.section_name,selectedQuestionOrder:c.value,answers:y.value,audio_link:(N=v.value.questions[c.value])==null?void 0:N.audio_link,duration:v.value.duration,onNext:a[2]||(a[2]=$=>c.value++),onPrevious:a[3]||(a[3]=$=>c.value--),onAnswer:a[4]||(a[4]=$=>{p($)}),onTimeOver:m,onFinish:m},null,8,["question-type","show-next","show-previous","question","sectionName","selectedQuestionOrder","answers","audio_link","duration"])])])):d("",!0)])}}}),Re=D(Be,[["__scopeId","data-v-91e72f9c"]]);export{Re as default};
