import{P as U}from"./ParentSidebar-CLVCpY0f.js";import{d as b,r as E,W as G,c as g,e,b as $,y as P,f as s,h as F,t as o,q as N,H as Y,o as _,v as V,z as X,s as h,k as w,g as O,_ as m,N as Z,F as j}from"./index-hbg-z_1E.js";import{S as ee}from"./SelectChild-RYnCHixF.js";import{a as H,s as Q}from"./accordiontab.esm-B_V5rNe3.js";import"./dropdown.esm-zW2NZgWR.js";import"./index.esm-CYc4OtqA.js";const te={class:"header"},se={style:{color:"var(--accent2)"}},le={class:"content"},oe={class:"chapters"},re={class:"header"},ne={style:{color:"var(--accent1)"}},ce={style:{color:"var(--accent2)"}},ae={class:"material-content"},de={class:"material"},ie={key:0,class:"lesson"},ue={style:{color:"var(--text)"}},he={key:0,class:"completed",style:{color:"var(--accent2)"}},_e={style:{color:"var(--text)"}},pe={key:1,class:"quiz"},ve={class:"quiz-header"},fe={style:{color:"var(--text)"}},ge={style:{color:"var(--text)"}},ye={style:{color:"var(--text)"}},Ce={class:"quiz-content"},Ie={class:"row names"},we={style:{color:"var(--text)"}},$e={style:{color:"var(--text)"}},ke={style:{color:"var(--text)"}},Re={style:{color:"var(--text)"}},qe={class:"row"},Se=b({__name:"ChildProgress",props:["selectedChildId"],setup(z){const a=z,p=E([]),y=E(),A=G(()=>{y.value=[],p.value=[];let d=[];const v=new Y("get_child_enrollments");if(a.selectedChildId)return v.callApi({child_id:a.selectedChildId}).then(r=>{if(r.data.enrollments){d=r.data.enrollments,y.value=d;for(let l of d){let t=l==null?void 0:l.course_id;new Y("get_course").callApi({course_id:t}).then(i=>{var c,k,M,f,x,L,W;if(i.success){let T={courseTitle:(k=(c=i==null?void 0:i.data)==null?void 0:c.course)==null?void 0:k.title,chapters:[],percentage:0};for(let R of(M=i==null?void 0:i.data)==null?void 0:M.course.chapters){let S={title:R==null?void 0:R.title,material:[],progress:0};for(let u of R==null?void 0:R.materials){let q={title:u==null?void 0:u.title,progress:[],type:u==null?void 0:u.type};if(u.type=="Lesson"){if((f=l==null?void 0:l.progress)!=null&&f.lessons_completed)for(let I of(x=l==null?void 0:l.progress)==null?void 0:x.lessons_completed)(I==null?void 0:I.lesson_id)==u.Id&&q.progress.push(I)}else if(u.type=="Quiz"&&(L=l==null?void 0:l.progress)!=null&&L.quizes_completed)for(let I of(W=l==null?void 0:l.progress)==null?void 0:W.quizes_completed)(I==null?void 0:I.quiz_id)==u.Id&&q.progress.push(I);S.material.push(q)}let B=S.material.reduce((u,q)=>{var I;return(I=q==null?void 0:q.progress)!=null&&I.length?u+1:u},0),D=S.material.length;S.progress=Math.floor(100*B/D),T.chapters.push(S)}let J=T.chapters.reduce((R,S)=>{const B=S.material.reduce((D,u)=>{var q;return(q=u==null?void 0:u.progress)!=null&&q.length?D+1:D},0);return R+B},0),K=T.chapters.reduce((R,S)=>{var D;const B=(D=S.material)==null?void 0:D.length;return R+B},0);T.percentage=Math.floor(J*100/K),p.value.push(T)}})}}}),null});function n(d){const v=new Date(d),r=v.getFullYear(),l=(v.getMonth()+1).toString().padStart(2,"0"),t=v.getDate().toString().padStart(2,"0");return`${r}-${l}-${t}`}return(d,v)=>(_(),g(N,null,[e("main",null,[$(s(H),null,{default:P(()=>[(_(!0),g(N,null,V(p.value,r=>(_(),X(s(Q),{key:r.courseTitle},{header:P(()=>[e("div",te,[e("h2",null,o(s(h)(r.courseTitle)),1),e("h2",se,o(s(h)(s(w).completed))+" "+o(r.percentage)+" % ",1)])]),default:P(()=>[e("div",le,[e("div",oe,[$(s(H),null,{default:P(()=>[(_(!0),g(N,null,V(r.chapters,l=>(_(),X(s(Q),{key:l.title},{header:P(()=>[e("div",re,[e("h3",ne,o(s(h)(l.title)),1),e("h3",ce,o(s(h)(s(w).completed))+" "+o(l.progress)+" % ",1)])]),default:P(()=>[e("div",ae,[(_(!0),g(N,null,V(l.material,t=>{var C,i;return _(),g("div",de,[(t==null?void 0:t.type)=="Lesson"?(_(),g("div",ie,[e("h4",ue,o(s(h)(t.title)),1),(C=t==null?void 0:t.progress[0])!=null&&C.completed_at?(_(),g("div",he,[e("span",_e,o(s(h)(s(w).completedAt)),1),F(" "+o(n((i=t==null?void 0:t.progress[0])==null?void 0:i.completed_at)),1)])):O("",!0)])):O("",!0),t.type=="Quiz"?(_(),g("div",pe,[$(s(H),null,{default:P(()=>[$(s(Q),null,{header:P(()=>{var c,k;return[e("div",ve,[e("h4",fe,o(s(h)(t==null?void 0:t.title)),1),e("h4",null,[e("span",ge,o(s(h)(s(w).heighest)),1),F(" "+o((c=t==null?void 0:t.progress)==null?void 0:c.reduce((M,f)=>(f==null?void 0:f.score_prcentage)>M?f==null?void 0:f.score_prcentage:M,0))+" % ",1)]),e("h4",null,[e("span",ye,o(s(h)(s(w).nomOfAtts)),1),F(" "+o((k=t==null?void 0:t.progress)==null?void 0:k.length),1)])])]}),default:P(()=>[e("div",Ce,[e("div",Ie,[e("h5",we,o(s(h)(s(w).att)),1),e("h5",$e,o(s(h)(s(w).score)),1),e("h5",ke,o(s(h)(s(w).timeToAns)),1),e("h5",Re,o(s(h)(s(w).date)),1)]),(_(!0),g(N,null,V(t==null?void 0:t.progress,(c,k)=>(_(),g("div",qe,[e("h5",null,o(k+1),1),e("h5",null,o(c==null?void 0:c.score_prcentage)+"%",1),e("h5",null,o(c==null?void 0:c.time_taken)+" sec",1),e("h5",null,o(n(c==null?void 0:c.created_at)),1)]))),256))])]),_:2},1024)]),_:2},1024)])):O("",!0)])}),256))])]),_:2},1024))),128))]),_:2},1024)])])]),_:2},1024))),128))]),_:1})]),F(" "+o(A.value),1)],64))}}),Pe=m(Se,[["__scopeId","data-v-a112d288"]]),xe={key:0,class:"container"},ze=["width","height"],Ae=b({__name:"PiChart",props:{data:{},width:{},height:{},innerRadiusRatio:{}},setup(z){const a=z,p=E(null),y=G(()=>{var n,d,v;if(p.value){const r=p.value.getContext("2d");r&&A(r,a.data,a.width,a.height,a.innerRadiusRatio)}return Math.floor(((n=a.data[0])==null?void 0:n.value)/(((d=a.data[0])==null?void 0:d.value)+((v=a.data[1])==null?void 0:v.value))*100)});function A(n,d,v,r,l){const t=d.reduce((f,x)=>f+x.value,0);let C=1.5*Math.PI;const i=v/2,c=r/2,k=Math.min(v,r)/2,M=k*l;d.forEach(f=>{const x=f.value/t*2*Math.PI;n.beginPath(),n.arc(i,c,k,C,C+x),n.arc(i,c,M,C+x,C,!0),n.closePath();const L=n.createLinearGradient(150,0,0,150);L.addColorStop(0,f.color1),L.addColorStop(1,f.color2),n.fillStyle=L,n.fill(),C+=x})}return(n,d)=>n.data?(_(),g("div",xe,[e("canvas",{ref_key:"donutChart",ref:p,width:n.width,height:n.height},null,8,ze),e("h3",null,[e("span",null,o(s(h)(s(w).completed)),1),e("span",null,o(y.value)+"%",1)])])):O("",!0)}}),Me=m(Ae,[["__scopeId","data-v-3ae7506e"]]),De={class:"container",style:{width:"75%","margin-inline":"auto"}},Ne={key:0,class:"progress"},Ee={class:"completed"},Le={class:"in-progress"},Te=b({__name:"CoursesProgress",props:["selectedChildId"],setup(z){const a=z,p=E(),y=E([]),A=G(()=>{let d=[];y.value=[],p.value=null;const v=new Y("get_child_enrollments");if(a.selectedChildId)return v.callApi({child_id:a.selectedChildId}).then(r=>{var l,t;if(r.data.enrollments){d=r.data.enrollments,p.value=d;let C=(l=p.value)==null?void 0:l.filter(i=>i==null?void 0:i.is_completed).length;y.value=[C,((t=p.value)==null?void 0:t.length)-C],n.value=[{value:y.value[0],color1:"#7302ff",color2:"#01abff"},{value:y.value[1],color1:"#aaa",color2:"#aaa"}]}}),null}),n=E();return(d,v)=>{var r,l;return _(),g(N,null,[F(o(A.value)+" ",1),e("main",null,[e("div",De,[z.selectedChildId?(_(),g("div",Ne,[e("div",Ee,[e("p",null,o((r=p.value)==null?void 0:r.length),1),e("p",null,o(s(h)(s(w).coursesEnrolled)),1)]),e("div",Le,[e("p",null,o((l=p.value)==null?void 0:l.filter(t=>t==null?void 0:t.is_completed).length),1),e("p",null,o(s(h)(s(w).coursesCompleted)),1)])])):O("",!0),$(Me,{style:{transform:"translate(0,-1rem)"},data:n.value,width:150,height:150,innerRadiusRatio:.8},null,8,["data"])])])],64)}}}),Be=m(Te,[["__scopeId","data-v-1499c71e"]]),Fe={class:"container"},Oe={class:"wrapper"},Ve=b({__name:"childrenProgress",setup(z){const a=E(null);return(p,y)=>(_(),g(N,null,[$(Z),e("div",Fe,[$(U,{class:"sidebar",selected:"childProgress"}),e("div",Oe,[$(ee,{onSelectedChild:y[0]||(y[0]=A=>a.value=A)}),$(Be,{selectedChildId:a.value},null,8,["selectedChildId"]),$(Pe,{selectedChildId:a.value},null,8,["selectedChildId"])])]),$(j)],64))}}),We=m(Ve,[["__scopeId","data-v-21142fc9"]]);export{We as default};
