import{_ as O}from"./login-HlRQAw4O.js";import{d as S,u as j,a as U,r as w,H as R,c as C,b as u,e,t as f,f as n,g as $,h as z,i as J,j as D,o as L,N as K,s,k as c,l as Q,m as W,F as X,n as Y,_ as Z}from"./index-Bj9u1wIK.js";import{s as oo}from"./index-CY4tZMIO.js";const ao={class:"container"},no={class:"right"},to={class:"welcome"},eo={class:"google-facebook-wrapper"},lo={key:0},io={key:1},so={class:"wrapper"},co={class:"button"},uo=S({__name:"LoginPage",setup(fo){j();const r=J(),E=U(),b=w(),V=w(),B=w(!1),q=w(!1),F=new R("token");function G(){!b.value||!V.value?B.value=!0:F.login(b.value,V.value).then(i=>{(i==null?void 0:i.msg)=="no such user"?q.value=!0:i!=null&&i.access_token&&new R("personal_info").callApi().then(o=>{var d,l,x,a,p,m,_,g,v,h,k,N,y,I;o!=null&&o.success&&(E.addInfo({userType:(l=(d=o==null?void 0:o.data)==null?void 0:d.info)==null?void 0:l.user_type,notifications:(a=(x=o==null?void 0:o.data)==null?void 0:x.info)==null?void 0:a.notifications,id:(m=(p=o==null?void 0:o.data)==null?void 0:p.info)==null?void 0:m.id,firstName:(g=(_=o==null?void 0:o.data)==null?void 0:_.info)==null?void 0:g.first_name,lastName:(h=(v=o==null?void 0:o.data)==null?void 0:v.info)==null?void 0:h.last_name,email:(N=(k=o==null?void 0:o.data)==null?void 0:k.info)==null?void 0:N.email,gender:(I=(y=o==null?void 0:o.data)==null?void 0:y.info)==null?void 0:I.gender}),r.push("/"))})})}const H=i=>{const t=Y(i.credential);if(t.email_verified,t.email_verified){const o=new R("token"),d=U();o.login(t.email,"mahmoud2000").then(l=>{l.msg=="no such user"?q.value=!0:l.access_token&&new R("personal_info").callApi().then(a=>{var p,m,_,g,v,h,k,N,y,I,A,M,P,T;a!=null&&a.success&&(d.addInfo({userType:(m=(p=a==null?void 0:a.data)==null?void 0:p.info)==null?void 0:m.user_type,notifications:(g=(_=a==null?void 0:a.data)==null?void 0:_.info)==null?void 0:g.notifications,id:(h=(v=a==null?void 0:a.data)==null?void 0:v.info)==null?void 0:h.id,firstName:(N=(k=a==null?void 0:a.data)==null?void 0:k.info)==null?void 0:N.first_name,lastName:(I=(y=a==null?void 0:a.data)==null?void 0:y.info)==null?void 0:I.last_name,email:(M=(A=a==null?void 0:a.data)==null?void 0:A.info)==null?void 0:M.email,gender:(T=(P=a==null?void 0:a.data)==null?void 0:P.info)==null?void 0:T.gender}),r.push("/"))})})}};return(i,t)=>{const o=D("Options"),d=D("GoogleLogin");return L(),C("main",null,[u(K),u(o),e("div",ao,[t[3]||(t[3]=e("div",{class:"left borderRigth"},[e("img",{src:O,alt:""})],-1)),e("div",no,[e("div",to,[e("h1",null,f(n(s)(n(c).welcomeBack)),1),e("h1",null,f(n(s)(n(c).traceCommunity)),1)]),e("div",eo,[u(d,{callback:H})]),B.value?(L(),C("h4",lo,f(n(s)(n(c).dataMissing)),1)):$("",!0),q.value?(L(),C("h4",io,f(n(s)(n(c).userNotExist)),1)):$("",!0),e("div",so,[u(n(Q),{style:{width:"100%"},type:"email",class:"input",modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=l=>b.value=l),placeholder:n(s)(n(c).email)},null,8,["modelValue","placeholder"]),u(n(oo),{class:"input",modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=l=>V.value=l),feedback:!1,toggleMask:"",placeholder:n(s)(n(c).pass)},null,8,["modelValue","placeholder"])]),e("div",co,[u(n(W),{onClick:G,label:n(s)(n(c).login)},null,8,["label"])]),e("p",null,[z(f(n(s)(n(c).noAccount))+" ",1),e("strong",{onClick:t[2]||(t[2]=l=>n(r).push("/signup")),style:{cursor:"pointer","text-decoration":"underline",color:"var(--accent1)"}},f(n(s)(n(c).signup)),1)])])]),u(X)])}}}),go=Z(uo,[["__scopeId","data-v-17171952"]]);export{go as default};
