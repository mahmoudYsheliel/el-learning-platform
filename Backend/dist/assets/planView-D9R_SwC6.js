import{d as $,c as k,e as l,t as a,f as e,I as A,g as N,w as B,x as V,o as p,s as t,k as r,m as R,_ as j,J as T,a as F,r as h,H as y,b as d,G,i as L,j as O,N as H,F as z}from"./index-BY3h9Rbs.js";import{C as J}from"./CourseCard-BpJDGpCp.js";import{A as W,E as K,G as Q,P as U}from"./PromoCodeDialog-DGlJDEAJ.js";const X={class:"course-description"},Y={class:"head"},Z=["src"],ee={class:"information"},le={class:"info-container"},oe={class:"wrapper"},ne={class:"wrapper"},ae={class:"description"},se={class:"header"},te={class:"objectives"},ie=$({__name:"PlanDescribtion",props:["plan","isEnrolled","notShowButton"],emits:["enroll","viewMaterial"],setup(s,{emit:g}){return(b,m)=>{var w,v,C,P,D,f,I;return p(),k("div",X,[l("div",Y,[l("h1",null,a(e(t)((w=s.plan)==null?void 0:w.title)),1)]),l("img",{src:(v=s.plan)==null?void 0:v.image,alt:""},null,8,Z),l("div",ee,[l("h2",null,a(e(t)(e(r).planInfo)),1),l("div",le,[l("div",oe,[l("h4",null,a(e(t)(e(r).price)),1),l("p",null,a((C=s.plan)==null?void 0:C.price)+" L.E",1)]),l("div",ne,[l("h4",null,a(e(t)(e(r).age)),1),l("p",null,a((P=s.plan)==null?void 0:P.min_age)+" - "+a((D=s.plan)==null?void 0:D.max_age)+" "+a(e(t)(e(r).years)),1)])])]),l("div",ae,[l("div",se,[l("h2",null,a(e(t)(e(r).planDescription)),1),!s.isEnrolled&&!s.notShowButton?(p(),A(e(R),{key:0,label:e(t)(e(r).enrollNow),onClick:m[0]||(m[0]=()=>{b.$emit("enroll")})},null,8,["label"])):N("",!0),s.isEnrolled&&!s.notShowButton?(p(),A(e(R),{key:1,label:e(t)(e(r).viewMat),onClick:m[1]||(m[1]=()=>{b.$emit("viewMaterial")})},null,8,["label"])):N("",!0)]),l("p",null,a(e(t)((f=s.plan)==null?void 0:f.description)),1)]),l("div",te,[l("h2",null,a(e(t)(e(r).planObjectives)),1),(p(!0),k(B,null,V((I=s.plan)==null?void 0:I.objectives,E=>(p(),k("p",null,"- "+a(e(t)(E)),1))),256))])])}}}),ce=j(ie,[["__scopeId","data-v-7ce9194c"]]),ue={class:"container"},re={class:"courses"},de={class:"coursesContainer"},pe=$({__name:"planView",setup(s){const g=G(),b=L(),m=T(),w=F(),v=h(),C=h([]);new y("get_plan").callApi({plan_id:g.params.planId}).then(n=>{var i,c,o;if(n!=null&&n.success){v.value=(i=n==null?void 0:n.data)==null?void 0:i.plan;for(let _ of(o=(c=n==null?void 0:n.data)==null?void 0:c.plan)==null?void 0:o.courses)new y("get_course").callApi({course_id:_==null?void 0:_.Id}).then(u=>{var S;u!=null&&u.success&&C.value.push((S=u==null?void 0:u.data)==null?void 0:S.course)})}});const D=h(),f=h(!1),I=h(!1),E=h(!1),q=h(!1);function x(){var n,i,c,o;m.getIsAuthorized?((n=w.getInfo)==null?void 0:n.userType)=="Child"?f.value=!0:((i=w.getInfo)==null?void 0:i.userType)=="Parent"&&(((c=g.params)==null?void 0:c.childId)=="0"?E.value=!0:((o=g.params)==null?void 0:o.childId)!="0"&&(q.value=!0)):b.push("/login")}function M(n){var c;q.value=!1,new y("request_enrollment").callApi({request:{student_id:g.params.childId,course_id:(c=v.value)==null?void 0:c.id,promo_code:n,package_type:"plan"}}).then(o=>{var _,u;o!=null&&o.success&&(D.value=(u=(_=o==null?void 0:o.data)==null?void 0:_.request)==null?void 0:u.price,I.value=!0)})}return(n,i)=>{const c=O("Options");return p(),k(B,null,[d(H),d(c),d(W,{showDialog:f.value,onRemoveDialog:i[0]||(i[0]=o=>{f.value=!1})},null,8,["showDialog"]),d(K,{showDialog:I.value,cost:D.value},null,8,["showDialog","cost"]),d(Q,{showDialog:E.value},null,8,["showDialog"]),d(U,{showDialog:q.value,onPromoCode:i[1]||(i[1]=o=>{M(o)})},null,8,["showDialog"]),l("div",ue,[d(ce,{plan:v.value,onEnroll:x},null,8,["plan"]),l("div",re,[l("h2",null,a(e(t)(e(r).planCourses)),1),l("div",de,[(p(!0),k(B,null,V(C.value,o=>(p(),A(J,{course:o,search:""},null,8,["course"]))),256))])])]),d(z)],64)}}}),fe=j(pe,[["__scopeId","data-v-02135cb9"]]);export{fe as default};
